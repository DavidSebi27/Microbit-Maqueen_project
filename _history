{"entries":[{"timestamp":1739217622775,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[-1,"s"],[0,"://"],[-1,"developers.google.com/blockly/xml\"><variables></variables><block type=\"device_forever\" x=\"-14\" y=\"304\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow></value></block></next></block></next></block></statement></block><block type=\"read_Patrol\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"316\" y=\"535\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field"],[1,"www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\""],[0,"></b"]],"start1":12,"start2":12,"length1":1137,"length2":103},{"diffs":[[0,"</block>"],[1,"\n"],[0,"</xml>"]],"start1":112,"start2":112,"length1":14,"length2":15}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"basic.forever(function () {\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && false) {\n    \t\n    }\n    if (true) {\n    \t\n    }\n    if (true) {\n    \t\n    }\n})"],[0,"\n"]],"start1":0,"start2":0,"length1":170,"length2":1}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," \"*\""],[-1,",\n        \"maqueen\": \"github:DFRobot/pxt-maqueen#v1.7.15\""],[0,"\n   "]],"start1":139,"start2":139,"length1":65,"length2":8},{"diffs":[[0,"   \""],[-1,"preferredEditor\": \"blocksprj\""],[1,"additionalFilePaths\": []"],[0,"\n}\n"]],"start1":236,"start2":236,"length1":36,"length2":31}]}]},{"timestamp":1739218208831,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"13"],[1,"-14"],[0,"\" y=\""],[-1,"198"],[1,"304"],[0,"\"><s"]],"start1":106,"start2":106,"length1":18,"length2":19},{"diffs":[[0,"pe=\""],[-1,"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.All</field><field name=\"Dir\">Maqueen_V5.Dir.CW</field"],[1,"controls_if\""],[0,"><va"]],"start1":158,"start2":158,"length1":120,"length2":20},{"diffs":[[0,"f\"><value name=\""],[-1,"speed"],[1,"IF0"],[0,"\"><shadow type=\""]],"start1":172,"start2":172,"length1":37,"length2":35},{"diffs":[[0,"pe=\""],[-1,"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation"],[1,"logic_boolean\""],[0,"><fi"]],"start1":203,"start2":203,"length1":94,"length2":22},{"diffs":[[0,"field name=\""],[-1,"SLIDER\">255"],[1,"BOOL\">TRUE"],[0,"</field></sh"]],"start1":223,"start2":223,"length1":35,"length2":34},{"diffs":[[0,"ow><"],[-1,"/value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M1</field><field name=\"Dir\">Maqueen_V5.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">255</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M2</field><field name=\"Dir\">Maqueen_V5.Dir.CW"],[1,"block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\"><field name=\"OP\">EQ"],[0,"</fi"]],"start1":259,"start2":259,"length1":564,"length2":128},{"diffs":[[0,"ld><value name=\""],[-1,"speed"],[1,"A"],[0,"\"><shadow type=\""]],"start1":388,"start2":388,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":428,"start2":428,"length1":83,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":431,"start2":431,"length1":38,"length2":35},{"diffs":[[0,"ow><"],[-1,"/value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M1</field><field name=\"Dir\">M"],[1,"block type=\"read_Patrol\"><field name=\"patrol\">m"],[0,"aqueen"],[-1,"_V5.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M2</field><field name=\"Dir\">Maqueen_V5.Dir.CW</field"],[1,".Patrol.PatrolLeft</field></block></value"],[0,"><va"]],"start1":467,"start2":467,"length1":569,"length2":102},{"diffs":[[0,"ue><value name=\""],[-1,"speed"],[1,"B"],[0,"\"><shadow type=\""]],"start1":563,"start2":563,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":603,"start2":603,"length1":83,"length2":9},{"diffs":[[0,"field name=\""],[-1,"SLIDER\">255"],[1,"NUM\">1"],[0,"</field></sh"]],"start1":610,"start2":610,"length1":35,"length2":30},{"diffs":[[0,"ue><"],[-1,"next><block type=\"device_pause\""],[1,"/block"],[0,"><"],[1,"/"],[0,"value"],[-1," name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.All</field><field name=\"Dir\">Maqueen_V5.Dir.CCW</field"],[1,"></block></value><next><block type=\"controls_if\""],[0,"><va"]],"start1":650,"start2":650,"length1":264,"length2":70},{"diffs":[[0,"f\"><value name=\""],[-1,"speed"],[1,"IF0"],[0,"\"><shadow type=\""]],"start1":714,"start2":714,"length1":37,"length2":35},{"diffs":[[0,"pe=\""],[-1,"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation"],[1,"logic_boolean\""],[0,"><fi"]],"start1":745,"start2":745,"length1":94,"length2":22},{"diffs":[[0,"field name=\""],[-1,"SLIDER\">255"],[1,"BOOL\">TRUE"],[0,"</field></sh"]],"start1":765,"start2":765,"length1":35,"length2":34},{"diffs":[[0,"block type=\""],[-1,"device_pause"],[1,"controls_if"],[0,"\"><value nam"]],"start1":819,"start2":819,"length1":36,"length2":35},{"diffs":[[0,"f\"><value name=\""],[-1,"pause"],[1,"IF0"],[0,"\"><shadow type=\""]],"start1":841,"start2":841,"length1":37,"length2":35},{"diffs":[[0,"hadow type=\""],[-1,"timePicker"],[1,"logic_boolean"],[0,"\"><field nam"]],"start1":864,"start2":864,"length1":34,"length2":37},{"diffs":[[0,"field name=\""],[-1,"ms\">1000"],[1,"BOOL\">TRUE"],[0,"</field></sh"]],"start1":892,"start2":892,"length1":32,"length2":34},{"diffs":[[0,"ue><"],[-1,"next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M1</field><field name=\"Dir\">Maqueen_V5.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">255</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M2</field><field name=\"Dir\">Maqueen_V5.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement"],[1,"/block></next></block></next></block></statement></block><block type=\"read_Patrol\" disabled-reasons=\"ORPHANED_BLOCK,MANUALLY_DISABLED\" x=\"316\" y=\"535\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field"],[0,"></b"]],"start1":936,"start2":936,"length1":933,"length2":213}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"    "],[-1,"Maqueen_V5.motorRun(Maqueen_V5.Motors.All, Maqueen_V5.Dir.CW, 255)\n    basic.pause(1000)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.M1, Maqueen_V5.Dir.CW, 255)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.M2, Maqueen_V5.Dir.CW, 0)\n    basic.pause(1000)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.M1, Maqueen_V5.Dir.CW, 0)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.M2, Maqueen_V5.Dir.CW, 255)\n    basic.pause(1000)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.All, Maqueen_V5.Dir.CCW, 255)\n    basic.pause(1000)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.M1, Maqueen_V5.Dir.CCW, 255)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.M2, Maqueen_V5.Dir.CCW, 0)\n    basic.pause(1000)"],[1,"if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && false) {\n    \t\n    }\n    if (true) {\n    \t\n    }\n    if (true) {\n    \t\n    }"],[0,"\n})\n"]],"start1":28,"start2":28,"length1":672,"length2":142}]}]},{"timestamp":1739218946400,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0," x=\""],[-1,"0"],[1,"13"],[0,"\" y=\""],[-1,"0"],[1,"198"],[0,"\"><s"]],"start1":106,"start2":106,"length1":15,"length2":18}]}]},{"timestamp":1739218992906,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"iables><"],[1,"block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.All</field><field name=\"Dir\">Maqueen_V5.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">255</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M1</field><field name=\"Dir\">Maqueen_V5.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">255</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M2</field><field name=\"Dir\">Maqueen_V5.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M1</field><field name=\"Dir\">Maqueen_V5.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M2</field><field name=\"Dir\">Maqueen_V5.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">255</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.All</field><field name=\"Dir\">Maqueen_V5.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">255</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M1</field><field name=\"Dir\">Maqueen_V5.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">255</field></shadow></value><next><block type=\"Maqueen_V5_motorRun\"><field name=\"index\">Maqueen_V5.Motors.M2</field><field name=\"Dir\">Maqueen_V5.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" label=\"Speed\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><"],[0,"/xml>"]],"start1":71,"start2":71,"length1":13,"length2":3314}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"// PID Control Variables\nlet lastError = 0;\nlet integral = 0;\nlet Kp = 40;  // Proportional Gain\nlet Ki = 0.1; // Integral Gain\nlet Kd = 25;  // Derivative Gain\nlet baseSpeed = 80;  // Base speed for fast movement\n\nbasic.forever(function () {\n    let IR_L = maqueen.readPatrol(maqueen.Patrol.PatrolLeft);\n    let IR_R = maqueen.readPatrol(maqueen.Patrol.PatrolRight);\n    let distance = maqueen.ultrasonic(PingUnit.Centimeters);\n\n    // 🚨 Obstacle Avoidance 🚨\n    if (distance > 0 && distance < 10) {\n        m"],[1,"basic.forever(function () {\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.All, Maqueen_V5.Dir.CW, 255)\n    basic.pause(1000)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.M1, Maqueen_V5.Dir.CW, 255)\n    M"],[0,"aqueen"],[1,"_V5"],[0,".motor"],[-1,"Stop(m"],[1,"Run(M"],[0,"aqueen"],[1,"_V5"],[0,".Motors."],[-1,"All);\n    "],[1,"M2, Maqueen_V5.Dir.CW, 0)\n"],[0,"    "]],"start1":0,"start2":0,"length1":558,"length2":263},{"diffs":[[0,"use("],[-1,"500);  // Small delay before retrying\n        return;  // Stop execution until obstacle is cleared\n    }\n\n    // 🏁 PID Line Following 🏁\n    let error = IR_L - IR_R;  // -1 (left off), 0 (centered), 1 (right off)\n    integral += error;\n    let derivative = error - lastError;\n    let correction = (Kp * error) + (Ki * integral) + (Kd * derivative);"],[1,"1000)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.M1, Maqueen_V5.Dir.CW, 0)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.M2, Maqueen_V5.Dir.CW, 255)"],[0,"\n    "],[-1,"lastError = error;\n\n    // Adjust motor speeds dynamically\n    let leftSpeed = baseSpeed - correction;\n    let rightSpeed = baseSpeed + correction;\n\n    // Ensuring speeds stay within valid range (0-255)\n    leftSpeed = Math.max(0, Math.min(255, leftSpeed));\n    rightSpeed = Math.max(0, Math.min(255, rightSpeed));\n\n    // Move Maqueen\n    maqueen"],[1,"basic.pause(1000)\n    Maqueen_V5.motorRun(Maqueen_V5.Motors.All, Maqueen_V5.Dir.CCW, 255)\n    basic.pause(1000)\n    Maqueen_V5"],[0,".mot"]],"start1":271,"start2":271,"length1":710,"length2":282},{"diffs":[[0,"een_V5.motorRun("],[-1,"m"],[1,"M"],[0,"aqueen"],[1,"_V5"],[0,".Motors.M1, maqu"]],"start1":543,"start2":543,"length1":39,"length2":42},{"diffs":[[0,"M1, "],[-1,"m"],[1,"M"],[0,"aqueen"],[1,"_V5"],[0,".Dir."],[1,"C"],[0,"CW, "],[-1,"leftSpeed);"],[1,"255)"],[0,"\n    "],[-1,"m"],[1,"M"],[0,"aqueen"],[1,"_V5"],[0,".mot"]],"start1":577,"start2":577,"length1":47,"length2":47},{"diffs":[[0,"otorRun("],[-1,"m"],[1,"M"],[0,"aqueen"],[1,"_V5"],[0,".Motors."]],"start1":622,"start2":622,"length1":23,"length2":26},{"diffs":[[0,"M2, "],[-1,"m"],[1,"M"],[0,"aqueen"],[1,"_V5"],[0,".Dir."],[1,"C"],[0,"CW, "],[-1,"rightSpeed);"],[1,"0)\n    basic.pause(1000)"],[0,"\n})\n"]],"start1":648,"start2":648,"length1":36,"length2":52}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":308,"start2":308,"length1":17,"length2":21}]}]},{"timestamp":1739219577745,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"es><"],[-1,"variable id=\"ORMT:,SzN7b(HnG_$4d^\">IR_L</variable><variable id=\"^;.^.(brb@muE!}YR[QC\">IR_R</variable><variable id=\"(rFF^0MRb:J8=/TU9k#e\">distance</variable><variable id=\"E-x.}urFcbbLK]foO~04\">Kp</variable><variable id=\"hrOHIMjeP?ax1tF5M:^W\">Ki</variable><variable id=\"/oha`2xZS1r1zI{Ki]0X\">Kd</variable><variable id=\"8Nl-@B(qBOSLtBxCSt0U\">baseSpeed</variable></variables><comment x=\"20\" y=\"393\" w=\"210\" h=\"120\">\nPID Control Variables\n</comment><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"E-x.}urFcbbLK]foO~04\">Kp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Proportional Gain</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"hrOHIMjeP?ax1tF5M:^W\">Ki</field><comment pinned=\"false\" h=\"80\" w=\"160\">Integral Gain</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0.1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"/oha`2xZS1r1zI{Ki]0X\">Kd</field><comment pinned=\"false\" h=\"80\" w=\"160\">Derivative Gain</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"8Nl-@B(qBOSLtBxCSt0U\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Base speed for fast movement</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">80</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"347\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Base speed for fast movement</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"ORMT:,SzN7b(HnG_$4d^\">IR_L</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"^;.^.(brb@muE!}YR[QC\">IR_R</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(rFF^0MRb:J8=/TU9k#e\">distance</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"></block></next></block></next></block></next></block></statement></block"],[1,"/variables"],[0,"></x"]],"start1":63,"start2":63,"length1":2592,"length2":18}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"/"],[-1,"**\n *"],[1,"/"],[0," PID"]],"start1":0,"start2":0,"length1":10,"length2":6},{"diffs":[[0,"les\n"],[-1," */\nlet distance"],[1,"let lastError"],[0," = 0"],[1,";"],[0,"\nlet "],[-1,"IR_R"],[1,"integral"],[0," = 0"],[1,";"],[0,"\nlet "],[-1,"IR_L = 0\n"],[1,"Kp = 40;  "],[0,"// P"]],"start1":21,"start2":21,"length1":55,"length2":59},{"diffs":[[0,"et K"],[-1,"p = 40\n"],[1,"i = 0.1; "],[0,"// I"]],"start1":98,"start2":98,"length1":15,"length2":17},{"diffs":[[0,"et K"],[-1,"i = 0.1\n"],[1,"d = 25;  "],[0,"// D"]],"start1":129,"start2":129,"length1":16,"length2":17},{"diffs":[[0,"ain\n"],[-1,"let Kd = 25\n// Base speed for fast movement\n"],[0,"let "]],"start1":157,"start2":157,"length1":52,"length2":8},{"diffs":[[0,"eed = 80"],[-1,"\n"],[1,";  "],[0,"// Base "]],"start1":171,"start2":171,"length1":17,"length2":19},{"diffs":[[0,"ovement\n"],[1,"\n"],[0,"basic.fo"]],"start1":206,"start2":206,"length1":16,"length2":17},{"diffs":[[0,") {\n    "],[1,"let "],[0,"IR_L = m"]],"start1":239,"start2":239,"length1":16,"length2":20},{"diffs":[[0,"rolLeft)"],[1,";"],[0,"\n    "],[1,"let "],[0,"IR_R = m"]],"start1":295,"start2":295,"length1":21,"length2":26},{"diffs":[[0,"olRight)"],[1,";"],[0,"\n    "],[1,"let "],[0,"distance"]],"start1":358,"start2":358,"length1":21,"length2":26},{"diffs":[[0,"een."],[-1,"Ultrasonic()\n    if (false) {\n    \t\n    }"],[1,"ultrasonic(PingUnit.Centimeters);\n\n    // 🚨 Obstacle Avoidance 🚨\n    if (distance > 0 && distance < 10) {\n        maqueen.motorStop(maqueen.Motors.All);\n        basic.pause(500);  // Small delay before retrying\n        return;  // Stop execution until obstacle is cleared\n    }\n\n    // 🏁 PID Line Following 🏁\n    let error = IR_L - IR_R;  // -1 (left off), 0 (centered), 1 (right off)\n    integral += error;\n    let derivative = error - lastError;\n    let correction = (Kp * error) + (Ki * integral) + (Kd * derivative);\n    lastError = error;\n\n    // Adjust motor speeds dynamically\n    let leftSpeed = baseSpeed - correction;\n    let rightSpeed = baseSpeed + correction;\n\n    // Ensuring speeds stay within valid range (0-255)\n    leftSpeed = Math.max(0, Math.min(255, leftSpeed));\n    rightSpeed = Math.max(0, Math.min(255, rightSpeed));\n\n    // Move Maqueen\n    maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, leftSpeed);\n    maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, rightSpeed);"],[0,"\n})\n"]],"start1":391,"start2":391,"length1":49,"length2":1010}]}]},{"timestamp":1739219938841,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"basic.forever(function () {\n    let IR_L = maqueen.readPatrol(maqueen.Patrol.PatrolLeft);\n    let IR_R = maqueen.readPatrol(maqueen.Patrol.PatrolRight);\n    let distance = maqueen.Ultrasonic();  // Get distance from ultrasonic sensor\n\n    // 🚨 Stop if an obstacle is detected within 10 cm\n    if (distance > 0 && distance < 10) {\n        maqueen.motorStop(maqueen.Motors.All);\n        basic.pause(500);  // Pause to recheck\n        return;\n    }\n\n    // 🏁 Optimized Line Following Logic\n    if (IR_L == 1 && IR_R == 1) {\n        // Both sensors detect the line → Move straight\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 100);\n    }\n    else if (IR_L == 1 && IR_R == 0) {\n        // Left sensor detects line, right does not → Adjust left\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 40);\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 100);\n    }\n    else if (IR_L == 0 && IR_R == 1) {\n        // Right sensor detects line, left does not → Adjust right\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 100);\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40);\n    }\n    e"],[1,"/**\n * PID Control Variables\n */\nlet distance = 0\nlet IR_R = 0\nlet IR_L = 0\n// Proportional Gain\nlet Kp = 40\n// Integral Gain\nlet Ki = 0.1\n// Derivative Gain\nlet Kd = 25\n// Base speed for fast movement\nlet baseSpeed = 80\n// Base speed for fast movement\nbasic.forever(function () {\n    IR_L = maqueen.readPatrol(maqueen.Patrol.PatrolLeft)\n    IR_R = maqueen.readPatrol(maqueen.Patrol.PatrolRight)\n    distance = maqueen.Ultrasonic()\n    if (fa"],[0,"lse"],[1,")"],[0," {\n    "],[-1,"  "],[-1,"  // If both sensors lose the line → Stop and recalibrate\n        maqueen.motorStop(maqueen.Motors.All);"],[1,"\t"],[0,"\n   "]],"start1":0,"start2":0,"length1":1262,"length2":458}]}]},{"timestamp":1739223825509,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"id=\""],[-1,"@k$)Alqs2)H76:fBCxp"],[1,"ORMT:,SzN7b(HnG_$4d^\">IR_L</variable><variable id=\"^;.^.(brb@muE!}YR[Q"],[0,"C\">IR_"],[-1,"L"],[1,"R"],[0,"</va"]],"start1":76,"start2":76,"length1":34,"length2":85},{"diffs":[[0,"id=\""],[-1,"Tgfoq%f%(Dt3Qt%TXl~`\">IR_R</variable><variable id=\"gx]yBX{sWp7Mgr]x,%B`\">distance</variable></variables><block type=\"device_forever\" x=\"347\" y=\"20\""],[1,"(rFF^0MRb:J8=/TU9k#e\">distance</variable><variable id=\"E-x.}urFcbbLK]foO~04\">Kp</variable><variable id=\"hrOHIMjeP?ax1tF5M:^W\">Ki</variable><variable id=\"/oha`2xZS1r1zI{Ki]0X\">Kd</variable><variable id=\"8Nl-@B(qBOSLtBxCSt0U\">baseSpeed</variable></variables><comment x=\"20\" y=\"393\" w=\"210\" h=\"120\">\nPID Control Variables\n</comment><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"E-x.}urFcbbLK]foO~04\">Kp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Proportional Gain</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"hrOHIMjeP?ax1tF5M:^W\">Ki</field><comment pinned=\"false\" h=\"80\" w=\"160\">Integral Gain</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0.1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"/oha`2xZS1r1zI{Ki]0X\">Kd</field><comment pinned=\"false\" h=\"80\" w=\"160\">Derivative Gain</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"8Nl-@B(qBOSLtBxCSt0U\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Base speed for fast movement</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">80</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"347\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Base speed for fast movement</comment"],[0,"><st"]],"start1":178,"start2":178,"length1":155,"length2":1588},{"diffs":[[0,"id=\""],[-1,"@k$)Alqs2)H76:fBCxpC"],[1,"ORMT:,SzN7b(HnG_$4d^"],[0,"\">IR"]],"start1":1835,"start2":1835,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"Tgfoq%f%(Dt3Qt%TXl~`"],[1,"^;.^.(brb@muE!}YR[QC"],[0,"\">IR"]],"start1":2104,"start2":2104,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"gx]yBX{sWp7Mgr]x,%B`\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Get distance from ultrasonic sensor</comment"],[1,"(rFF^0MRb:J8=/TU9k#e\">distance</field"],[0,"><va"]],"start1":2374,"start2":2374,"length1":129,"length2":45}]}]},{"timestamp":1739223977189,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"es><"],[-1,"/"],[0,"variable"],[-1,"s><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ"],[1," id=\"@k$)Alqs2)H76:fBCxpC\">IR_L</variable><variable id=\"Tgfoq%f%(Dt3Qt%TXl~`\">IR_R</variable><variable id=\"gx]yBX{sWp7Mgr]x,%B`\">distance</variable></variables><block type=\"device_forever\" x=\"347\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"@k$)Alqs2)H76:fBCxpC\">IR_L"],[0,"</fi"]],"start1":63,"start2":63,"length1":1732,"length2":322},{"diffs":[[0,"ld><value name=\""],[-1,"A"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":386,"start2":386,"length1":33,"length2":37},{"diffs":[[0,"ue><"],[-1,"value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ"],[1,"next><block type=\"variables_set\"><field name=\"VAR\" id=\"Tgfoq%f%(Dt3Qt%TXl~`\">IR_R"],[0,"</fi"]],"start1":565,"start2":565,"length1":242,"length2":89},{"diffs":[[0,"ld><value name=\""],[-1,"A"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":655,"start2":655,"length1":33,"length2":37},{"diffs":[[0,"ue><"],[-1,"value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">80</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value></block></next></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field"],[1,"next><block type=\"variables_set\"><field name=\"VAR\" id=\"gx]yBX{sWp7Mgr]x,%B`\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Get distance from ultrasonic sensor</comment"],[0,"><va"]],"start1":835,"start2":835,"length1":1463,"length2":184},{"diffs":[[0,"e name=\""],[-1,"A"],[1,"VALUE"],[0,"\"><shado"]],"start1":1021,"start2":1021,"length1":17,"length2":21},{"diffs":[[0,"pe=\""],[-1,"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">80</field></shadow></value></block></next></block></statemen"],[1,"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"></block></nex"],[0,"t></"]],"start1":1108,"start2":1108,"length1":812,"length2":88}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"on () {\n    "],[-1,"if ("],[1,"let IR_L = "],[0,"maqueen.read"]],"start1":20,"start2":20,"length1":28,"length2":35},{"diffs":[[0,".PatrolLeft)"],[-1," == 1 &&"],[1,";\n    let IR_R ="],[0," maqueen.rea"]],"start1":76,"start2":76,"length1":32,"length2":40},{"diffs":[[0,"rol.PatrolRight)"],[-1," == 1"],[1,";\n    let distance = maqueen.Ultrasonic();  // Get distance from ultrasonic sensor\n\n    // 🚨 Stop if an obstacle is detected within 10 cm\n    if (distance > 0 && distance < 10"],[0,") {\n        maqu"]],"start1":135,"start2":135,"length1":37,"length2":208},{"diffs":[[0,"   maqueen.motor"],[-1,"Run"],[1,"Stop"],[0,"(maqueen.Motors."]],"start1":336,"start2":336,"length1":35,"length2":36},{"diffs":[[0,".All"],[-1,", maqueen.Dir.CW, 100)\n    }\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft)"],[1,");\n        basic.pause(500);  // Pause to recheck\n        return;\n    }\n\n    // 🏁 Optimized Line Following Logic\n    if (IR_L == 1 && IR_R == 1) {\n        // Both sensors detect the line → Move straight\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 100);\n    }\n    else if (IR_L"],[0," == "],[-1,"0"],[1,"1"],[0," && "],[-1,"maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {"],[1,"IR_R == 0) {\n        // Left sensor detects line, right does not → Adjust left"],[0,"\n   "]],"start1":371,"start2":371,"length1":153,"length2":389},{"diffs":[[0,"maqueen.Dir."],[-1,"C"],[0,"CW, "],[-1,"8"],[1,"4"],[0,"0)"],[1,";"],[0,"\n        maq"]],"start1":801,"start2":801,"length1":32,"length2":32},{"diffs":[[0,"Dir.CW, 100)"],[1,";"],[0,"\n    }\n    i"]],"start1":874,"start2":874,"length1":24,"length2":25},{"diffs":[[0,"    "],[-1,"if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft)"],[1,"else if (IR_L"],[0," == "],[-1,"1"],[1,"0"],[0," && "],[-1,"maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {"],[1,"IR_R == 1) {\n        // Right sensor detects line, left does not → Adjust right"],[0,"\n   "]],"start1":894,"start2":894,"length1":120,"length2":109},{"diffs":[[0,"CW, 100)"],[1,";"],[0,"\n       "]],"start1":1056,"start2":1056,"length1":16,"length2":17},{"diffs":[[0,"Dir."],[-1,"C"],[0,"CW, "],[-1,"8"],[1,"4"],[0,"0)"],[1,";\n    }\n    else {\n        // If both sensors lose the line → Stop and recalibrate\n        maqueen.motorStop(maqueen.Motors.All);"],[0,"\n   "]],"start1":1118,"start2":1118,"length1":16,"length2":144}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":308,"start2":308,"length1":21,"length2":17}]}]},{"timestamp":1739224546765,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"es><"],[-1,"variable id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</variable><variable id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</variable></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation"],[1,"/variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\""],[0,"><va"]],"start1":63,"start2":63,"length1":793,"length2":111},{"diffs":[[0,"block type=\""],[-1,"variables_get"],[1,"read_Patrol"],[0,"\"><field nam"]],"start1":536,"start2":536,"length1":37,"length2":35},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L"],[1,"patrol\">maqueen.Patrol.PatrolLeft"],[0,"</fi"]],"start1":570,"start2":570,"length1":43,"length2":41},{"diffs":[[0,"block type=\""],[-1,"variables_get"],[1,"read_Patrol"],[0,"\"><field nam"]],"start1":954,"start2":954,"length1":37,"length2":35},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R"],[1,"patrol\">maqueen.Patrol.PatrolRight"],[0,"</fi"]],"start1":988,"start2":988,"length1":43,"length2":42},{"diffs":[[0,">maqueen.Motors."],[-1,"M1"],[1,"All"],[0,"</field><field n"]],"start1":1239,"start2":1239,"length1":34,"length2":35},{"diffs":[[0,"ld><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">Move in a controlled forward curve (slight right bias)\nLeft motor slower</comment><"],[0,"valu"]],"start1":1303,"start2":1303,"length1":129,"length2":8},{"diffs":[[0,"ER\">"],[-1,"7"],[1,"10"],[0,"0</f"]],"start1":1430,"start2":1430,"length1":9,"length2":10},{"diffs":[[0,"ue><"],[-1,"next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Right motor faster</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value></block></next></block></statement"],[1,"/block></statement><next><block type=\"controls_if\""],[0,"><va"]],"start1":1459,"start2":1459,"length1":384,"length2":58},{"diffs":[[0,"name=\"IF"],[-1,"1"],[1,"0"],[0,"\"><shado"]],"start1":1521,"start2":1521,"length1":17,"length2":17},{"diffs":[[0,"block type=\""],[-1,"variables_get"],[1,"read_Patrol"],[0,"\"><field nam"]],"start1":1879,"start2":1879,"length1":37,"length2":35},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L"],[1,"patrol\">maqueen.Patrol.PatrolLeft"],[0,"</fi"]],"start1":1913,"start2":1913,"length1":43,"length2":41},{"diffs":[[0,"block type=\""],[-1,"variables_get"],[1,"read_Patrol"],[0,"\"><field nam"]],"start1":2297,"start2":2297,"length1":37,"length2":35},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R"],[1,"patrol\">maqueen.Patrol.PatrolRight"],[0,"</fi"]],"start1":2331,"start2":2331,"length1":43,"length2":42},{"diffs":[[0,"name=\"DO"],[-1,"1"],[1,"0"],[0,"\"><block"]],"start1":2523,"start2":2523,"length1":17,"length2":17},{"diffs":[[0,"ir\">maqueen.Dir."],[1,"C"],[0,"CW</field><comme"]],"start1":2622,"start2":2622,"length1":32,"length2":33},{"diffs":[[0,"ld><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">Left sensor off (drifting left) → Adjust smoothly to right</comment><"],[0,"valu"]],"start1":2646,"start2":2646,"length1":115,"length2":8},{"diffs":[[0,"d name=\"SLIDER\">"],[-1,"5"],[1,"8"],[0,"0</field></shado"]],"start1":2761,"start2":2761,"length1":33,"length2":33},{"diffs":[[0,"/statement><"],[1,"next><block type=\"controls_if\"><"],[0,"value name=\""]],"start1":3104,"start2":3104,"length1":24,"length2":56},{"diffs":[[0,"name=\"IF"],[-1,"2"],[1,"0"],[0,"\"><shado"]],"start1":3154,"start2":3154,"length1":17,"length2":17},{"diffs":[[0,"block type=\""],[-1,"variables_get"],[1,"read_Patrol"],[0,"\"><field nam"]],"start1":3512,"start2":3512,"length1":37,"length2":35},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L"],[1,"patrol\">maqueen.Patrol.PatrolLeft"],[0,"</fi"]],"start1":3546,"start2":3546,"length1":43,"length2":41},{"diffs":[[0,"pe=\""],[-1,"variables_get"],[1,"read_Patrol"],[0,"\"><f"]],"start1":3938,"start2":3938,"length1":21,"length2":19},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R"],[1,"patrol\">maqueen.Patrol.PatrolRight"],[0,"</fi"]],"start1":3964,"start2":3964,"length1":43,"length2":42},{"diffs":[[0,"name=\"DO"],[-1,"2"],[1,"0"],[0,"\"><block"]],"start1":4156,"start2":4156,"length1":17,"length2":17},{"diffs":[[0,"ld><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">Right sensor off (drifting right) → Adjust smoothly to left</comment><"],[0,"valu"]],"start1":4278,"start2":4278,"length1":116,"length2":8},{"diffs":[[0,"ir\">maqueen.Dir."],[1,"C"],[0,"CW</field><value"]],"start1":4531,"start2":4531,"length1":32,"length2":33},{"diffs":[[0,"SLIDER\">"],[-1,"5"],[1,"8"],[0,"0</field"]],"start1":4678,"start2":4678,"length1":17,"length2":17},{"diffs":[[0,"nt><"],[-1,"statement name=\"ELSE\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if completely off track</comment></block></statement><"],[0,"/blo"]],"start1":4745,"start2":4745,"length1":205,"length2":8}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"let IR_L = 0\nlet IR_R = 0\n"],[0,"basi"]],"start1":0,"start2":0,"length1":30,"length2":4},{"diffs":[[0,"    "],[-1,"IR_L = "],[1,"if ("],[0,"maqu"]],"start1":28,"start2":28,"length1":15,"length2":12},{"diffs":[[0,"eft)"],[-1,"\n    IR_R ="],[1," == 1 &&"],[0," maq"]],"start1":77,"start2":77,"length1":19,"length2":16},{"diffs":[[0,"ght)"],[-1,"\n    if (IR_L == 1 && IR_R == 1) {\n        // Move in a controlled forward curve (slight right bias)\n        // Left motor slower"],[1," == 1) {"],[0,"\n   "]],"start1":132,"start2":132,"length1":137,"length2":16},{"diffs":[[0,"(maqueen.Motors."],[-1,"M1"],[1,"All"],[0,", maqueen.Dir.CW"]],"start1":169,"start2":169,"length1":34,"length2":35},{"diffs":[[0,"CW, "],[-1,"7"],[1,"10"],[0,"0)\n    "],[1,"}\n"],[0,"    "],[-1,"// Right motor faster\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 100)\n    } else if (IR_L == 0 && IR_R == 1) {\n        // Left sensor off (drifting left) → Adjust smoothly to right"],[1,"if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {"],[0,"\n   "]],"start1":202,"start2":202,"length1":217,"length2":135},{"diffs":[[0,"maqueen.Dir."],[1,"C"],[0,"CW, "],[-1,"5"],[1,"8"],[0,"0)\n        m"]],"start1":378,"start2":378,"length1":29,"length2":30},{"diffs":[[0,"   }"],[-1," else if (IR_L == 1 && IR_R == 0) {\n        // Right sensor off (drifting right) → Adjust smoothly to left"],[1,"\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {"],[0,"\n   "]],"start1":465,"start2":465,"length1":114,"length2":125},{"diffs":[[0,"Dir."],[1,"C"],[0,"CW, "],[-1,"50)\n    } else {\n        // Stop if completely off track\n        maqueen.motorStop(maqueen.Motors.All"],[1,"80"],[0,")\n  "]],"start1":704,"start2":704,"length1":113,"length2":15}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":308,"start2":308,"length1":17,"length2":21}]}]},{"timestamp":1739224891009,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[1,"let IR_L = 0\nlet IR_R = 0\n"],[0,"basic.fo"]],"start1":0,"start2":0,"length1":8,"length2":34},{"diffs":[[0,"on () {\n    "],[-1,"if ("],[1,"IR_L = "],[0,"maqueen.read"]],"start1":46,"start2":46,"length1":28,"length2":31},{"diffs":[[0,".PatrolLeft)"],[-1," == 1 &&"],[1,"\n    IR_R ="],[0," maqueen.rea"]],"start1":98,"start2":98,"length1":32,"length2":35},{"diffs":[[0,"PatrolRight)"],[-1," == 1) {"],[1,"\n    if (IR_L == 1 && IR_R == 1) {\n        // Move in a controlled forward curve (slight right bias)\n        // Left motor slower"],[0,"\n        maq"]],"start1":156,"start2":156,"length1":32,"length2":153},{"diffs":[[0,"ors."],[-1,"All"],[1,"M1"],[0,", ma"]],"start1":334,"start2":334,"length1":11,"length2":10},{"diffs":[[0,"CW, "],[-1,"6"],[1,"7"],[0,"0)\n    "],[-1,"}\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {"],[1,"    // Right motor faster\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 100)\n    } else if (IR_L == 0 && IR_R == 1) {\n        // Left sensor off (drifting left) → Adjust smoothly to right"],[0,"\n   "]],"start1":354,"start2":354,"length1":134,"length2":217},{"diffs":[[0,"maqueen.Dir."],[-1,"C"],[0,"CW, "],[-1,"2"],[0,"5"],[1,"0"],[0,")\n        ma"]],"start1":612,"start2":612,"length1":31,"length2":30},{"diffs":[[0,"CW, "],[-1,"6"],[1,"10"],[0,"0)\n    }"],[-1,"\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {"],[1," else if (IR_L == 1 && IR_R == 0) {\n        // Right sensor off (drifting right) → Adjust smoothly to left"],[0,"\n   "]],"start1":688,"start2":688,"length1":134,"length2":124},{"diffs":[[0,"CW, "],[-1,"6"],[1,"10"],[0,"0)\n "]],"start1":865,"start2":865,"length1":9,"length2":10},{"diffs":[[0,"Dir."],[-1,"C"],[0,"CW, "],[-1,"2"],[0,"5"],[1,"0)\n    } else {\n        // Stop if completely off track\n        maqueen.motorStop(maqueen.Motors.All"],[0,")\n  "]],"start1":926,"start2":926,"length1":15,"length2":113}]}]},{"timestamp":1739225553534,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"  }\n"],[-1,"    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n        // 🚨 Both sensors lost the line → Stop immediately!\n        maqueen.motorStop(maqueen.Motors.All);\n    }\n"],[0,"})\n"]],"start1":716,"start2":716,"length1":238,"length2":7}]}]},{"timestamp":1739225554605,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ble id=\""],[-1,"1D4h$JA[@)]aJ7:GB%RR"],[1,"B`X93ldQ).Y8|L[w$3Ap"],[0,"\">IR_L</"]],"start1":72,"start2":72,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"`D%tAAc*Aqab*YyQ`4TQ\">IR_R</variable><variable id=\"ZUr}lO#I7g!S4x$P/R{t\">distance"],[1,"tDEtoR}$tx5S/p:9:{k^\">IR_R"],[0,"</va"]],"start1":127,"start2":127,"length1":89,"length2":34},{"diffs":[[0," x=\""],[-1,"2"],[0,"0\" y=\""],[-1,"2"],[0,"0\"><"]],"start1":208,"start2":208,"length1":16,"length2":14},{"diffs":[[0,"id=\""],[-1,"1D4h$JA[@)]aJ7:GB%RR"],[1,"B`X93ldQ).Y8|L[w$3Ap"],[0,"\">IR"]],"start1":293,"start2":293,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"`D%tAAc*Aqab*YyQ`4TQ"],[1,"tDEtoR}$tx5S/p:9:{k^"],[0,"\">IR"]],"start1":562,"start2":562,"length1":28,"length2":28},{"diffs":[[0,"pe=\""],[-1,"variables_set\"><field name=\"VAR\" id=\"ZUr}lO#I7g!S4x$P/R{t\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read ultrasonic sensor once</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"></block></nex"],[1,"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move in a controlled forward curve (slight right bias)\nLeft motor slower</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">70</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Right motor faster</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Left sensor off (drifting left) → Adjust smoothly to right</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value></block></next></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO2\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Right sensor off (drifting right) → Adjust smoothly to left</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if completely off track</comment></block></statemen"],[0,"t></"]],"start1":795,"start2":795,"length1":335,"length2":5481}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"    "],[-1,"// 🚨 Stop if an obstacle is within 10 cm\n    if (maqueen.Ultrasonic() > 0 && maqueen.Ultrasonic() < 10) {\n        maqueen.motorStop(maqueen.Motors.All);\n    }\n\n    // 🏁 Line Following Logic\n    else "],[0,"if ("]],"start1":28,"start2":28,"length1":209,"length2":8},{"diffs":[[0,"maqueen.Dir.CW, "],[-1,"5"],[1,"6"],[0,"0)"],[-1,";"],[0,"\n    }\n    else "]],"start1":190,"start2":190,"length1":36,"length2":35},{"diffs":[[0,", 60)\n    }\n    "],[-1,"else "],[0,"if (maqueen.read"]],"start1":204,"start2":204,"length1":37,"length2":32},{"diffs":[[0,"Dir.CCW, 25)"],[-1,";"],[0,"\n        maq"]],"start1":385,"start2":385,"length1":25,"length2":24},{"diffs":[[0,"een.Dir.CW, "],[-1,"5"],[1,"6"],[0,"0)"],[-1,";"],[0,"\n    }\n    e"]],"start1":446,"start2":446,"length1":28,"length2":27},{"diffs":[[0,", 60)\n    }\n    "],[-1,"else "],[0,"if (maqueen.read"]],"start1":456,"start2":456,"length1":37,"length2":32},{"diffs":[[0,"CW, "],[-1,"5"],[1,"6"],[0,"0)"],[-1,";"],[0,"\n   "]],"start1":641,"start2":641,"length1":12,"length2":11},{"diffs":[[0,"CCW, 25)"],[-1,";"],[0,"\n    }\n "]],"start1":705,"start2":705,"length1":17,"length2":16},{"diffs":[[0,"    "],[-1,"else "],[0,"if ("]],"start1":720,"start2":720,"length1":13,"length2":8},{"diffs":[[0,"    }\n})"],[1,"\n"]],"start1":945,"start2":945,"length1":8,"length2":9}]}]},{"timestamp":1739225962296,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0," // "],[-1,"Read sensor values\n    let leftSensor = maqueen.readPatrol(maqueen.Patrol.PatrolLeft);\n    let rightSensor = maqueen.readPatrol(maqueen.Patrol.PatrolRight);\n\n    // Both sensors on the surface (white) - move forward\n    if (leftSensor == 1 && rightSensor == 1) {\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50);  // Increased speed to 50\n    }\n    // Left sensor on the line (black), right sensor on the surface (white) - turn left\n    else if (leftSensor == 0 && rightSensor"],[1,"🚨 Stop if an obstacle is within 10 cm\n    if (maqueen.Ultrasonic() > 0 && maqueen.Ultrasonic() < 10) {\n        maqueen.motorStop(maqueen.Motors.All);\n    }\n\n    // 🏁 Line Following Logic\n    else if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50);\n    }\n    else if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight)"],[0," == "]],"start1":31,"start2":31,"length1":500,"length2":504},{"diffs":[[0,"CW, "],[1,"2"],[0,"5);"],[-1,"  // Reduced CCW speed to 5"],[0,"\n   "]],"start1":597,"start2":597,"length1":38,"length2":12},{"diffs":[[0,"maqueen.Dir.CW, "],[-1,"4"],[1,"5"],[0,"0);\n    }\n    //"]],"start1":650,"start2":650,"length1":33,"length2":33},{"diffs":[[0,"    "],[-1,"// Right sensor on the line (black), left sensor on the surface (white) - turn right\n    else if (leftSensor == 1 && rightSensor"],[1,"else if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight)"],[0," == "]],"start1":677,"start2":677,"length1":136,"length2":117},{"diffs":[[0,"CW, "],[-1,"4"],[1,"5"],[0,"0);\n"]],"start1":855,"start2":855,"length1":9,"length2":9},{"diffs":[[0,"CW, "],[1,"2"],[0,"5);"],[1,"\n"],[0,"  "],[-1,"// Reduced CCW speed to 5"],[1,"  }\n    else if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {"],[0,"\n    "],[-1,"}\n"],[0,"    //"],[1," 🚨"],[0," Bot"]],"start1":921,"start2":921,"length1":51,"length2":154},{"diffs":[[0,"sensors "],[-1,"on"],[1,"lost"],[0," the lin"]],"start1":1077,"start2":1077,"length1":18,"length2":20},{"diffs":[[0,"ine "],[-1,"(black) - stop or move forward (optional)\n    else if (leftSensor == 0 && rightSensor == 0) {\n "],[1,"→ Stop immediately!\n"],[0,"    "]],"start1":1095,"start2":1095,"length1":103,"length2":28},{"diffs":[[0,"    }\n})"],[-1,";"]],"start1":1166,"start2":1166,"length1":9,"length2":8}]}]},{"timestamp":1739226545672,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"let lastTurn = \"none\";  // Track the last turn direction\n\n"],[0,"basi"]],"start1":0,"start2":0,"length1":62,"length2":4},{"diffs":[[0,"nction () {\n"],[1,"    // Read sensor values\n"],[0,"    let left"]],"start1":16,"start2":16,"length1":24,"length2":50},{"diffs":[[0,"een.Dir.CW, 50);"],[1,"  // Increased speed to 50"],[0,"\n    }\n    // Le"]],"start1":347,"start2":347,"length1":32,"length2":58},{"diffs":[[0,"een.Dir.CCW, 5);"],[1,"  // Reduced CCW speed to 5"],[0,"\n        maqueen"]],"start1":584,"start2":584,"length1":32,"length2":59},{"diffs":[[0,"0);\n"],[-1,"        lastTurn = \"left\";  // Update last turn direction\n"],[0,"    "]],"start1":689,"start2":689,"length1":66,"length2":8},{"diffs":[[0," 5);"],[-1,"\n        lastTurn = \"right\";  // Update last turn direction"],[1,"  // Reduced CCW speed to 5"],[0,"\n   "]],"start1":965,"start2":965,"length1":67,"length2":35},{"diffs":[[0,"black) -"],[1," stop or"],[0," move fo"]],"start1":1036,"start2":1036,"length1":16,"length2":24},{"diffs":[[0,"move forward"],[1," (optional)"],[0,"\n    else if"]],"start1":1053,"start2":1053,"length1":24,"length2":35},{"diffs":[[0,"    "],[-1,"maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50);\n    }\n    // Both sensors on the surface (white) - recover based on last turn\n    else {\n        if (lastTurn == \"left\") {\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, 5);\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40);\n        } else if (lastTurn == \"right\") {\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 40);\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, 5);\n        } else {\n            // If no last turn, stop or move forward\n            maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50);\n        }"],[1," maqueen.motorStop(maqueen.Motors.All);"],[0,"\n   "]],"start1":1133,"start2":1133,"length1":656,"length2":47}]}]},{"timestamp":1739226697009,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"// PID Controller Constants\nlet Kp = 0.8;  // Proportional gain\nlet Ki = 0.0;  // Integral gain\nlet Kd = 0.4;  // Derivative gain\n\n// PID Variables\nlet lastError = 0;\nlet integral = 0;\n\n// Motor Speed Settings\nlet baseSpeed = 60;  // Base speed for straight sections\nlet maxSpeed = 80;   // Maximum speed\nlet minSpeed = 40;   // Minimum speed for curves\n\n// Obstacle Detection Threshold (in cm)\nlet obstacleThreshold = 10;  // Stop if an obstacle is within 10 cm\n\n// Last T"],[1,"let lastTurn = \"none\";  // Track the last t"],[0,"urn "],[-1,"D"],[1,"d"],[0,"irec"]],"start1":0,"start2":0,"length1":482,"length2":52},{"diffs":[[0,"ion\n"],[-1,"let lastTurn = \"none\";\n\n// Main Loop"],[0,"\nbas"]],"start1":53,"start2":53,"length1":44,"length2":8},{"diffs":[[0,") {\n"],[-1,"    // Read sensor values\n"],[0,"    "]],"start1":82,"start2":82,"length1":34,"length2":8},{"diffs":[[0," // "],[-1,"Read ultrasonic sensor for obst"],[1,"Both sensors on the surf"],[0,"ac"],[-1,"l"],[0,"e "],[-1,"detection\n    let distance = maqueen.ultrasonic(PingUnit.Centimeters);\n\n    // Obstacle Avoidance\n    if (distance < obstacleThreshold && distance > 0) {\n        // Stop the robot if an obstacle is detected"],[1,"(white) - move forward\n    if (leftSensor == 1 && rightSensor == 1) {\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50);\n    }\n    // Left sensor on the line (black), right sensor on the surface (white) - turn left\n    else if (leftSensor == 0 && rightSensor == 1) {"],[0,"\n   "]],"start1":228,"start2":228,"length1":250,"length2":317},{"diffs":[[0,"otor"],[-1,"Stop"],[1,"Run"],[0,"(maq"]],"start1":559,"start2":559,"length1":12,"length2":11},{"diffs":[[0,"ors."],[-1,"All);\n        basic.pause(500);  // Wait for 0.5 seconds\n        return;  // Skip the rest of the loop"],[1,"M1, maqueen.Dir.CCW, 5);\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40);\n        lastTurn = \"left\";  // Update last turn direction"],[0,"\n    }\n"],[-1,"\n"],[0,"    // "],[-1,"Line Following Logic\n   "],[1,"Right sensor on the line (black),"],[0," le"],[1,"f"],[0,"t "],[-1,"error = 0;\n\n   "],[1,"sensor on the surface (white) - turn right\n    else"],[0," if "]],"start1":578,"start2":578,"length1":169,"length2":259},{"diffs":[[0," (leftSensor == "],[-1,"0"],[1,"1"],[0," && rightSensor "]],"start1":836,"start2":836,"length1":33,"length2":33},{"diffs":[[0," rightSensor == "],[-1,"1"],[1,"0"],[0,") {\n        erro"]],"start1":856,"start2":856,"length1":33,"length2":33},{"diffs":[[0,"    "],[-1,"error = -1;  // Line is to the left"],[1,"maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 40);\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, 5);"],[0,"\n   "]],"start1":881,"start2":881,"length1":43,"length2":129},{"diffs":[[0," = \""],[-1,"lef"],[1,"righ"],[0,"t\";"],[-1,"\n"],[0,"  "],[-1,"  } else if (leftSensor == 1 && rightSensor == 0) {\n        error = 1;   // Line is to the right\n        lastTurn = \"right\";"],[1,"// Update last turn direction\n    }\n    // Both sensors on the line (black) - move forward"],[0,"\n   "],[-1," }"],[0," els"]],"start1":1023,"start2":1023,"length1":147,"length2":111},{"diffs":[[0,"    "],[-1,"error = 0;   // Line is centered\n    } else {"],[1,"maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50);"],[0,"\n    "],[1,"}\n"],[0,"    "]],"start1":1183,"start2":1183,"length1":58,"length2":72},{"diffs":[[0,"    "],[-1,"    if (lastTurn == \"left\") {\n            error = -1;\n        } else"],[1,"else {\n       "],[0," if "]],"start1":1323,"start2":1323,"length1":76,"length2":22},{"diffs":[[0,"urn == \""],[-1,"righ"],[1,"lef"],[0,"t\") {\n  "]],"start1":1351,"start2":1351,"length1":20,"length2":19},{"diffs":[[0,"    "],[-1,"error = 1;\n        } else {\n            error = 0;\n        }\n    }\n\n    // PID Calculations\n    integral += error;\n    let derivative = error - lastError;\n    let correction = Kp * error + Ki * integral + Kd * derivative;\n\n    // Adjust Motor Speeds\n    let leftMotorSpeed = baseSpeed - correction;\n    let rightMotorSpeed = baseSpeed + correction;\n\n    // Constrain Motor Speeds\n    leftMotorSpeed = Math.constrain(leftMotorSpeed, minSpeed, maxSpeed);\n    rightMotorSpeed = Math.constrain(rightMotorSpeed, minSpeed, maxSpeed);\n\n    // Set Motor Speeds\n"],[1,"maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, 5);\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40);\n        } else if (lastTurn == \"right\") {\n        "],[0,"    "]],"start1":1376,"start2":1376,"length1":561,"length2":184},{"diffs":[[0,"CW, "],[-1,"leftMotorSpeed);\n"],[1,"40);\n        "],[0,"    "]],"start1":1608,"start2":1608,"length1":25,"length2":21},{"diffs":[[0,"Dir."],[1,"C"],[0,"CW, "],[-1,"rightMotorSpeed);\n\n    // Update Last Error\n    lastError = error;\n\n    // Small Delay for Stability\n    basic.pause(10);"],[1,"5);\n        } else {\n            // If no last turn, stop or move forward\n            maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50);\n        }\n    }"],[0,"\n});"]],"start1":1673,"start2":1673,"length1":133,"length2":172}]}]},{"timestamp":1739264042113,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"maqueen."],[-1,"U"],[1,"u"],[0,"ltrasoni"]],"start1":789,"start2":789,"length1":17,"length2":17}]}]},{"timestamp":1739264093045,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[1,"// PID Controller Constants\n"],[0,"let Kp = 0.8"]],"start1":0,"start2":0,"length1":12,"length2":40},{"diffs":[[0,"e gain\n\n"],[1,"// PID Variables\n"],[0,"let last"]],"start1":123,"start2":123,"length1":16,"length2":33},{"diffs":[[0,"tion () "],[-1,"\n"],[0,"{\n    //"]],"start1":542,"start2":542,"length1":17,"length2":16},{"diffs":[[0,"nic("],[-1,");\n\n    if (distance > 0 && distance < 10) \n    {\n        maqueen.motorStop(maqueen.Motors.All);\n    }"],[1,"PingUnit.Centimeters);"],[0,"\n\n  "]],"start1":804,"start2":804,"length1":110,"length2":30},{"diffs":[[0,"stance > 0) "],[-1,"\n    "],[0,"{\n        //"]],"start1":900,"start2":900,"length1":29,"length2":24},{"diffs":[[0,"r == 1) "],[-1,"\n    "],[0,"{\n      "]],"start1":1203,"start2":1203,"length1":21,"length2":16},{"diffs":[[0,"= \"left\";\n    } "],[-1,"\n    "],[0,"else if (leftSen"]],"start1":1274,"start2":1274,"length1":37,"length2":32},{"diffs":[[0,"ghtSensor == 0) "],[-1,"\n    "],[0,"{\n        error "]],"start1":1320,"start2":1320,"length1":37,"length2":32},{"diffs":[[0,"ght\";\n    } "],[-1,"\n    "],[0,"else if (lef"]],"start1":1405,"start2":1405,"length1":29,"length2":24},{"diffs":[[0,"r == 0) "],[-1,"\n    "],[0,"{\n      "]],"start1":1455,"start2":1455,"length1":21,"length2":16},{"diffs":[[0,"  } "],[-1,"\n    else \n   "],[1,"else"],[0," {\n "]],"start1":1508,"start2":1508,"length1":22,"length2":12}]}]},{"timestamp":1739264299743,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"// PID Controller Constants\n"],[0,"let "]],"start1":0,"start2":0,"length1":32,"length2":4},{"diffs":[[0,"p = "],[-1,"1.0"],[1,"0.8"],[0,";  /"]],"start1":5,"start2":5,"length1":11,"length2":11},{"diffs":[[0,"gain"],[-1," (increased for faster response)"],[0,"\nlet"]],"start1":31,"start2":31,"length1":40,"length2":8},{"diffs":[[0,"gain"],[-1," (set to 0 for simplicity)"],[0,"\nlet"]],"start1":63,"start2":63,"length1":34,"length2":8},{"diffs":[[0," Kd = 0."],[-1,"5"],[1,"4"],[0,";  // De"]],"start1":71,"start2":71,"length1":17,"length2":17},{"diffs":[[0,"gain"],[-1," (increased for smoother corrections)\n\n// PID Variables"],[1,"\n"],[0,"\nlet"]],"start1":97,"start2":97,"length1":63,"length2":9},{"diffs":[[0,"Speed = "],[-1,"8"],[1,"6"],[0,"0;  // B"]],"start1":173,"start2":173,"length1":17,"length2":17},{"diffs":[[0,"ions"],[-1," (increased for racing)"],[0,"\nlet"]],"start1":217,"start2":217,"length1":31,"length2":8},{"diffs":[[0,"d = "],[-1,"10"],[1,"8"],[0,"0;"],[1," "],[0,"  //"]],"start1":233,"start2":233,"length1":12,"length2":12},{"diffs":[[0,"d = "],[-1,"5"],[1,"4"],[0,"0;  "]],"start1":271,"start2":271,"length1":9,"length2":9},{"diffs":[[0,"tion () "],[1,"\n"],[0,"{\n    //"]],"start1":497,"start2":497,"length1":16,"length2":17},{"diffs":[[0,"maqueen."],[-1,"u"],[1,"U"],[0,"ltrasoni"]],"start1":745,"start2":745,"length1":17,"length2":17},{"diffs":[[0,"nic("],[-1,"PingUnit.Centimeters);"],[1,");\n\n    if (distance > 0 && distance < 10) \n    {\n        maqueen.motorStop(maqueen.Motors.All);\n    }"],[0,"\n\n  "]],"start1":760,"start2":760,"length1":30,"length2":110},{"diffs":[[0,"stance > 0) "],[1,"\n    "],[0,"{\n        //"]],"start1":936,"start2":936,"length1":24,"length2":29},{"diffs":[[0,"c.pause("],[-1,"2"],[1,"5"],[0,"00);  //"]],"start1":1067,"start2":1067,"length1":17,"length2":17},{"diffs":[[0,"t for 0."],[-1,"2"],[1,"5"],[0," seconds"]],"start1":1088,"start2":1088,"length1":17,"length2":17},{"diffs":[[0,"r == 1) "],[1,"\n    "],[0,"{\n      "]],"start1":1244,"start2":1244,"length1":16,"length2":21},{"diffs":[[0,"= \"left\";\n    } "],[1,"\n    "],[0,"else if (leftSen"]],"start1":1320,"start2":1320,"length1":32,"length2":37},{"diffs":[[0,"ghtSensor == 0) "],[1,"\n    "],[0,"{\n        error "]],"start1":1371,"start2":1371,"length1":32,"length2":37},{"diffs":[[0,"ght\";\n    } "],[1,"\n    "],[0,"else if (lef"]],"start1":1461,"start2":1461,"length1":24,"length2":29},{"diffs":[[0,"r == 0) "],[1,"\n    "],[0,"{\n      "]],"start1":1516,"start2":1516,"length1":16,"length2":21},{"diffs":[[0,"tered\n    } "],[-1,"else"],[1,"\n    else \n   "],[0," {\n        /"]],"start1":1566,"start2":1566,"length1":28,"length2":38},{"diffs":[[0,"se(1"],[1,"0"],[0,");"],[-1,"  // Reduced delay for faster response"],[0,"\n});"]],"start1":2579,"start2":2579,"length1":48,"length2":11}]}]},{"timestamp":1739268212932,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"maqueen."],[1,"u"],[0,"ltrasoni"]],"start1":907,"start2":907,"length1":16,"length2":17}]}]},{"timestamp":1739268223844,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"id=\""],[-1,"(ZN1Q`aS3C-)f?9`XV!u\">distance</variable><variable id=\"a65MjB!xb#/-)Zi0VQ}h\">obstacleThreshold</variable><variable id=\":|#WEP#*UhNmnU-?%,Hf\">leftSensor</variable><variable id=\"8//tRyfF*BLo^lHx@u@S\">rightSensor</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"a65MjB!xb#/-)Zi0VQ}h\">obstacleThreshold</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if an obstacle is within 10 cm</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"417\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if an obstacle is within 10 cm</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"(ZN1Q`aS3C-)f?9`XV!u\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read ultrasonic sensor for obstacle detection</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Obstacle Avoidance</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(ZN1Q`aS3C-)f?9`XV!u\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"a65MjB!xb#/-)Zi0VQ}h\">obstacleThreshold</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(ZN1Q`aS3C-)f?9`XV!u\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop the robot if an obstacle is detected</comment><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Wait for 0.2 seconds</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"return;\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Skip the rest of the loop</comment></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\":|#WEP#*UhNmnU-?%,Hf\">leftSensor</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read sensor values</comment"],[1,"1D4h$JA[@)]aJ7:GB%RR\">IR_L</variable><variable id=\"`D%tAAc*Aqab*YyQ`4TQ\">IR_R</variable><variable id=\"ZUr}lO#I7g!S4x$P/R{t\">distance</variable></variables><block type=\"device_forever\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"1D4h$JA[@)]aJ7:GB%RR\">IR_L</field"],[0,"><va"]],"start1":76,"start2":76,"length1":3088,"length2":315},{"diffs":[[0,"id=\""],[-1,"8//tRyfF*BLo^lHx@u@S\">rightSensor"],[1,"`D%tAAc*Aqab*YyQ`4TQ\">IR_R"],[0,"</fi"]],"start1":619,"start2":619,"length1":41,"length2":34},{"diffs":[[0,"pe=\""],[-1,"controls_if\"><mutation elseif=\"3\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors on the surface (white) - move forward\nLeft sensor on the line (black), right sensor on the surface (white) - turn left\nRight sensor on the line (black), left sensor on the surface (white) - turn right\nBoth sensors on the line (black) - stop or move forward (optional)\nAlternatively, you can stop the robot:\nmaqueen.motorStop(maqueen.Motors.All);</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\":|#WEP#*UhNmnU-?%,Hf\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8//tRyfF*BLo^lHx@u@S\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Increased speed to 50</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\":|#WEP#*UhNmnU-?%,Hf\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8//tRyfF*BLo^lHx@u@S\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Reduced CCW speed to 5</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">5</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value></block></next></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\":|#WEP#*UhNmnU-?%,Hf\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8//tRyfF*BLo^lHx@u@S\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO2\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Reduced CCW speed to 5</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">5</field></shadow></value></block></next></block></statement><value name=\"IF3\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\":|#WEP#*UhNmnU-?%,Hf\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8//tRyfF*BLo^lHx@u@S\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO3\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement></block></next"],[1,"variables_set\"><field name=\"VAR\" id=\"ZUr}lO#I7g!S4x$P/R{t\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read ultrasonic sensor once</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\""],[0,"></b"]],"start1":852,"start2":852,"length1":6691,"length2":321}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"let obstacleThreshold = 1"],[1,"// PID Controller Constants\nlet Kp = 1.0;  // Proportional gain (increased for faster response)\nlet Ki = 0."],[0,"0;  // "],[-1,"Stop if an obstacle is within 10 cm"],[1,"Integral gain (set to 0 for simplicity)\nlet Kd = 0.5;  // Derivative gain (increased for smoother corrections)\n\n// PID Variables\nlet lastError = 0;\nlet integral = 0;"],[0,"\n\n//"]],"start1":0,"start2":0,"length1":71,"length2":283},{"diffs":[[0,"d = "],[-1,"6"],[1,"8"],[0,"0;  "]],"start1":317,"start2":317,"length1":9,"length2":9},{"diffs":[[0,"ions"],[1," (increased for racing)"],[0,"\nlet "],[-1,"turn"],[1,"max"],[0,"Speed = "],[-1,"3"],[1,"10"],[0,"0;  // "],[-1,"Speed for turning\nlet recovery"],[1,"Maximum speed\nlet min"],[0,"Speed = "],[-1,"2"],[1,"5"],[0,"0;"],[1," "],[0,"  // "],[-1,"Speed for recovery when line is lost"],[1,"Minimum speed for curves\n\n// Obstacle Detection Threshold (in cm)\nlet obstacleThreshold = 10;  // Stop if an obstacle is within 10 cm"],[0,"\n\n//"]],"start1":357,"start2":357,"length1":115,"length2":227},{"diffs":[[0,"none\";\n\n"],[1,"// Main Loop\n"],[0,"basic.fo"]],"start1":621,"start2":621,"length1":16,"length2":29},{"diffs":[[0,"nction () {\n"],[1,"    // Read sensor values\n    let leftSensor = maqueen.readPatrol(maqueen.Patrol.PatrolLeft);\n    let rightSensor = maqueen.readPatrol(maqueen.Patrol.PatrolRight);\n\n"],[0,"    // Read "]],"start1":658,"start2":658,"length1":24,"length2":189},{"diffs":[[0,"maqueen."],[-1,"U"],[0,"ltrasoni"]],"start1":907,"start2":907,"length1":17,"length2":16},{"diffs":[[0,"rasonic("],[1,"PingUnit.Centimeters"],[0,");\n\n    "]],"start1":917,"start2":917,"length1":16,"length2":36},{"diffs":[[0," // "],[-1,"Read sensor values\n    let leftSensor = maqueen.readPatrol(maqueen.Patrol.PatrolLeft);\n    let rightSensor = maqueen.readPatrol(maqueen.Patrol.PatrolRight);\n\n    // Both sensors on the surface (white) - move forward\n   "],[1,"Line Following Logic\n    let error = 0;\n\n    if (leftSensor == 0 && rightSensor == 1) {\n        error = -1;  // Line is to the left\n        lastTurn = \"left\";\n    } else"],[0," if "]],"start1":1238,"start2":1238,"length1":227,"length2":177},{"diffs":[[0," rightSensor == "],[-1,"1"],[1,"0"],[0,") {\n        maqu"]],"start1":1434,"start2":1434,"length1":33,"length2":33},{"diffs":[[0,"    "],[-1,"maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, baseSpeed);\n    }\n    // Left sensor on the line (black), right sensor on the surface (white) - turn left"],[1,"error = 1;   // Line is to the right\n        lastTurn = \"right\";"],[0,"\n   "],[1," }"],[0," els"]],"start1":1459,"start2":1459,"length1":170,"length2":78},{"diffs":[[0," rightSensor == "],[-1,"1"],[1,"0"],[0,") {\n        maqu"]],"start1":1561,"start2":1561,"length1":33,"length2":33},{"diffs":[[0,"    "],[-1,"maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, turnSpeed);  // Sharp left turn\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, baseSpeed);"],[1,"error = 0;   // Line is centered\n    } else {\n        // Both sensors on the surface (white) - recover based on last turn"],[0,"\n   "]],"start1":1586,"start2":1586,"length1":164,"length2":129},{"diffs":[[0,"st turn\n        "],[1,"if ("],[0,"lastTurn = \"left"]],"start1":1704,"start2":1704,"length1":32,"length2":36},{"diffs":[[0,"rn ="],[1,"="],[0," \"left\""],[-1,";  // Update last turn direction\n"],[1,") {\n     "],[0,"    "],[-1,"}\n"],[0,"   "],[-1," // Right sensor on the line (black), left sensor on the surface (white) - turn "],[1,"error = -1;\n        } else if (lastTurn == \""],[0,"right"],[1,"\") {"],[0,"\n    "],[-1,"else if (leftSensor == 1 && rightSensor == 0) {\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, baseSpeed);\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, turnSpeed);  // Sharp right turn\n        lastTurn = \"right\";  // Update last turn direction\n    }\n    // Both sensors on the line (black) - move forward\n    else if (leftSensor == 0 && rightSensor == 0) {\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, baseSpeed);\n    }\n    // Both sensors on the surface (white) - recover based on last turn\n    else {\n        if (lastTurn == \"left\") {\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, recoverySpeed);  // Recover left\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, base"],[1,"        error = 1;\n        } else {\n            error = 0;\n        }\n    }\n\n    // PID Calculations\n    integral += error;\n    let derivative = error - lastError;\n    let correction = Kp * error + Ki * integral + Kd * derivative;\n\n    // Adjust Motor Speeds\n    let leftMotorSpeed = baseSpeed - correction;\n    let rightMotorSpeed = baseSpeed + correction;\n\n    // Constrain Motor Speeds\n    leftMotorSpeed = Math.constrain(leftMotorSpeed, minSpeed, maxSpeed);\n    rightMotorSpeed = Math.constrain(rightMotorSpeed, minSpeed, max"],[0,"Speed);\n"],[1,"\n"],[0,"    "],[-1,"    } else if (lastTurn == \"right\") {\n        "],[1,"// Set Motor Speeds\n"],[0,"    "]],"start1":1730,"start2":1730,"length1":953,"length2":651},{"diffs":[[0,"Dir.CW, "],[-1,"base"],[1,"leftMotor"],[0,"Speed);\n"],[-1,"        "],[0,"    maqu"]],"start1":2425,"start2":2425,"length1":36,"length2":33},{"diffs":[[0,"Dir."],[-1,"C"],[0,"CW, r"],[-1,"ecoverySpeed);  // Recover right\n        } else {\n            // If no last turn, stop or move forward\n            maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, baseSpeed);\n        }\n    }"],[1,"ightMotorSpeed);\n\n    // Update Last Error\n    lastError = error;"],[0,"\n\n  "]],"start1":2498,"start2":2498,"length1":209,"length2":78},{"diffs":[[0," // "],[-1,"Minimal"],[1,"Reduced"],[0," del"]],"start1":2627,"start2":2627,"length1":15,"length2":15}]}]},{"timestamp":1739268742841,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ble id=\""],[-1,".%ZbvJX`5+s[8YuH,i84"],[1,"(ZN1Q`aS3C-)f?9`XV!u"],[0,"\">distan"]],"start1":72,"start2":72,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"05nb3F9~XY[V_zu]dh/o"],[1,"a65MjB!xb#/-)Zi0VQ}h"],[0,"\">obstac"]],"start1":127,"start2":127,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"Sd)q2uf,F2?F#l+AV{?r"],[1,":|#WEP#*UhNmnU-?%,Hf"],[0,"\">leftSe"]],"start1":191,"start2":191,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"*_w6]M2#{|b8wi%m:.V7"],[1,"8//tRyfF*BLo^lHx@u@S"],[0,"\">rightS"]],"start1":248,"start2":248,"length1":36,"length2":36},{"diffs":[[0,"le><"],[1,"/"],[0,"variable"],[-1," id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</variable><variable id=\"JB!L)eI@lbC-?ml):ez]\">turnSpeed</variable><variable id=\"G?SI}91J^G0E$CEUH1]w\">lastTurn</variable><variable id=\"NRy1Rouj/]4.4Pw@y+W:\">recoverySpeed</variable></variables"],[1,"s><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"a65MjB!xb#/-)Zi0VQ}h\">obstacleThreshold</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if an obstacle is within 10 cm</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></statement></block"],[0,"><bl"]],"start1":297,"start2":297,"length1":245,"length2":386},{"diffs":[[0,"=\"41"],[-1,"1"],[1,"7"],[0,"\" y=\""],[-1,"-"],[0,"2"],[1,"0"],[0,"\"><"],[-1,"statement name=\"HANDLER\"><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . . . . \n        . # . # . \n        . . # . . \n        . # # # . \n        . # . # .\n        `</field><next"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Stop if an obstacle is within 10 cm</comment><statement name=\"HANDLER\""],[0,"><bl"]],"start1":710,"start2":710,"length1":212,"length2":127},{"diffs":[[0,"AR\" id=\""],[-1,".%ZbvJX`5+s[8YuH,i84"],[1,"(ZN1Q`aS3C-)f?9`XV!u"],[0,"\">distan"]],"start1":876,"start2":876,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,".%ZbvJX`5+s[8YuH,i84"],[1,"(ZN1Q`aS3C-)f?9`XV!u"],[0,"\">distan"]],"start1":1652,"start2":1652,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"05nb3F9~XY[V_zu]dh/o"],[1,"a65MjB!xb#/-)Zi0VQ}h"],[0,"\">obstac"]],"start1":1835,"start2":1835,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,".%ZbvJX`5+s[8YuH,i84"],[1,"(ZN1Q`aS3C-)f?9`XV!u"],[0,"\">di"]],"start1":2187,"start2":2187,"length1":28,"length2":28},{"diffs":[[0,"AR\" id=\""],[-1,"Sd)q2uf,F2?F#l+AV{?r"],[1,":|#WEP#*UhNmnU-?%,Hf"],[0,"\">leftSe"]],"start1":3046,"start2":3046,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"*_w6]M2#{|b8wi%m:.V7"],[1,"8//tRyfF*BLo^lHx@u@S"],[0,"\">rightS"]],"start1":3388,"start2":3388,"length1":36,"length2":36},{"diffs":[[0,"seif=\"3\""],[-1," else=\"1\""],[0,"></mutat"]],"start1":3661,"start2":3661,"length1":25,"length2":16},{"diffs":[[0,"black) -"],[1," stop or"],[0," move fo"]],"start1":3960,"start2":3960,"length1":16,"length2":24},{"diffs":[[0,"ward"],[-1,"\nBoth sensors on the surface (white) - recover based on last turn"],[1," (optional)\nAlternatively, you can stop the robot:\nmaqueen.motorStop(maqueen.Motors.All);"],[0,"</co"]],"start1":3985,"start2":3985,"length1":73,"length2":97},{"diffs":[[0,"AR\" id=\""],[-1,"Sd)q2uf,F2?F#l+AV{?r"],[1,":|#WEP#*UhNmnU-?%,Hf"],[0,"\">leftSe"]],"start1":4494,"start2":4494,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"*_w6]M2#{|b8wi%m:.V7"],[1,"8//tRyfF*BLo^lHx@u@S"],[0,"\">rightS"]],"start1":4922,"start2":4922,"length1":36,"length2":36},{"diffs":[[0,".Dir.CW</field><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Increased speed to 50</comment><"],[0,"value name=\"spee"]],"start1":5228,"start2":5228,"length1":32,"length2":102},{"diffs":[[0,"d name=\"SLIDER\">"],[1,"5"],[0,"0</field></shado"]],"start1":5425,"start2":5425,"length1":32,"length2":33},{"diffs":[[0,"ow><"],[-1,"block type=\"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block><"],[0,"/val"]],"start1":5457,"start2":5457,"length1":105,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"Sd)q2uf,F2?F#l+AV{?r"],[1,":|#WEP#*UhNmnU-?%,Hf"],[0,"\">leftSe"]],"start1":5894,"start2":5894,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"*_w6]M2#{|b8wi%m:.V7"],[1,"8//tRyfF*BLo^lHx@u@S"],[0,"\">rightS"]],"start1":6322,"start2":6322,"length1":36,"length2":36},{"diffs":[[0,"60\">"],[-1,"Sharp left turn"],[1,"Reduced CCW speed to 5"],[0,"</co"]],"start1":6678,"start2":6678,"length1":23,"length2":30},{"diffs":[[0,"d name=\"SLIDER\">"],[-1,"0"],[1,"5"],[0,"</field></shadow"]],"start1":6826,"start2":6826,"length1":33,"length2":33},{"diffs":[[0,"ow><"],[-1,"block type=\"variables_get\"><field name=\"VAR\" id=\"JB!L)eI@lbC-?ml):ez]\">turnSpeed</field></block><"],[0,"/val"]],"start1":6857,"start2":6857,"length1":105,"length2":8},{"diffs":[[0,"ER\">"],[-1,"0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"G?SI}91J^G0E$CEUH1]w\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Update last turn direction</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">left</field></block></value></block></next"],[1,"40</field></shadow></value"],[0,"></b"]],"start1":7158,"start2":7158,"length1":463,"length2":34},{"diffs":[[0,"AR\" id=\""],[-1,"Sd)q2uf,F2?F#l+AV{?r"],[1,":|#WEP#*UhNmnU-?%,Hf"],[0,"\">leftSe"]],"start1":7630,"start2":7630,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"*_w6]M2#{|b8wi%m:.V7"],[1,"8//tRyfF*BLo^lHx@u@S"],[0,"\">rightS"]],"start1":8058,"start2":8058,"length1":36,"length2":36},{"diffs":[[0,"d name=\"SLIDER\">"],[1,"4"],[0,"0</field></shado"]],"start1":8490,"start2":8490,"length1":32,"length2":33},{"diffs":[[0,"ow><"],[-1,"block type=\"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block><"],[0,"/val"]],"start1":8522,"start2":8522,"length1":105,"length2":8},{"diffs":[[0,"60\">"],[-1,"Sharp right turn"],[1,"Reduced CCW speed to 5"],[0,"</co"]],"start1":8689,"start2":8689,"length1":24,"length2":30},{"diffs":[[0,"d name=\"SLIDER\">"],[-1,"0"],[1,"5"],[0,"</field></shadow"]],"start1":8837,"start2":8837,"length1":33,"length2":33},{"diffs":[[0,"ow><"],[-1,"block type=\"variables_get\"><field name=\"VAR\" id=\"JB!L)eI@lbC-?ml):ez]\">turnSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"G?SI}91J^G0E$CEUH1]w\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Update last turn direction</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">right</field></block></value></block></next"],[1,"/value"],[0,"></b"]],"start1":8868,"start2":8868,"length1":445,"length2":14},{"diffs":[[0,"id=\""],[-1,"Sd)q2uf,F2?F#l+AV{?r"],[1,":|#WEP#*UhNmnU-?%,Hf"],[0,"\">le"]],"start1":9324,"start2":9324,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"*_w6]M2#{|b8wi%m:.V7\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO3\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"G?SI}91J^G0E$CEUH1]w\">lastTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">left</field></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Recover left</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"NRy1Rouj/]4.4Pw@y+W:\">recoverySpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"G?SI}91J^G0E$CEUH1]w\">lastTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">right</field"],[1,"8//tRyfF*BLo^lHx@u@S\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value"],[0,"></b"]],"start1":9752,"start2":9752,"length1":2527,"length2":151},{"diffs":[[0,"atement name=\"DO"],[-1,"1"],[1,"3"],[0,"\"><block type=\"m"]],"start1":9935,"start2":9935,"length1":33,"length2":33},{"diffs":[[0,"ors."],[-1,"M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2"],[1,"All"],[0,"</fi"]],"start1":10014,"start2":10014,"length1":381,"length2":11},{"diffs":[[0,"ir\">maqueen.Dir."],[-1,"C"],[0,"CW</field><comme"]],"start1":10043,"start2":10043,"length1":33,"length2":32},{"diffs":[[0,"60\">"],[-1,"Recover right</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"NRy1Rouj/]4.4Pw@y+W:\">recoverySpeed</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">If no last turn, stop or move forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value></block></statement></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Small Delay for Stability\nMinimal delay for faster response</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"36\" y=\"38\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"05nb3F9~XY[V_zu]dh/o\">obstacleThreshold</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if an obstacle is within 10 cm</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Motor Speed Settings\nBase speed for straight sections</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">60</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"JB!L)eI@lbC-?ml):ez]\">turnSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for turning</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"NRy1Rouj/]4.4Pw@y+W:\">recoverySpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for recovery when line is lost</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"G?SI}91J^G0E$CEUH1]w\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Last Turn Direction</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">none</field></block></value"],[1,"Move forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement"],[0,"></b"]],"start1":10104,"start2":10104,"length1":2652,"length2":204}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"let "],[-1,"rightSensor = 0\nlet leftSensor = 0\nlet distance = 0\n"],[1,"obstacleThreshold = 10;  "],[0,"// S"]],"start1":0,"start2":0,"length1":60,"length2":33},{"diffs":[[0," cm\n"],[-1,"let obstacleThreshold = 10"],[0,"\n// "]],"start1":64,"start2":64,"length1":34,"length2":8},{"diffs":[[0,"ettings\n"],[1,"let baseSpeed = 60;  "],[0,"// Base "]],"start1":85,"start2":85,"length1":16,"length2":37},{"diffs":[[0,"let "],[-1,"base"],[1,"turn"],[0,"Speed = "],[-1,"60\n"],[1,"30;  "],[0,"// S"]],"start1":150,"start2":150,"length1":23,"length2":25},{"diffs":[[0,"let "],[-1,"turn"],[1,"recovery"],[0,"Speed = "],[-1,"30\n"],[1,"20;  "],[0,"// S"]],"start1":192,"start2":192,"length1":23,"length2":29},{"diffs":[[0,"is lost\n"],[-1,"let recoverySpeed = 20"],[0,"\n// Last"]],"start1":249,"start2":249,"length1":38,"length2":16},{"diffs":[[0,"= \"none\""],[1,";\n"],[0,"\nbasic.f"]],"start1":294,"start2":294,"length1":16,"length2":18},{"diffs":[[0,") {\n"],[-1,"    basic.showLeds(`\n        . . . . .\n        . # . # .\n        . . # . .\n        . # # # .\n        . # . # .\n        `)\n"],[0,"    "]],"start1":329,"start2":329,"length1":130,"length2":8},{"diffs":[[0,"ion\n    "],[1,"let "],[0,"distance"]],"start1":382,"start2":382,"length1":16,"length2":20},{"diffs":[[0,"asonic()"],[1,";\n"],[0,"\n    // "]],"start1":417,"start2":417,"length1":16,"length2":18},{"diffs":[[0,"ors.All)"],[1,";"],[0,"\n      "],[1,"  basic.pause(200);"],[0,"  // Wai"]],"start1":600,"start2":600,"length1":23,"length2":43},{"diffs":[[0,"    "],[-1,"basic.pause(200)\n      "],[1,"return;"],[0,"  //"]],"start1":665,"start2":665,"length1":31,"length2":15},{"diffs":[[0,"oop\n"],[-1,"        return;\n"],[0,"    }\n"],[1,"\n"],[0,"    "]],"start1":703,"start2":703,"length1":30,"length2":15},{"diffs":[[0,"ues\n    "],[1,"let "],[0,"leftSens"]],"start1":736,"start2":736,"length1":16,"length2":20},{"diffs":[[0,"rolLeft)"],[1,";"],[0,"\n    "],[1,"let "],[0,"rightSen"]],"start1":798,"start2":798,"length1":21,"length2":26},{"diffs":[[0,"olRight)"],[1,";\n"],[0,"\n    // "]],"start1":868,"start2":868,"length1":16,"length2":18},{"diffs":[[0,"    "],[-1,"// Left s"],[1,"if (leftS"],[0,"ensor "],[-1,"on the line (black),"],[1,"== 1 &&"],[0," right"],[-1," s"],[1,"S"],[0,"ensor "],[-1,"on the surface (white) - turn left\n    // Right sensor on the line (black), left sensor on the surface (white) - turn right"],[1,"== 1) {\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, baseSpeed);\n    }"],[0,"\n    // "],[-1,"Both"],[1,"Left"],[0," sensor"],[-1,"s"],[0," on "]],"start1":937,"start2":937,"length1":200,"length2":148},{"diffs":[[0,"ack)"],[-1," - move forward\n    // Both"],[1,", right"],[0," sensor"],[-1,"s"],[0," on "]],"start1":1097,"start2":1097,"length1":43,"length2":22},{"diffs":[[0,") - "],[-1,"recover based on last turn\n   "],[1,"turn left\n    else"],[0," if "]],"start1":1137,"start2":1137,"length1":38,"length2":26},{"diffs":[[0," (leftSensor == "],[-1,"1"],[1,"0"],[0," && rightSensor "]],"start1":1162,"start2":1162,"length1":33,"length2":33},{"diffs":[[0,"(maqueen.Motors."],[-1,"All"],[1,"M1"],[0,", maqueen.Dir.CW"]],"start1":1227,"start2":1227,"length1":35,"length2":34},{"diffs":[[0,"Dir."],[1,"C"],[0,"CW, "],[-1,"base"],[1,"turn"],[0,"Speed)"],[-1,"\n    } else if (leftSensor == 0 && rightSensor == 1) {\n      "],[1,";"],[0,"  //"]],"start1":1255,"start2":1255,"length1":83,"length2":24},{"diffs":[[0,"maqueen.Motors.M"],[-1,"1"],[1,"2"],[0,", maqueen.Dir.CC"]],"start1":1321,"start2":1321,"length1":33,"length2":33},{"diffs":[[0,"maqueen.Dir."],[-1,"C"],[0,"CW, "],[-1,"turn"],[1,"base"],[0,"Speed)"],[1,";"],[0,"\n        maq"]],"start1":1340,"start2":1340,"length1":39,"length2":39},{"diffs":[[0,"    "],[-1,"maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, baseSpeed)\n      "],[1,"lastTurn = \"left\";"],[0,"  //"]],"start1":1372,"start2":1372,"length1":77,"length2":26},{"diffs":[[0,"    "],[1,"}\n"],[0,"    "],[-1,"lastTurn = \"left\"\n    }"],[1,"// Right sensor on the line (black), left sensor on the surface (white) - turn right\n   "],[0," els"]],"start1":1426,"start2":1426,"length1":35,"length2":102},{"diffs":[[0,"eed)"],[-1,"\n        // Sharp right turn"],[1,";"],[0,"\n   "]],"start1":1639,"start2":1639,"length1":36,"length2":9},{"diffs":[[0,"rnSpeed)"],[-1,"\n      "],[1,";  // Sharp right turn\n        lastTurn = \"right\";"],[0,"  // Upd"]],"start1":1708,"start2":1708,"length1":23,"length2":66},{"diffs":[[0,"    "],[1,"}\n"],[0,"    "],[-1,"lastTurn = \"right\"\n "],[1,"// Both sensors on the line (black) - move forward\n"],[0,"   "],[-1,"}"],[0," els"]],"start1":1798,"start2":1798,"length1":36,"length2":68},{"diffs":[[0,"seSpeed)"],[1,";"],[0,"\n    }"],[1,"\n    // Both sensors on the surface (white) - recover based on last turn\n   "],[0," else {\n"]],"start1":1974,"start2":1974,"length1":22,"length2":99},{"diffs":[[0,") {\n"],[-1,"            // Recover left\n"],[0,"    "]],"start1":2103,"start2":2103,"length1":36,"length2":8},{"diffs":[[0,", recoverySpeed)"],[1,";  // Recover left"],[0,"\n            maq"]],"start1":2170,"start2":2170,"length1":32,"length2":50},{"diffs":[[0,"r.CW, baseSpeed)"],[1,";"],[0,"\n        } else "]],"start1":2263,"start2":2263,"length1":32,"length2":33},{"diffs":[[0,"eed)"],[-1,"\n            // Recover right"],[1,";"],[0,"\n   "]],"start1":2393,"start2":2393,"length1":37,"length2":9},{"diffs":[[0,"coverySpeed)"],[1,";  // Recover right"],[0,"\n        } e"]],"start1":2466,"start2":2466,"length1":24,"length2":43},{"diffs":[[0,"seSpeed)"],[1,";"],[0,"\n       "]],"start1":2635,"start2":2635,"length1":16,"length2":17},{"diffs":[[0,"    }\n    }\n"],[1,"\n"],[0,"    // Small"]],"start1":2649,"start2":2649,"length1":24,"length2":25},{"diffs":[[0,"ility\n  "],[1,"  basic.pause(1);"],[0,"  // Min"]],"start1":2689,"start2":2689,"length1":16,"length2":33},{"diffs":[[0,"nse\n"],[-1,"    basic.pause(1)\n"],[0,"})"],[-1,"\n"],[1,";"]],"start1":2749,"start2":2749,"length1":26,"length2":7}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":308,"start2":308,"length1":21,"length2":17}]}]},{"timestamp":1739269300851,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ble id=\""],[-1,"Gl[WHe|#C^oEl9Qt8iHt"],[1,".%ZbvJX`5+s[8YuH,i84"],[0,"\">distan"]],"start1":72,"start2":72,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"pJgp#X[DP{bTYV##,A`*"],[1,"05nb3F9~XY[V_zu]dh/o"],[0,"\">obstac"]],"start1":127,"start2":127,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"4pM4G~l~ZppBdW);@T}O"],[1,"Sd)q2uf,F2?F#l+AV{?r"],[0,"\">leftSe"]],"start1":191,"start2":191,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"vfzR!P^O=k+LXpDyH-23"],[1,"*_w6]M2#{|b8wi%m:.V7"],[0,"\">rightS"]],"start1":248,"start2":248,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"J-XpsoL=QPJ]=i(^8=x)\">error</variable><variable id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</variable><variable id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</variable><variable id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</variable><variable id=\"ZoB({=W0Y]:5;NvUBi:8\">Kp</variable><variable id=\"dtkK;plNvPF+gY0`Kx4m\">turnSpeed</variable><variable id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed"],[1,"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</variable><variable id=\"JB!L)eI@lbC-?ml):ez]\">turnSpeed</variable><variable id=\"G?SI}91J^G0E$CEUH1]w\">lastTurn"],[0,"</va"]],"start1":310,"start2":310,"length1":374,"length2":150},{"diffs":[[0,"ble id=\""],[-1,"n){c^)*:wag#iH-wQTWn"],[1,"NRy1Rouj/]4.4Pw@y+W:"],[0,"\">recove"]],"start1":473,"start2":473,"length1":36,"length2":36},{"diffs":[[0,"pe=\""],[-1,"pxt-on-start"],[1,"device_forever"],[0,"\" x=\"4"],[-1,"0"],[1,"11"],[0,"\" y=\""],[-1,"15"],[1,"-2"],[0,"\"><s"]],"start1":548,"start2":548,"length1":34,"length2":37},{"diffs":[[0,"pe=\""],[-1,"variables_set\"><field name=\"VAR\" id=\"pJgp#X[DP{bTYV##,A`*\">obstacleThreshold</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if an obstacle is within 10 cm</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Motor Speed Settings\nBase speed for straight sections</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">60</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"dtkK;plNvPF+gY0`Kx4m\">turnSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for turning</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"n){c^)*:wag#iH-wQTWn\">recoverySpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for recovery when line is lost</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Last Turn Direction</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">none</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"ZoB({=W0Y]:5;NvUBi:8\">Kp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Proportional Control Gain\nProportional gain for smoother corrections</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0.5</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"388\" y=\"35\"><comment pinned=\"false\" h=\"80\" w=\"160\">Proportional gain for smoother corrections\nProportional Control Logic</comment><statement name=\"HANDLER\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Ghost"],[1,"device_show_leds\"><field name=\"LEDS\">`\n        . . . . . \n        . # . # . \n        . . # . . \n        . # # # . \n        . # . # .\n        `"],[0,"</fi"]],"start1":618,"start2":618,"length1":2047,"length2":150},{"diffs":[[0,"AR\" id=\""],[-1,"Gl[WHe|#C^oEl9Qt8iHt"],[1,".%ZbvJX`5+s[8YuH,i84"],[0,"\">distan"]],"start1":820,"start2":820,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"Gl[WHe|#C^oEl9Qt8iHt"],[1,".%ZbvJX`5+s[8YuH,i84"],[0,"\">distan"]],"start1":1596,"start2":1596,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"pJgp#X[DP{bTYV##,A`*"],[1,"05nb3F9~XY[V_zu]dh/o"],[0,"\">ob"]],"start1":1783,"start2":1783,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,"Gl[WHe|#C^oEl9Qt8iHt"],[1,".%ZbvJX`5+s[8YuH,i84"],[0,"\">di"]],"start1":2131,"start2":2131,"length1":28,"length2":28},{"diffs":[[0,"AR\" id=\""],[-1,"4pM4G~l~ZppBdW);@T}O"],[1,"Sd)q2uf,F2?F#l+AV{?r"],[0,"\">leftSe"]],"start1":2990,"start2":2990,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"vfzR!P^O=k+LXpDyH-23"],[1,"*_w6]M2#{|b8wi%m:.V7"],[0,"\">rightS"]],"start1":3332,"start2":3332,"length1":36,"length2":36},{"diffs":[[0,"elseif=\""],[-1,"2"],[1,"3"],[0,"\" else=\""]],"start1":3603,"start2":3603,"length1":17,"length2":17},{"diffs":[[0,"tation><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors on the surface (white) - move forward\nLeft sensor on the line (black), right sensor on the surface (white) - turn left\nRight sensor on the line (black), left sensor on the surface (white) - turn right\nBoth sensors on the line (black) - move forward\nBoth sensors on the surface (white) - recover based on last turn</comment><"],[0,"value na"]],"start1":3627,"start2":3627,"length1":16,"length2":391},{"diffs":[[0,"AR\" id=\""],[-1,"4pM4G~l~ZppBdW);@T}O"],[1,"Sd)q2uf,F2?F#l+AV{?r"],[0,"\">leftSe"]],"start1":4415,"start2":4415,"length1":36,"length2":36},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"0"],[1,"1"],[0,"</field></shadow"]],"start1":4524,"start2":4524,"length1":33,"length2":33},{"diffs":[[0,"AR\" id=\""],[-1,"vfzR!P^O=k+LXpDyH-23"],[1,"*_w6]M2#{|b8wi%m:.V7"],[0,"\">rightS"]],"start1":4843,"start2":4843,"length1":36,"length2":36},{"diffs":[[0,"block type=\""],[-1,"variables_set"],[1,"motor_MotorRun"],[0,"\"><field nam"]],"start1":5050,"start2":5050,"length1":37,"length2":38},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><comment pinned=\"false\" h=\"80\" w=\"160\">Line is to the left</comment"],[1,"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field"],[0,"><va"]],"start1":5087,"start2":5087,"length1":119,"length2":80},{"diffs":[[0,"ld><value name=\""],[-1,"VALUE"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":5161,"start2":5161,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><fi"]],"start1":5205,"start2":5205,"length1":241,"length2":69},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":5268,"start2":5268,"length1":35,"length2":38},{"diffs":[[0,"ow><block type=\""],[-1,"tex"],[1,"variables_ge"],[0,"t\"><field name=\""]],"start1":5307,"start2":5307,"length1":35,"length2":44},{"diffs":[[0,"field name=\""],[-1,"TEXT\">left"],[1,"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed"],[0,"</field></bl"]],"start1":5339,"start2":5339,"length1":34,"length2":64},{"diffs":[[0,"e></block></"],[-1,"next></block></"],[0,"statement><v"]],"start1":5413,"start2":5413,"length1":39,"length2":24},{"diffs":[[0,"AR\" id=\""],[-1,"4pM4G~l~ZppBdW);@T}O"],[1,"Sd)q2uf,F2?F#l+AV{?r"],[0,"\">leftSe"]],"start1":5841,"start2":5841,"length1":36,"length2":36},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"1"],[1,"0"],[0,"</field></shadow"]],"start1":5950,"start2":5950,"length1":33,"length2":33},{"diffs":[[0,"AR\" id=\""],[-1,"vfzR!P^O=k+LXpDyH-23"],[1,"*_w6]M2#{|b8wi%m:.V7"],[0,"\">rightS"]],"start1":6269,"start2":6269,"length1":36,"length2":36},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"0"],[1,"1"],[0,"</field></shadow"]],"start1":6379,"start2":6379,"length1":33,"length2":33},{"diffs":[[0,"block type=\""],[-1,"variables_set"],[1,"motor_MotorRun"],[0,"\"><field nam"]],"start1":6476,"start2":6476,"length1":37,"length2":38},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error"],[1,"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW"],[0,"</fi"]],"start1":6513,"start2":6513,"length1":44,"length2":73},{"diffs":[[0,"60\">"],[-1,"Line is to the right"],[1,"Sharp left turn"],[0,"</co"]],"start1":6625,"start2":6625,"length1":28,"length2":23},{"diffs":[[0,"nt><value name=\""],[-1,"VALUE"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":6651,"start2":6651,"length1":37,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":6683,"start2":6683,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM\">1"],[1,"SLIDER\">0"],[0,"</field></shadow"]],"start1":6758,"start2":6758,"length1":38,"length2":41},{"diffs":[[0,"d></shadow><"],[-1,"/value><next><"],[0,"block type=\""]],"start1":6789,"start2":6789,"length1":38,"length2":24},{"diffs":[[0,"type=\"variables_"],[-1,"s"],[1,"g"],[0,"et\"><field name="]],"start1":6807,"start2":6807,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data"],[1,"JB!L)eI@lbC-?ml):ez]\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"G?SI}91J^G0E$CEUH1]w\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Update last turn direction</comment"],[0,"><va"]],"start1":6846,"start2":6846,"length1":91,"length2":648},{"diffs":[[0,"eld name=\"TEXT\">"],[-1,"righ"],[1,"lef"],[0,"t</field></block"]],"start1":7596,"start2":7596,"length1":36,"length2":35},{"diffs":[[0,"/next></block></"],[1,"next></block></"],[0,"statement><value"]],"start1":7649,"start2":7649,"length1":32,"length2":47},{"diffs":[[0,"id=\""],[-1,"4pM4G~l~ZppBdW);@T}O"],[1,"Sd)q2uf,F2?F#l+AV{?r"],[0,"\">le"]],"start1":8100,"start2":8100,"length1":28,"length2":28},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"0"],[1,"1"],[0,"</field></shadow"]],"start1":8205,"start2":8205,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"vfzR!P^O=k+LXpDyH-23"],[1,"*_w6]M2#{|b8wi%m:.V7"],[0,"\">ri"]],"start1":8528,"start2":8528,"length1":28,"length2":28},{"diffs":[[0,"block type=\""],[-1,"variables_set"],[1,"motor_MotorRun"],[0,"\"><field nam"]],"start1":8731,"start2":8731,"length1":37,"length2":38},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><comment pinned=\"false\" h=\"80\" w=\"160\">Line is centered</comment"],[1,"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field"],[0,"><va"]],"start1":8768,"start2":8768,"length1":116,"length2":79},{"diffs":[[0,"ld><value name=\""],[-1,"VALUE"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":8841,"start2":8841,"length1":37,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":8873,"start2":8873,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":8948,"start2":8948,"length1":35,"length2":38},{"diffs":[[0,"ow><"],[-1,"/value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors on the surface (white) - recover based on las"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Sharp righ"],[0,"t tu"]],"start1":8987,"start2":8987,"length1":222,"length2":282},{"diffs":[[0,"nt><value name=\""],[-1,"IF0"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":9278,"start2":9278,"length1":35,"length2":37},{"diffs":[[0,"hadow type=\""],[-1,"logic_boolean\""],[1,"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name"]],"start1":9303,"start2":9303,"length1":38,"length2":96},{"diffs":[[0,"field name=\""],[-1,"BOOL\">TRUE"],[1,"SLIDER\">0"],[0,"</field></sh"]],"start1":9389,"start2":9389,"length1":34,"length2":33},{"diffs":[[0,"block type=\""],[-1,"logic_compare"],[1,"variables_get"],[0,"\"><field nam"]],"start1":9428,"start2":9428,"length1":37,"length2":37},{"diffs":[[0,"me=\""],[-1,"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow"],[1,"VAR\" id=\"JB!L)eI@lbC-?ml):ez]\">turnSpeed</field></block></value><next"],[0,"><bl"]],"start1":9464,"start2":9464,"length1":100,"length2":77},{"diffs":[[0,"type=\"variables_"],[-1,"g"],[1,"s"],[0,"et\"><field name="]],"start1":9545,"start2":9545,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field></block></value"],[1,"G?SI}91J^G0E$CEUH1]w\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Update last turn direction</comment"],[0,"><va"]],"start1":9584,"start2":9584,"length1":61,"length2":120},{"diffs":[[0,"nt><value name=\""],[-1,"B"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":9698,"start2":9698,"length1":33,"length2":37},{"diffs":[[0,"eld name=\"TEXT\">"],[-1,"lef"],[1,"righ"],[0,"t</field></block"]],"start1":9806,"start2":9806,"length1":35,"length2":36},{"diffs":[[0,"k></"],[-1,"value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><value name=\"VALUE\"><shadow type=\"math_number"],[1,"next></block></next></block></statement><value name=\"IF3\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation"],[0,"\"><f"]],"start1":9857,"start2":9857,"length1":166,"length2":163},{"diffs":[[0,"me=\""],[-1,"NUM\">-1"],[1,"OP\">AND"],[0,"</fi"]],"start1":10027,"start2":10027,"length1":15,"length2":15},{"diffs":[[0,"ld><"],[-1,"/shadow></value></block></statement><"],[0,"valu"]],"start1":10043,"start2":10043,"length1":45,"length2":8},{"diffs":[[0,"ld><value name=\""],[-1,"IF1"],[1,"A"],[0,"\"><shadow type=\""]],"start1":10043,"start2":10043,"length1":35,"length2":33},{"diffs":[[0,"id=\""],[-1,"V|6OzsTfh9kbGZrKG;+K\">lastTurn"],[1,"Sd)q2uf,F2?F#l+AV{?r\">leftSensor"],[0,"</fi"]],"start1":10311,"start2":10311,"length1":38,"length2":40},{"diffs":[[0,"ow><"],[-1,"block type=\"text\"><field name=\"TEXT\">right</field></block></value></block"],[1,"/value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field"],[0,"><"],[-1,"/"],[0,"value"],[-1,"><statement name=\"DO1\""],[1," name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow"],[0,"><bl"]],"start1":10447,"start2":10447,"length1":111,"length2":249},{"diffs":[[0,"type=\"variables_"],[-1,"s"],[1,"g"],[0,"et\"><field name="]],"start1":10700,"start2":10700,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"J-XpsoL=QPJ]=i(^8=x)\">error</field"],[1,"*_w6]M2#{|b8wi%m:.V7\">rightSensor</field></block></value"],[0,"><va"]],"start1":10739,"start2":10739,"length1":42,"length2":64},{"diffs":[[0,"ue><value name=\""],[-1,"VALUE"],[1,"B"],[0,"\"><shadow type=\""]],"start1":10797,"start2":10797,"length1":37,"length2":33},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"1"],[1,"0"],[0,"</field></shadow"]],"start1":10845,"start2":10845,"length1":33,"length2":33},{"diffs":[[0,"block></"],[-1,"statement"],[1,"value></block></value"],[0,"><statem"]],"start1":10889,"start2":10889,"length1":25,"length2":37},{"diffs":[[0,"me=\""],[-1,"ELSE"],[1,"DO3"],[0,"\"><b"]],"start1":10932,"start2":10932,"length1":12,"length2":11},{"diffs":[[0,"block type=\""],[-1,"variables_set"],[1,"motor_MotorRun"],[0,"\"><field nam"]],"start1":10942,"start2":10942,"length1":37,"length2":38},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error"],[1,"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW"],[0,"</fi"]],"start1":10979,"start2":10979,"length1":44,"length2":73},{"diffs":[[0,"ld><value name=\""],[-1,"VALUE"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":11053,"start2":11053,"length1":37,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":11085,"start2":11085,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":11160,"start2":11160,"length1":35,"length2":38},{"diffs":[[0,"ow><"],[-1,"/value></block></statement></block></statement><next><"],[0,"bloc"]],"start1":11199,"start2":11199,"length1":62,"length2":8},{"diffs":[[0,"type=\"variables_"],[-1,"s"],[1,"g"],[0,"et\"><field name="]],"start1":11209,"start2":11209,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Calculate motor speeds using proportional control</comment"],[1,"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation"],[0,"><va"]],"start1":11248,"start2":11248,"length1":149,"length2":172},{"diffs":[[0,"on><value name=\""],[-1,"VALUE"],[1,"IF0"],[0,"\"><shadow type=\""]],"start1":11414,"start2":11414,"length1":37,"length2":35},{"diffs":[[0,"hadow type=\""],[-1,"math_number"],[1,"logic_boolean"],[0,"\"><field nam"]],"start1":11437,"start2":11437,"length1":35,"length2":37},{"diffs":[[0,"n\"><field name=\""],[-1,"NUM\">0"],[1,"BOOL\">TRUE"],[0,"</field></shadow"]],"start1":11461,"start2":11461,"length1":38,"length2":42},{"diffs":[[0,"block type=\""],[-1,"math_arithmetic"],[1,"logic_compare"],[0,"\"><field nam"]],"start1":11505,"start2":11505,"length1":39,"length2":37},{"diffs":[[0,"OP\">"],[-1,"MINUS"],[1,"EQ"],[0,"</fi"]],"start1":11545,"start2":11545,"length1":13,"length2":10},{"diffs":[[0,"id=\""],[-1,"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed"],[1,"G?SI}91J^G0E$CEUH1]w\">lastTurn"],[0,"</fi"]],"start1":11684,"start2":11684,"length1":39,"length2":38},{"diffs":[[0,"pe=\""],[-1,"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field"],[1,"text\"><field name=\"TEXT\">left</field></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Recover left</comment"],[0,"><va"]],"start1":11830,"start2":11830,"length1":199,"length2":274},{"diffs":[[0,"nt><value name=\""],[-1,"A"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":12098,"start2":12098,"length1":33,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":12130,"start2":12130,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":12205,"start2":12205,"length1":35,"length2":38},{"diffs":[[0,"id=\""],[-1,"ZoB({=W0Y]:5;NvUBi:8\">Kp</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field></block></value></block></value"],[1,"NRy1Rouj/]4.4Pw@y+W:\">recoverySpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data"],[0,"><va"]],"start1":12293,"start2":12293,"length1":251,"length2":232},{"diffs":[[0,"ta><value name=\""],[-1,"B"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":12519,"start2":12519,"length1":33,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":12551,"start2":12551,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":12626,"start2":12626,"length1":35,"length2":38},{"diffs":[[0,"id=\""],[-1,"dtkK;plNvPF+gY0`Kx4m\">turn"],[1,"m4q!FCy:}iP^^!fIG2*7\">base"],[0,"Spee"]],"start1":12714,"start2":12714,"length1":34,"length2":34},{"diffs":[[0,"value></block></"],[-1,"value"],[1,"next"],[0,"></block></value"]],"start1":12767,"start2":12767,"length1":37,"length2":36},{"diffs":[[0,"k></"],[-1,"value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field"],[1,"statement"],[0,"><va"]],"start1":12794,"start2":12794,"length1":114,"length2":17},{"diffs":[[0,"nt><value name=\""],[-1,"VALUE"],[1,"IF1"],[0,"\"><shadow type=\""]],"start1":12805,"start2":12805,"length1":37,"length2":35},{"diffs":[[0,"hadow type=\""],[-1,"math_number"],[1,"logic_boolean"],[0,"\"><field nam"]],"start1":12828,"start2":12828,"length1":35,"length2":37},{"diffs":[[0,"n\"><field name=\""],[-1,"NUM\">0"],[1,"BOOL\">TRUE"],[0,"</field></shadow"]],"start1":12852,"start2":12852,"length1":38,"length2":42},{"diffs":[[0,"block type=\""],[-1,"math_arithmetic"],[1,"logic_compare"],[0,"\"><field nam"]],"start1":12896,"start2":12896,"length1":39,"length2":37},{"diffs":[[0,"OP\">"],[-1,"ADD"],[1,"EQ"],[0,"</fi"]],"start1":12936,"start2":12936,"length1":11,"length2":10},{"diffs":[[0,"id=\""],[-1,"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed"],[1,"G?SI}91J^G0E$CEUH1]w\">lastTurn"],[0,"</fi"]],"start1":13075,"start2":13075,"length1":39,"length2":38},{"diffs":[[0,"pe=\""],[-1,"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY"],[1,"text\"><field name=\"TEXT\">right</field></block></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW"],[0,"</fi"]],"start1":13221,"start2":13221,"length1":192,"length2":206},{"diffs":[[0,"ld><value name=\""],[-1,"A"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":13428,"start2":13428,"length1":33,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":13460,"start2":13460,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":13535,"start2":13535,"length1":35,"length2":38},{"diffs":[[0,"id=\""],[-1,"ZoB({=W0Y]:5;NvUBi:8\">Kp</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field></block></value></block></value"],[1,"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Recover right</comment"],[0,"><va"]],"start1":13623,"start2":13623,"length1":251,"length2":245},{"diffs":[[0,"nt><value name=\""],[-1,"B"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":13862,"start2":13862,"length1":33,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":13894,"start2":13894,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":13969,"start2":13969,"length1":35,"length2":38},{"diffs":[[0,"id=\""],[-1,"dtkK;plNvPF+gY0`Kx4m\">turn"],[1,"NRy1Rouj/]4.4Pw@y+W:\">recovery"],[0,"Spee"]],"start1":14057,"start2":14057,"length1":34,"length2":38},{"diffs":[[0,"value></block></"],[-1,"value"],[1,"next"],[0,"></block></value"]],"start1":14114,"start2":14114,"length1":37,"length2":36},{"diffs":[[0,"k></"],[-1,"value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed"],[1,"statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW"],[0,"</fi"]],"start1":14141,"start2":14141,"length1":106,"length2":148},{"diffs":[[0,"60\">"],[-1,"Constrain motor speeds to avoid extreme values"],[1,"If no last turn, stop or move forward"],[0,"</co"]],"start1":14328,"start2":14328,"length1":54,"length2":45},{"diffs":[[0,"nt><value name=\""],[-1,"VALUE"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":14376,"start2":14376,"length1":37,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":14408,"start2":14408,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":14483,"start2":14483,"length1":35,"length2":38},{"diffs":[[0,"pe=\""],[-1,"math_constrain_value\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field></block></value><value name=\"low\"><block type=\"variables_get\"><field name=\"VAR\" id=\"n){c^)*:wag#iH-wQTWn\">recoverySpeed</field></block></value><value name=\"high\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field"],[1,"variables_get\"><field name=\"VAR\" id=\"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field></block></value></block></statement></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Small Delay for Stability\nMinimal delay for faster response</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"36\" y=\"38\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"05nb3F9~XY[V_zu]dh/o\">obstacleThreshold</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if an obstacle is within 10 cm</comment"],[0,"><va"]],"start1":14534,"start2":14534,"length1":527,"length2":735},{"diffs":[[0,"ield name=\"NUM\">"],[1,"1"],[0,"0</field></shado"]],"start1":15315,"start2":15315,"length1":32,"length2":33},{"diffs":[[0,"ow><"],[-1,"block type=\"math_constrain_"],[1,"/"],[0,"value"],[-1,"\""],[0,"><"],[-1,"value name=\"value\""],[1,"next"],[0,"><bl"]],"start1":15347,"start2":15347,"length1":61,"length2":20},{"diffs":[[0,"type=\"variables_"],[-1,"g"],[1,"s"],[0,"et\"><field name="]],"start1":15371,"start2":15371,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field></block></value><value name=\"low\"><block type=\"variables_get\"><field name=\"VAR\" id=\"n){c^)*:wag#iH-wQTWn\">recoverySpeed</field></block></value><value name=\"high\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</field></block></value></block"],[1,"m4q!FCy:}iP^^!fIG2*7\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Motor Speed Settings\nBase speed for straight sections</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">60</field></shadow"],[0,"></v"]],"start1":15410,"start2":15410,"length1":327,"length2":232},{"diffs":[[0,"block type=\""],[-1,"motor_MotorRun"],[1,"variables_set"],[0,"\"><field nam"]],"start1":15654,"start2":15654,"length1":38,"length2":37},{"diffs":[[0,"me=\""],[-1,"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW"],[1,"VAR\" id=\"JB!L)eI@lbC-?ml):ez]\">turnSpeed"],[0,"</fi"]],"start1":15690,"start2":15690,"length1":72,"length2":48},{"diffs":[[0,"0\">S"],[-1,"et motor speeds"],[1,"peed for turning"],[0,"</co"]],"start1":15778,"start2":15778,"length1":23,"length2":24},{"diffs":[[0,"nt><value name=\""],[-1,"speed"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":15805,"start2":15805,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":15849,"start2":15849,"length1":69,"length2":9},{"diffs":[[0,"field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">"],[1,"3"],[0,"0</field></s"]],"start1":15856,"start2":15856,"length1":32,"length2":30},{"diffs":[[0,"field></shadow><"],[1,"/value><next><"],[0,"block type=\"vari"]],"start1":15877,"start2":15877,"length1":32,"length2":46},{"diffs":[[0,"type=\"variables_"],[-1,"g"],[1,"s"],[0,"et\"><field name="]],"start1":15913,"start2":15913,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field"],[1,"NRy1Rouj/]4.4Pw@y+W:\">recoverySpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for recovery when line is lost</comment"],[0,"><va"]],"start1":15952,"start2":15952,"length1":187,"length2":135},{"diffs":[[0,"nt><value name=\""],[-1,"speed"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":16081,"start2":16081,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":16125,"start2":16125,"length1":69,"length2":9},{"diffs":[[0,"field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">"],[1,"2"],[0,"0</field></s"]],"start1":16132,"start2":16132,"length1":32,"length2":30},{"diffs":[[0,"field></shadow><"],[1,"/value><next><"],[0,"block type=\"vari"]],"start1":16153,"start2":16153,"length1":32,"length2":46},{"diffs":[[0,"type=\"variables_"],[-1,"g"],[1,"s"],[0,"et\"><field name="]],"start1":16189,"start2":16189,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field></block></value><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Small Delay for Stability\nMinimal delay for faster response"],[1,"G?SI}91J^G0E$CEUH1]w\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Last Turn Direction"],[0,"</co"]],"start1":16228,"start2":16228,"length1":200,"length2":104},{"diffs":[[0,"nt><value name=\""],[-1,"pause"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":16335,"start2":16335,"length1":37,"length2":37},{"diffs":[[0,"hadow type=\""],[-1,"timePick"],[1,"math_numb"],[0,"er\"><field n"]],"start1":16360,"start2":16360,"length1":32,"length2":33},{"diffs":[[0,"r\"><field name=\""],[-1,"ms\">1"],[1,"NUM\">0"],[0,"</field></shadow"]],"start1":16382,"start2":16382,"length1":37,"length2":38},{"diffs":[[0,"ow><"],[-1,"/value></block></next></block></next></block></next></block></next></block></next></block></next></block></next"],[1,"block type=\"text\"><field name=\"TEXT\">none</field"],[0,"></b"]],"start1":16418,"start2":16418,"length1":119,"length2":56},{"diffs":[[0,"field></block></"],[-1,"next"],[1,"value"],[0,"></block></next>"]],"start1":16465,"start2":16465,"length1":36,"length2":37}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"let rightMotorSpeed = 0\nlet leftMotorSpeed = 0\nlet error = 0\n"],[0,"let "]],"start1":0,"start2":0,"length1":65,"length2":4},{"diffs":[[0,"d = "],[-1,"4"],[1,"3"],[0,"0\n//"]],"start1":234,"start2":234,"length1":9,"length2":9},{"diffs":[[0,"ne\"\n"],[-1,"// Proportional Control Gain\n// Proportional gain for smoother corrections\nlet Kp = 0.5\n// Proportional gain for smoother corrections\n// Proportional Control Logic\nbasic.forever(function () {\n    basic.showIcon(IconNames.Ghost"],[1,"basic.forever(function () {\n    basic.showLeds(`\n        . . . . .\n        . # . # .\n        . . # . .\n        . # # # .\n        . # . # .\n        `"],[0,")\n  "]],"start1":345,"start2":345,"length1":234,"length2":156},{"diffs":[[0,"    "],[-1,"if (leftSensor == 0 && rightSensor == 1) {\n        // Line is to the left\n        error = -1\n        lastT"],[1,"// Both sensors on the surface (white) - move forward\n    // Left sensor on the line (black), right sensor on the surface (white) - t"],[0,"urn "],[-1,"= \""],[0,"left"],[-1,"\""],[0,"\n    "],[-1,"} else if ("],[1,"// Right sensor on the line (black), "],[0,"left"],[-1,"S"],[1," s"],[0,"ensor "],[-1,"== 1 && rightSensor == 0) {\n        // Line is to the right\n        err"],[1,"on the surface (white) - turn right\n    // Both sensors on the line (black) - move forward\n    // Both sensors on the surface (white) - recover based on last turn\n    if (leftSensor == 1 && rightSens"],[0,"or ="],[1,"="],[0," 1"],[1,") {"],[0,"\n   "]],"start1":1039,"start2":1039,"length1":230,"length2":412},{"diffs":[[0,"    "],[-1,"lastTurn = \"right\""],[1,"maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, baseSpeed)"],[0,"\n   "]],"start1":1452,"start2":1452,"length1":26,"length2":71},{"diffs":[[0,"nsor == "],[-1,"0"],[1,"1"],[0,") {\n    "]],"start1":1561,"start2":1561,"length1":17,"length2":17},{"diffs":[[0," // "],[-1,"Line is centered\n        error = 0\n    } else {\n        // Both sensors on the surface (white) - recover based on last turn\n "],[1,"Sharp left turn\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, turnSpeed)\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, baseSpeed)\n        // Update last turn direction\n"],[0,"       "],[-1,"if ("],[1," "],[0,"last"]],"start1":1581,"start2":1581,"length1":144,"length2":213},{"diffs":[[0,"rn ="],[-1,"="],[0," \"left\""],[-1,") {"],[0,"\n    "],[-1,"        error = -1\n        } else if (lastTurn == \"right\") {\n            error = 1\n        } else {\n            err"],[1,"} else if (leftSensor == 1 && rightSensor == 0) {\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, baseSpeed)\n        // Sharp right turn\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, turnSpeed)\n        // Update last turn direction\n        lastTurn = \"right\"\n    } else if (leftSens"],[0,"or ="],[1,"="],[0," 0"],[-1,"\n        }"],[1," && rightSensor == 0) {"],[0,"\n    "],[-1,"}\n"],[0,"    "],[-1,"// Calculate motor speeds using proportional control\n    leftMotorSpeed = baseSpeed - Kp * error * turnSpeed\n    rightMotorSpeed = baseSpeed + Kp * error * turnSpeed\n    // Constrain motor speeds to avoid extreme values\n    leftMotorSpeed = Math.constrain(leftMotorSpeed, recoverySpeed, baseSpeed)\n    rightMotorSpeed = Math.constrain(rightMotorSpeed, recoverySpeed, baseSpeed)\n    // Set motor speeds\n"],[1,"maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, baseSpeed)\n    } else {\n        if (lastTurn == \"left\") {\n            // Recover left\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, recoverySpeed)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, baseSpeed)\n        } else if (lastTurn == \"right\") {\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, baseSpeed)\n            // Recover right\n        "],[0,"    "]],"start1":1796,"start2":1796,"length1":568,"length2":816},{"diffs":[[0,"maqueen.Motors.M"],[-1,"1"],[1,"2"],[0,", maqueen.Dir.CW"]],"start1":2629,"start2":2629,"length1":33,"length2":33},{"diffs":[[0,"Dir."],[1,"C"],[0,"CW, "],[-1,"leftMotorSpeed)\n"],[1,"recoverySpeed)\n        } else {\n            // If no last turn, stop or move forward\n        "],[0,"    "]],"start1":2656,"start2":2656,"length1":28,"length2":106},{"diffs":[[0,"(maqueen.Motors."],[-1,"M2"],[1,"All"],[0,", maqueen.Dir.CW"]],"start1":2778,"start2":2778,"length1":34,"length2":35},{"diffs":[[0,"CW, "],[-1,"rightMotorSpeed)"],[1,"baseSpeed)\n        }\n    }"],[0,"\n   "]],"start1":2811,"start2":2811,"length1":24,"length2":34}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":308,"start2":308,"length1":17,"length2":21}]}]},{"timestamp":1739269832553,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"let "],[-1,"obstacleThreshold = 10;  "],[1,"rightMotorSpeed = 0\nlet leftMotorSpeed = 0\nlet error = 0\nlet rightSensor = 0\nlet leftSensor = 0\nlet distance = 0\n"],[0,"// S"]],"start1":0,"start2":0,"length1":33,"length2":121},{"diffs":[[0,"n 10 cm\n"],[1,"let obstacleThreshold = 10"],[0,"\n// Moto"]],"start1":148,"start2":148,"length1":16,"length2":42},{"diffs":[[0,"ngs\n"],[-1,"let baseS"],[1,"// Base s"],[0,"peed "],[-1,"= 70;  // Slightly increased for better resp"],[1,"for straight secti"],[0,"ons"],[-1,"e"],[0,"\nlet "],[-1,"turn"],[1,"base"],[0,"Speed = "],[-1,"50;  // Faste"],[1,"60\n// Speed fo"],[0,"r turn"],[-1,"s"],[1,"ing"],[0,"\nlet "],[-1,"recoverySpeed = 25;  // Increased recovery speed\nlet adjustmentFactor = 5; // To correct left drift\n"],[1,"turnSpeed = 40\n// Speed for recovery when line is lost\nlet recoverySpeed = 20"],[0,"\n// "]],"start1":203,"start2":203,"length1":212,"length2":165},{"diffs":[[0,"= \"none\""],[-1,";\n"],[0,"\n// Prop"]],"start1":401,"start2":401,"length1":18,"length2":16},{"diffs":[[0,"ain\n"],[-1,"let Kp = 0.7;  // Increased"],[1,"// Proportional gain for smoother corrections\nlet Kp = 0.5\n// Proportional"],[0," gai"]],"start1":435,"start2":435,"length1":35,"length2":82},{"diffs":[[0,"for "],[-1,"bett"],[1,"smooth"],[0,"er c"]],"start1":519,"start2":519,"length1":12,"length2":14},{"diffs":[[0,"ections\n"],[1,"// Proportional Control Logic"],[0,"\nbasic.f"]],"start1":536,"start2":536,"length1":16,"length2":45},{"diffs":[[0,"nction () {\n"],[1,"    basic.showIcon(IconNames.Ghost)\n"],[0,"    // Read "]],"start1":590,"start2":590,"length1":24,"length2":60},{"diffs":[[0,"ion\n    "],[-1,"let "],[0,"distance"]],"start1":687,"start2":687,"length1":20,"length2":16},{"diffs":[[0,"asonic()"],[-1,";\n"],[0,"\n    // "]],"start1":718,"start2":718,"length1":18,"length2":16},{"diffs":[[0,"ance"],[-1," Maneuver"],[0,"\n   "]],"start1":748,"start2":748,"length1":17,"length2":8},{"diffs":[[0,"    "],[-1,"maqueen.motorStop(maqueen.Motors.All);\n        basic.pause(200);\n\n        // Check left and right distances\n        let leftCheck = maqueen.Ultrasonic();\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, turnSpeed);\n        basic.pause(300);\n        let rightCheck = maqueen.Ultrasonic();\n        maqueen.motorStop(maqueen.Motors.All);\n        basic.pause(200);\n\n        // Determine best escape route\n        if (leftCheck > obstacleThreshold) {\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, turnSpeed);\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, turnSpeed);\n            basic.pause(400);\n        } else if (rightCheck > obstacleThreshold) {\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, turnSpeed);\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, turnSpeed);\n    "],[1,"// Stop the robot if an obstacle is detected\n        maqueen.motorStop(maqueen.Motors.All)\n        // Wait for 0.2 seconds\n"],[0,"    "]],"start1":813,"start2":813,"length1":858,"length2":131},{"diffs":[[0,"use("],[-1,"4"],[1,"2"],[0,"00)"],[-1,";"],[0,"\n   "]],"start1":956,"start2":956,"length1":13,"length2":12},{"diffs":[[0,"    "],[-1,"} else {\n            // Backup and retry if both sides are blocked\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, recoverySpeed);\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, recoverySpeed);\n            basic.pause(500);\n        }\n        return; "],[0,"// S"]],"start1":969,"start2":969,"length1":293,"length2":8},{"diffs":[[0,"the loop"],[1,"\n        return;"],[0,"\n    }\n"],[-1,"\n"],[0,"    // R"]],"start1":993,"start2":993,"length1":24,"length2":39},{"diffs":[[0," values\n    "],[-1,"let "],[0,"leftSensor ="]],"start1":1042,"start2":1042,"length1":28,"length2":24},{"diffs":[[0,"rolLeft)"],[-1,";"],[0,"\n    "],[-1,"let "],[0,"rightSen"]],"start1":1104,"start2":1104,"length1":26,"length2":21},{"diffs":[[0,"ght)"],[-1,";\n\n    // Proportional Control Logic\n    let error = 0;\n"],[0,"\n   "]],"start1":1173,"start2":1173,"length1":64,"length2":8},{"diffs":[[0,"{\n      "],[-1,"  error = -1;"],[0,"  // Lin"]],"start1":1223,"start2":1223,"length1":29,"length2":16},{"diffs":[[0,"he left\n"],[1,"        error = -1\n"],[0,"        "]],"start1":1248,"start2":1248,"length1":16,"length2":35},{"diffs":[[0,"= \"left\""],[-1,";"],[0,"\n    } e"]],"start1":1292,"start2":1292,"length1":17,"length2":16},{"diffs":[[0," {\n     "],[-1,"   error = 1;"],[0,"   // Li"]],"start1":1352,"start2":1352,"length1":29,"length2":16},{"diffs":[[0,"e right\n"],[1,"        error = 1\n"],[0,"        "]],"start1":1379,"start2":1379,"length1":16,"length2":34},{"diffs":[[0," \"right\""],[-1,";"],[0,"\n    } e"]],"start1":1423,"start2":1423,"length1":17,"length2":16},{"diffs":[[0," {\n     "],[-1,"   error = 0;"],[0,"   // Li"]],"start1":1483,"start2":1483,"length1":29,"length2":16},{"diffs":[[0,"entered\n"],[1,"        error = 0\n"],[0,"    } el"]],"start1":1506,"start2":1506,"length1":16,"length2":34},{"diffs":[[0,"ors "],[-1,"lost line - recover using last known"],[1,"on the surface (white) - recover based on last"],[0," tur"]],"start1":1565,"start2":1565,"length1":44,"length2":54},{"diffs":[[0,"ror = -1"],[-1,";"],[0,"\n       "]],"start1":1669,"start2":1669,"length1":17,"length2":16},{"diffs":[[0,"rror = 1"],[-1,";"],[0,"\n       "]],"start1":1733,"start2":1733,"length1":17,"length2":16},{"diffs":[[0,"rror = 0"],[-1,";"],[0,"\n       "]],"start1":1772,"start2":1772,"length1":17,"length2":16},{"diffs":[[0,"  }\n"],[-1,"\n"],[0,"    // C"],[-1,"orrect the left drift issue by boosting the left motor slightly\n    let"],[1,"alculate motor speeds using proportional control\n   "],[0," lef"]],"start1":1793,"start2":1793,"length1":88,"length2":68},{"diffs":[[0,"peed"],[-1," + adjustmentFactor;\n    let"],[1,"\n   "],[0," rig"]],"start1":1905,"start2":1905,"length1":36,"length2":12},{"diffs":[[0,"urnSpeed"],[-1,";\n"],[0,"\n    // "]],"start1":1958,"start2":1958,"length1":18,"length2":16},{"diffs":[[0,"motor speeds"],[1," to avoid extreme values"],[0,"\n    leftMot"]],"start1":1984,"start2":1984,"length1":24,"length2":48},{"diffs":[[0,"aseSpeed"],[-1," + 10);"],[1,")"],[0,"\n    rig"]],"start1":2089,"start2":2089,"length1":23,"length2":17},{"diffs":[[0,"peed"],[-1," + 10);\n"],[1,")"],[0,"\n   "]],"start1":2173,"start2":2173,"length1":16,"length2":9},{"diffs":[[0,"orSpeed)"],[-1,";"],[0,"\n    maq"]],"start1":2266,"start2":2266,"length1":17,"length2":16},{"diffs":[[0,"orSpeed)"],[-1,";\n"],[0,"\n    // "]],"start1":2339,"start2":2339,"length1":18,"length2":16},{"diffs":[[0,"// S"],[-1,"horter"],[1,"mall Delay for Stability\n    // Minimal"],[0," del"]],"start1":2352,"start2":2352,"length1":14,"length2":47},{"diffs":[[0,"for "],[-1,"improved"],[1,"faster"],[0," respons"],[-1,"iveness"],[1,"e"],[0,"\n   "]],"start1":2402,"start2":2402,"length1":31,"length2":23},{"diffs":[[0,"use("],[-1,"5);"],[1,"1)"],[0,"\n})"],[-1,";"],[0,"\n"]],"start1":2434,"start2":2434,"length1":12,"length2":10}]}]},{"timestamp":1739270714627,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0," // "],[-1,"Obstacle detection threshold in"],[1,"Stop if an obstacle is within 10"],[0," cm\n"]],"start1":28,"start2":28,"length1":39,"length2":40},{"diffs":[[0,"d = "],[-1,"6"],[1,"7"],[0,"0;  // S"],[-1,"peed for straight movement"],[1,"lightly increased for better response"],[0,"\nlet"]],"start1":105,"start2":105,"length1":43,"length2":54},{"diffs":[[0,"d = "],[-1,"4"],[1,"5"],[0,"0;  // "],[-1,"Speed fo"],[1,"Faste"],[0,"r turn"],[-1,"ing"],[1,"s"],[0,"\nlet"]],"start1":168,"start2":168,"length1":33,"length2":28},{"diffs":[[0," // "],[-1,"Speed for recovering lost line\n\n// Last Turn Direction (helps when line is lost)\nlet lastTurn = \"none\";"],[1,"Increased recovery speed\nlet adjustmentFactor = 5; // To correct left drift\n\n// Last Turn Direction\nlet lastTurn = \"none\";\n\n// Proportional Control Gain\nlet Kp = 0.7;  // Increased gain for better corrections"],[0,"\n\nba"]],"start1":217,"start2":217,"length1":111,"length2":216},{"diffs":[[0,"ght "],[-1,"to decide escape route\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, turnSpeed);\n        basic.pause(300);"],[1,"distances"],[0,"\n   "]],"start1":747,"start2":747,"length1":128,"length2":17},{"diffs":[[0,"n.Ultrasonic();\n"],[-1,"\n"],[0,"        maqueen."]],"start1":791,"start2":791,"length1":33,"length2":32},{"diffs":[[0,"maqueen.Motors.M"],[-1,"2"],[1,"1"],[0,", maqueen.Dir.CW"]],"start1":832,"start2":832,"length1":33,"length2":33},{"diffs":[[0,"trasonic();\n"],[-1,"\n"],[0,"        maqu"]],"start1":940,"start2":940,"length1":25,"length2":24},{"diffs":[[0,"ic.pause(200);\n\n"],[1,"        // Determine best escape route\n"],[0,"        if (left"]],"start1":1010,"start2":1010,"length1":32,"length2":71},{"diffs":[[0,") {\n"],[-1,"            // Turn left to avoid\n"],[0,"    "]],"start1":1106,"start2":1106,"length1":42,"length2":8},{"diffs":[[0,"    basic.pause("],[-1,"5"],[1,"4"],[0,"00);\n        } e"]],"start1":1271,"start2":1271,"length1":33,"length2":33},{"diffs":[[0,") {\n"],[-1,"            // Turn right to avoid\n"],[0,"    "]],"start1":1342,"start2":1342,"length1":43,"length2":8},{"diffs":[[0,"    basic.pause("],[-1,"5"],[1,"4"],[0,"00);\n        } e"]],"start1":1507,"start2":1507,"length1":33,"length2":33},{"diffs":[[0," // "],[-1,"If no escape route is available, back up and retry"],[1,"Backup and retry if both sides are blocked"],[0,"\n   "]],"start1":1557,"start2":1557,"length1":58,"length2":50},{"diffs":[[0,";\n        }\n"],[-1,"\n"],[0,"        retu"]],"start1":1794,"start2":1794,"length1":25,"length2":24},{"diffs":[[0,"loop"],[-1," to execute obstacle avoidance"],[0,"\n   "]],"start1":1846,"start2":1846,"length1":38,"length2":8},{"diffs":[[0,"ead "],[-1,"line "],[0,"sensor"],[1," value"],[0,"s\n  "]],"start1":1866,"start2":1866,"length1":19,"length2":20},{"diffs":[[0," // "],[-1,"Line Following Logic (WITHOUT p"],[1,"P"],[0,"ropo"]],"start1":2026,"start2":2026,"length1":39,"length2":9},{"diffs":[[0,"nal "],[-1,"c"],[1,"C"],[0,"ontrol"],[-1,")"],[1," Logic\n    let error = 0;\n"],[0,"\n   "]],"start1":2039,"start2":2039,"length1":16,"length2":41},{"diffs":[[0,"r == 1) {\n      "],[1,"  error = -1;"],[0,"  // Line is to "]],"start1":2114,"start2":2114,"length1":32,"length2":45},{"diffs":[[0,"left"],[-1," -> "],[1,"\n        last"],[0,"Turn "],[1,"= \""],[0,"left"],[1,"\";"],[0,"\n    "],[-1,"    maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, turnSpeed);\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, turnSpeed);"],[1,"} else if (leftSensor == 1 && rightSensor == 0) {\n        error = 1;   // Line is to the right"],[0,"\n   "]],"start1":2163,"start2":2163,"length1":166,"length2":134},{"diffs":[[0,"    lastTurn = \""],[-1,"lef"],[1,"righ"],[0,"t\";\n    } else i"]],"start1":2298,"start2":2298,"length1":35,"length2":36},{"diffs":[[0," (leftSensor == "],[-1,"1"],[1,"0"],[0," && rightSensor "]],"start1":2335,"start2":2335,"length1":33,"length2":33},{"diffs":[[0,"    "],[-1,"// Line is to the right -> Turn right\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, turnSpeed);\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, turnSpeed);"],[1,"error = 0;   // Line is centered\n    } else {\n        // Both sensors lost line - recover using last known turn"],[0,"\n   "]],"start1":2380,"start2":2380,"length1":190,"length2":119},{"diffs":[[0,"wn turn\n        "],[1,"if ("],[0,"lastTurn = \"righ"]],"start1":2488,"start2":2488,"length1":32,"length2":36},{"diffs":[[0," (lastTurn ="],[1,"="],[0," \""],[-1,"right\";\n"],[1,"left\") {\n            error = -1;\n   "],[0,"    "],[1," "],[0,"} else if (l"]],"start1":2506,"start2":2506,"length1":38,"length2":68},{"diffs":[[0,"f (l"],[-1,"eftSensor == 1 && rightSensor == 1) {\n        // Both sensors on black -> Move forward\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, baseSpeed);\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, baseSpeed);\n    } else {"],[1,"astTurn == \"right\") {\n            error = 1;\n        } else {\n            error = 0;\n        }"],[0,"\n    "],[1,"}\n\n"],[0,"    // "],[-1,"Both sensors lost the line -> Recover based on last known turn\n        if (lastTurn == \"left\") {\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW,"],[1,"Correct the left drift issue by boosting the left motor slightly\n    let leftMotorSpeed = baseSpeed - Kp * error * turnSpeed + adjustmentFactor;\n    let rightMotorSpeed = baseSpeed + Kp * error *"],[0," tur"]],"start1":2570,"start2":2570,"length1":424,"length2":312},{"diffs":[[0,"peed"],[-1,")"],[0,";"],[1,"\n"],[0,"\n    "],[-1,"        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, turnSpeed);\n        } else if (lastTurn == \"right\") {\n        "],[1,"// Constrain motor speeds\n    leftMotorSpeed = Math.constrain(leftMotorSpeed, recoverySpeed, baseSpeed + 10);\n    rightMotorSpeed = Math.constrain(rightMotorSpeed, recoverySpeed, baseSpeed + 10);\n\n    // Set motor speeds\n"],[0,"    "]],"start1":2884,"start2":2884,"length1":137,"length2":236},{"diffs":[[0,"Dir.CW, "],[-1,"turnSpeed);\n        "],[1,"leftMotorSpeed);\n"],[0,"    maqu"]],"start1":3164,"start2":3164,"length1":36,"length2":33},{"diffs":[[0,"Dir."],[-1,"C"],[0,"CW, "],[-1,"turnSpeed);\n        } else {\n            // If no previous direction, stop\n            maqueen.motorStop(maqueen.Motors.All);\n        }\n    }\n\n    // Small delay for stability"],[1,"rightMotorSpeed);\n\n    // Shorter delay for improved responsiveness"],[0,"\n   "]],"start1":3237,"start2":3237,"length1":188,"length2":79}]}]},{"timestamp":1739270985561,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ble id=\""],[-1,"kJ5B8Lq7pltEo|Yz+~CT"],[1,"Gl[WHe|#C^oEl9Qt8iHt"],[0,"\">distan"]],"start1":72,"start2":72,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"O|j1V1X(y)pkZS(NRT7["],[1,"pJgp#X[DP{bTYV##,A`*"],[0,"\">obstac"]],"start1":127,"start2":127,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</variable><variable id=\"$6*$hTwa(3hdDi]fvMr8\">leftCheck</variable><variable id=\"1c4aY1E{4=v8-j@l9e26\">rightCheck</variable><variable id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</variable><variable id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor</variable><variable id=\"WqmFsdU[dk9?22qJOerr\">rightSensor</variable><variable id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</variable><variable id=\"7QjfqE2:$jL-g?Q~6iw{\">base"],[1,"4pM4G~l~ZppBdW);@T}O\">leftSensor</variable><variable id=\"vfzR!P^O=k+LXpDyH-23\">rightSensor</variable><variable id=\"J-XpsoL=QPJ]=i(^8=x)\">error</variable><variable id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</variable><variable id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</variable><variable id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</variable><variable id=\"ZoB({=W0Y]:5;NvUBi:8\">Kp</variable><variable id=\"dtkK;plNvPF+gY0`Kx4m\">turnSpeed</variable><variable id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</variable><variable id=\"n){c^)*:wag#iH-wQTWn\">recovery"],[0,"Spee"]],"start1":195,"start2":195,"length1":433,"length2":544},{"diffs":[[0," x=\""],[1,"4"],[0,"0\" y=\""],[-1,"0"],[1,"15"],[0,"\"><s"]],"start1":789,"start2":789,"length1":15,"length2":17},{"diffs":[[0,"AR\" id=\""],[-1,"O|j1V1X(y)pkZS(NRT7["],[1,"pJgp#X[DP{bTYV##,A`*"],[0,"\">obstac"]],"start1":872,"start2":872,"length1":36,"length2":36},{"diffs":[[0,"60\">"],[-1,"Obstacle detection threshold in"],[1,"Stop if an obstacle is within 10"],[0," cm<"]],"start1":962,"start2":962,"length1":39,"length2":40},{"diffs":[[0,"AR\" id=\""],[-1,"7QjfqE2:$jL-g?Q~6iw{"],[1,"]W@c/xo6F_Q+-!:x~UoS"],[0,"\">baseSp"]],"start1":1151,"start2":1151,"length1":36,"length2":36},{"diffs":[[0,"ettings\n"],[-1,"S"],[1,"Base s"],[0,"peed for"]],"start1":1250,"start2":1250,"length1":17,"length2":22},{"diffs":[[0,"ght "],[-1,"movement"],[1,"sections"],[0,"</co"]],"start1":1278,"start2":1278,"length1":16,"length2":16},{"diffs":[[0,"AR\" id=\""],[-1,"~Ee@)%Y8n0hIQ]I:{#S_"],[1,"dtkK;plNvPF+gY0`Kx4m"],[0,"\">turnSp"]],"start1":1440,"start2":1440,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"A({]!ysBt8n)4fykC8v]"],[1,"n){c^)*:wag#iH-wQTWn"],[0,"\">recove"]],"start1":1693,"start2":1693,"length1":36,"length2":36},{"diffs":[[0,"over"],[-1,"ing lost line"],[1,"y when line is lost"],[0,"</co"]],"start1":1796,"start2":1796,"length1":21,"length2":27},{"diffs":[[0,"=\"NUM\">2"],[-1,"5"],[1,"0"],[0,"</field>"]],"start1":1887,"start2":1887,"length1":17,"length2":17},{"diffs":[[0,"AR\" id=\""],[-1,"TRSr/Ie7-ZOH8Hu-uf`U"],[1,"V|6OzsTfh9kbGZrKG;+K"],[0,"\">lastTu"]],"start1":1969,"start2":1969,"length1":36,"length2":36},{"diffs":[[0,"tion"],[-1," (helps when line is lost)"],[0,"</co"]],"start1":2069,"start2":2069,"length1":34,"length2":8},{"diffs":[[0,"/block></value><"],[1,"next><block type=\"variables_set\"><field name=\"VAR\" id=\"ZoB({=W0Y]:5;NvUBi:8\">Kp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Proportional Control Gain\nProportional gain for smoother corrections</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0.5</field></shadow></value></block></next><"],[0,"/block></next></"]],"start1":2217,"start2":2217,"length1":32,"length2":345},{"diffs":[[0,"x=\"3"],[-1,"4"],[1,"8"],[0,"8\" y=\""],[-1,"20\"><statement name=\"HANDLER\""],[1,"35\"><comment pinned=\"false\" h=\"80\" w=\"160\">Proportional gain for smoother corrections\nProportional Control Logic</comment><statement name=\"HANDLER\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Ghost</field><next"],[0,"><bl"]],"start1":2662,"start2":2662,"length1":44,"length2":237},{"diffs":[[0,"AR\" id=\""],[-1,"kJ5B8Lq7pltEo|Yz+~CT"],[1,"Gl[WHe|#C^oEl9Qt8iHt"],[0,"\">distan"]],"start1":2938,"start2":2938,"length1":36,"length2":36},{"diffs":[[0,"ance"],[-1," Maneuver"],[0,"</co"]],"start1":3294,"start2":3294,"length1":17,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"kJ5B8Lq7pltEo|Yz+~CT"],[1,"Gl[WHe|#C^oEl9Qt8iHt"],[0,"\">distan"]],"start1":3714,"start2":3714,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"O|j1V1X(y)pkZS(NRT7["],[1,"pJgp#X[DP{bTYV##,A`*"],[0,"\">obstac"]],"start1":3897,"start2":3897,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"kJ5B8Lq7pltEo|Yz+~CT"],[1,"Gl[WHe|#C^oEl9Qt8iHt"],[0,"\">di"]],"start1":4249,"start2":4249,"length1":28,"length2":28},{"diffs":[[0,"ld><"],[-1,"next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Check left and right to decide escape route"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Stop the robot if an obstacle is detected</comment><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Wait for 0.2 seconds"],[0,"</co"]],"start1":4522,"start2":4522,"length1":333,"length2":189},{"diffs":[[0,"nt><value name=\""],[-1,"speed"],[1,"pause"],[0,"\"><shadow type=\""]],"start1":4714,"start2":4714,"length1":37,"length2":37},{"diffs":[[0,"pe=\""],[-1,"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"timePicker\""],[0,"><fi"]],"start1":4747,"start2":4747,"length1":80,"length2":19},{"diffs":[[0,"field name=\""],[-1,"SLIDER\">"],[1,"ms\">20"],[0,"0</field></s"]],"start1":4764,"start2":4764,"length1":32,"length2":30},{"diffs":[[0,"ow><"],[-1,"block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$6*$hTwa(3hdDi]fvMr8\">leftCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field"],[1,"/value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"return;\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Skip the rest of the loop</comment></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"4pM4G~l~ZppBdW);@T}O\">leftSensor</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read sensor values</comment"],[0,"><va"]],"start1":4797,"start2":4797,"length1":581,"length2":429},{"diffs":[[0,"nt><value name=\""],[-1,"speed"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":5220,"start2":5220,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":5264,"start2":5264,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":5267,"start2":5267,"length1":38,"length2":35},{"diffs":[[0,"block type=\""],[-1,"variables_get"],[1,"read_Patrol"],[0,"\"><field nam"]],"start1":5307,"start2":5307,"length1":37,"length2":35},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300"],[1,"patrol\">maqueen.Patrol.PatrolLeft"],[0,"</fi"]],"start1":5341,"start2":5341,"length1":171,"length2":41},{"diffs":[[0,"olLeft</field></"],[-1,"shadow"],[1,"block"],[0,"></value><next><"]],"start1":5372,"start2":5372,"length1":38,"length2":37},{"diffs":[[0,"id=\""],[-1,"1c4aY1E{4=v8-j@l9e26"],[1,"vfzR!P^O=k+LXpDyH-23"],[0,"\">right"],[-1,"Check"],[1,"Sensor"],[0,"</fi"]],"start1":5454,"start2":5454,"length1":40,"length2":41},{"diffs":[[0,"pe=\""],[-1,"ultrasonic_sensor\"></block></value><next><block type=\"motor_motorStop"],[1,"read_Patrol"],[0,"\"><f"]],"start1":5591,"start2":5591,"length1":77,"length2":19},{"diffs":[[0,"l\"><field name=\""],[-1,"motors"],[1,"patrol"],[0,"\">maqueen.Motors"]],"start1":5605,"start2":5605,"length1":38,"length2":38},{"diffs":[[0,"een."],[-1,"Motors.All</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200"],[1,"Patrol.PatrolRight"],[0,"</fi"]],"start1":5633,"start2":5633,"length1":125,"length2":26},{"diffs":[[0,"lRight</field></"],[-1,"shadow"],[1,"block"],[0,"></value><next><"]],"start1":5649,"start2":5649,"length1":38,"length2":37},{"diffs":[[0,"utation elseif=\""],[-1,"1"],[1,"2"],[0,"\" else=\"1\"></mut"]],"start1":5713,"start2":5713,"length1":33,"length2":33},{"diffs":[[0,"ock type=\"logic_"],[-1,"compare"],[1,"operation"],[0,"\"><field name=\"O"]],"start1":5842,"start2":5842,"length1":39,"length2":41},{"diffs":[[0,"field name=\"OP\">"],[-1,"GT"],[1,"AND"],[0,"</field><value n"]],"start1":5870,"start2":5870,"length1":34,"length2":35},{"diffs":[[0,"hadow type=\""],[-1,"math_number"],[1,"logic_boolean"],[0,"\"><field nam"]],"start1":5915,"start2":5915,"length1":35,"length2":37},{"diffs":[[0,"n\"><field name=\""],[-1,"NUM\">0"],[1,"BOOL\">TRUE"],[0,"</field></shadow"]],"start1":5939,"start2":5939,"length1":38,"length2":42},{"diffs":[[0,"block type=\""],[-1,"variables_get"],[1,"logic_compare"],[0,"\"><field nam"]],"start1":5983,"start2":5983,"length1":37,"length2":37},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"$6*$hTwa(3hdDi]fvMr8\">leftCheck</field></block></value"],[1,"OP\">EQ</field"],[0,"><va"]],"start1":6019,"start2":6019,"length1":71,"length2":21},{"diffs":[[0,"ld><value name=\""],[-1,"B"],[1,"A"],[0,"\"><shadow type=\""]],"start1":6034,"start2":6034,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</field></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn left to avoid</comment"],[1,"4pM4G~l~ZppBdW);@T}O\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value"],[0,"><va"]],"start1":6162,"start2":6162,"length1":290,"length2":166},{"diffs":[[0,"ue><value name=\""],[-1,"speed"],[1,"B"],[0,"\"><shadow type=\""]],"start1":6322,"start2":6322,"length1":37,"length2":33},{"diffs":[[0,"pe=\""],[-1,"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"logic_boolean\""],[0,"><fi"]],"start1":6351,"start2":6351,"length1":80,"length2":22},{"diffs":[[0,"field name=\""],[-1,"SLIDER\">0"],[1,"BOOL\">TRUE"],[0,"</field></sh"]],"start1":6371,"start2":6371,"length1":33,"length2":34},{"diffs":[[0,"pe=\""],[-1,"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW"],[1,"logic_compare\"><field name=\"OP\">EQ"],[0,"</fi"]],"start1":6419,"start2":6419,"length1":212,"length2":42},{"diffs":[[0,"ld><value name=\""],[-1,"speed"],[1,"A"],[0,"\"><shadow type=\""]],"start1":6462,"start2":6462,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":6502,"start2":6502,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":6505,"start2":6505,"length1":38,"length2":35},{"diffs":[[0,"id=\""],[-1,"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\""],[1,"vfzR!P^O=k+LXpDyH-23\">rightSensor</field></block></value"],[0,"><va"]],"start1":6590,"start2":6590,"length1":95,"length2":64},{"diffs":[[0,"ue><value name=\""],[-1,"pause"],[1,"B"],[0,"\"><shadow type=\""]],"start1":6648,"start2":6648,"length1":37,"length2":33},{"diffs":[[0,"hadow type=\""],[-1,"timePick"],[1,"math_numb"],[0,"er\"><field n"]],"start1":6669,"start2":6669,"length1":32,"length2":33},{"diffs":[[0,"r\"><field name=\""],[-1,"ms\">500"],[1,"NUM\">1"],[0,"</field></shadow"]],"start1":6691,"start2":6691,"length1":39,"length2":38},{"diffs":[[0,"value></block></"],[-1,"next"],[1,"value"],[0,"></block></next>"]],"start1":6732,"start2":6732,"length1":36,"length2":37},{"diffs":[[0,"k></"],[-1,"next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field"],[1,"value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><comment pinned=\"false\" h=\"80\" w=\"160\">Line is to the left</comment"],[0,"><va"]],"start1":6760,"start2":6760,"length1":174,"length2":188},{"diffs":[[0,"nt><value name=\""],[-1,"A"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":6942,"start2":6942,"length1":33,"length2":37},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"0"],[1,"-1"],[0,"</field></shadow"]],"start1":6994,"start2":6994,"length1":33,"length2":34},{"diffs":[[0,"field></shadow><"],[1,"/value><next><"],[0,"block type=\"vari"]],"start1":7014,"start2":7014,"length1":32,"length2":46},{"diffs":[[0,"type=\"variables_"],[-1,"g"],[1,"s"],[0,"et\"><field name="]],"start1":7050,"start2":7050,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"1c4aY1E{4=v8-j@l9e26\">rightCheck</field></block></value"],[1,"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data"],[0,"><va"]],"start1":7089,"start2":7089,"length1":63,"length2":91},{"diffs":[[0,"ta><value name=\""],[-1,"B"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":7174,"start2":7174,"length1":33,"length2":37},{"diffs":[[0,"block type=\""],[-1,"variables_ge"],[1,"tex"],[0,"t\"><field na"]],"start1":7261,"start2":7261,"length1":36,"length2":27},{"diffs":[[0,"me=\""],[-1,"VAR\" id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold"],[1,"TEXT\">left"],[0,"</fi"]],"start1":7288,"start2":7288,"length1":56,"length2":18},{"diffs":[[0,"value></block></"],[-1,"value><"],[1,"next></block></"],[0,"statement name=\""]],"start1":7320,"start2":7320,"length1":39,"length2":47},{"diffs":[[0,"ment"],[1,"><value"],[0," name=\""],[-1,"DO"],[1,"IF"],[0,"1\"><"],[-1,"block"],[1,"shadow"],[0," type=\""],[-1,"motor_MotorRu"],[1,"logic_boolea"],[0,"n\"><"]],"start1":7356,"start2":7356,"length1":46,"length2":53},{"diffs":[[0,"me=\""],[-1,"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn right to avoid</comment"],[1,"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field"],[0,"><va"]],"start1":7417,"start2":7417,"length1":147,"length2":92},{"diffs":[[0,"ld><value name=\""],[-1,"speed"],[1,"A"],[0,"\"><shadow type=\""]],"start1":7503,"start2":7503,"length1":37,"length2":33},{"diffs":[[0,"pe=\""],[-1,"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"logic_boolean\""],[0,"><fi"]],"start1":7532,"start2":7532,"length1":80,"length2":22},{"diffs":[[0,"field name=\""],[-1,"SLIDER\">0"],[1,"BOOL\">TRUE"],[0,"</field></sh"]],"start1":7552,"start2":7552,"length1":33,"length2":34},{"diffs":[[0,"pe=\""],[-1,"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW"],[1,"logic_compare\"><field name=\"OP\">EQ"],[0,"</fi"]],"start1":7600,"start2":7600,"length1":213,"length2":42},{"diffs":[[0,"ld><value name=\""],[-1,"speed"],[1,"A"],[0,"\"><shadow type=\""]],"start1":7643,"start2":7643,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":7683,"start2":7683,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":7686,"start2":7686,"length1":38,"length2":35},{"diffs":[[0,"id=\""],[-1,"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\""],[1,"4pM4G~l~ZppBdW);@T}O\">leftSensor</field></block></value"],[0,"><va"]],"start1":7771,"start2":7771,"length1":95,"length2":63},{"diffs":[[0,"ue><value name=\""],[-1,"pause"],[1,"B"],[0,"\"><shadow type=\""]],"start1":7828,"start2":7828,"length1":37,"length2":33},{"diffs":[[0,"hadow type=\""],[-1,"timePick"],[1,"math_numb"],[0,"er\"><field n"]],"start1":7849,"start2":7849,"length1":32,"length2":33},{"diffs":[[0,"r\"><field name=\""],[-1,"ms\">500"],[1,"NUM\">1"],[0,"</field></shadow"]],"start1":7871,"start2":7871,"length1":39,"length2":38},{"diffs":[[0,"k></"],[-1,"next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">If no escape route is available, back up and retry</comment"],[1,"value"],[0,"><va"]],"start1":7924,"start2":7924,"length1":284,"length2":13},{"diffs":[[0,"ue><value name=\""],[-1,"speed"],[1,"B"],[0,"\"><shadow type=\""]],"start1":7931,"start2":7931,"length1":37,"length2":33},{"diffs":[[0,"pe=\""],[-1,"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"logic_boolean\""],[0,"><fi"]],"start1":7960,"start2":7960,"length1":80,"length2":22},{"diffs":[[0,"field name=\""],[-1,"SLIDER\">0"],[1,"BOOL\">TRUE"],[0,"</field></sh"]],"start1":7980,"start2":7980,"length1":33,"length2":34},{"diffs":[[0,"pe=\""],[-1,"variables_get\"><field name=\"VAR\" id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW"],[1,"logic_compare\"><field name=\"OP\">EQ"],[0,"</fi"]],"start1":8028,"start2":8028,"length1":217,"length2":42},{"diffs":[[0,"ld><value name=\""],[-1,"speed"],[1,"A"],[0,"\"><shadow type=\""]],"start1":8071,"start2":8071,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":8111,"start2":8111,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":8114,"start2":8114,"length1":38,"length2":35},{"diffs":[[0,"id=\""],[-1,"A({]!ysBt8n)4fykC8v]\">recoverySpeed</field></block></value><next><block type=\"device_pause\""],[1,"vfzR!P^O=k+LXpDyH-23\">rightSensor</field></block></value"],[0,"><va"]],"start1":8199,"start2":8199,"length1":99,"length2":64},{"diffs":[[0,"ue><value name=\""],[-1,"pause"],[1,"B"],[0,"\"><shadow type=\""]],"start1":8257,"start2":8257,"length1":37,"length2":33},{"diffs":[[0,"hadow type=\""],[-1,"timePick"],[1,"math_numb"],[0,"er\"><field n"]],"start1":8278,"start2":8278,"length1":32,"length2":33},{"diffs":[[0,"me=\""],[-1,"ms\">50"],[1,"NUM\">"],[0,"0</f"]],"start1":8312,"start2":8312,"length1":14,"length2":13},{"diffs":[[0,"k></"],[-1,"next></block></next></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"return;\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Skip the rest of the loop to execute obstacle avoidance</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next"],[1,"value></block></value><statement name=\"DO1\""],[0,"><bl"]],"start1":8353,"start2":8353,"length1":470,"length2":51},{"diffs":[[0,"id=\""],[-1,"$yz3RNjf2IlRQ[UKx#~B\">leftSens"],[1,"J-XpsoL=QPJ]=i(^8=x)\">err"],[0,"or</"]],"start1":8447,"start2":8447,"length1":38,"length2":33},{"diffs":[[0,"60\">"],[-1,"Read line sensors"],[1,"Line is to the right"],[0,"</co"]],"start1":8521,"start2":8521,"length1":25,"length2":28},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"0"],[1,"1"],[0,"</field></shadow"]],"start1":8604,"start2":8604,"length1":33,"length2":33},{"diffs":[[0,"ow><"],[-1,"block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"WqmFsdU[dk9?22qJOerr\">rightSensor</field"],[1,"/value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data"],[0,"><va"]],"start1":8635,"start2":8635,"length1":199,"length2":154},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"text"],[0,"\"><field nam"]],"start1":8870,"start2":8870,"length1":35,"length2":28},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolRight</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Line Following Logic (WITHOUT proportional control)</com"],[1,"TEXT\">right</field></block></value></block></next></block></state"],[0,"ment"]],"start1":8897,"start2":8897,"length1":234,"length2":73},{"diffs":[[0,"><value name=\"IF"],[-1,"0"],[1,"2"],[0,"\"><shadow type=\""]],"start1":8970,"start2":8970,"length1":33,"length2":33},{"diffs":[[0,"AR\" id=\""],[-1,"$yz3RNjf2IlRQ[UKx#~B"],[1,"4pM4G~l~ZppBdW);@T}O"],[0,"\">leftSe"]],"start1":9377,"start2":9377,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"WqmFsdU[dk9?22qJOerr"],[1,"vfzR!P^O=k+LXpDyH-23"],[0,"\">rightS"]],"start1":9805,"start2":9805,"length1":36,"length2":36},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"1"],[1,"0"],[0,"</field></shadow"]],"start1":9915,"start2":9915,"length1":33,"length2":33},{"diffs":[[0,"atement name=\"DO"],[-1,"0"],[1,"2"],[0,"\"><block type=\"m"]],"start1":9992,"start2":9992,"length1":33,"length2":33},{"diffs":[[0,"block type=\""],[-1,"motor_MotorRun"],[1,"variables_set"],[0,"\"><field nam"]],"start1":10012,"start2":10012,"length1":38,"length2":37},{"diffs":[[0,"me=\""],[-1,"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW"],[1,"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error"],[0,"</fi"]],"start1":10048,"start2":10048,"length1":73,"length2":44},{"diffs":[[0," is "],[-1,"to the left -&gt; Turn left"],[1,"centered"],[0,"</co"]],"start1":10139,"start2":10139,"length1":35,"length2":16},{"diffs":[[0,"nt><value name=\""],[-1,"speed"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":10158,"start2":10158,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":10202,"start2":10202,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":10205,"start2":10205,"length1":38,"length2":35},{"diffs":[[0,"ow><"],[-1,"block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block"],[1,"/value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors on the surface (white) - recover based on last turn</comment"],[0,"><"],[-1,"/"],[0,"value"],[-1,"><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW"],[1," name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ"],[0,"</fi"]],"start1":10241,"start2":10241,"length1":224,"length2":372},{"diffs":[[0,"ld><value name=\""],[-1,"speed"],[1,"A"],[0,"\"><shadow type=\""]],"start1":10614,"start2":10614,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":10654,"start2":10654,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":10657,"start2":10657,"length1":38,"length2":35},{"diffs":[[0,"id=\""],[-1,"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field"],[1,"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field></block></value"],[0,"><va"]],"start1":10742,"start2":10742,"length1":156,"length2":61},{"diffs":[[0,"ue><value name=\""],[-1,"VALUE"],[1,"B"],[0,"\"><shadow type=\""]],"start1":10797,"start2":10797,"length1":37,"length2":33},{"diffs":[[0,"k></"],[-1,"next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation"],[1,"value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><value name=\"VALUE\"><shadow type=\"math_number"],[0,"\"><f"]],"start1":10951,"start2":10951,"length1":163,"length2":166},{"diffs":[[0,"r\"><field name=\""],[-1,"OP\">AND"],[1,"NUM\">-1"],[0,"</field><value n"]],"start1":11112,"start2":11112,"length1":39,"length2":39},{"diffs":[[0,"NUM\">-1</field><"],[1,"/shadow></value></block></statement><"],[0,"value name=\"A\"><"]],"start1":11128,"start2":11128,"length1":32,"length2":69},{"diffs":[[0,"nt><value name=\""],[-1,"A"],[1,"IF1"],[0,"\"><shadow type=\""]],"start1":11177,"start2":11177,"length1":33,"length2":35},{"diffs":[[0,"id=\""],[-1,"$yz3RNjf2IlRQ[UKx#~B\">leftSensor"],[1,"V|6OzsTfh9kbGZrKG;+K\">lastTurn"],[0,"</fi"]],"start1":11447,"start2":11447,"length1":40,"length2":38},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"1"],[1,"0"],[0,"</field></shadow"]],"start1":11550,"start2":11550,"length1":33,"length2":33},{"diffs":[[0,"ow><"],[-1,"/value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ"],[1,"block type=\"text\"><field name=\"TEXT\">right</field></block></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error"],[0,"</fi"]],"start1":11581,"start2":11581,"length1":163,"length2":189},{"diffs":[[0,"ld><value name=\""],[-1,"A"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":11771,"start2":11771,"length1":33,"length2":37},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"0"],[1,"1"],[0,"</field></shadow"]],"start1":11823,"start2":11823,"length1":33,"length2":33},{"diffs":[[0,"field></shadow><"],[1,"/value></block></statement><statement name=\"ELSE\"><"],[0,"block type=\"vari"]],"start1":11842,"start2":11842,"length1":32,"length2":83},{"diffs":[[0,"type=\"variables_"],[-1,"g"],[1,"s"],[0,"et\"><field name="]],"start1":11915,"start2":11915,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"WqmFsdU[dk9?22qJOerr\">rightSensor</field></block></value"],[1,"J-XpsoL=QPJ]=i(^8=x)\">error</field"],[0,"><va"]],"start1":11954,"start2":11954,"length1":64,"length2":42},{"diffs":[[0,"ld><value name=\""],[-1,"B"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":11990,"start2":11990,"length1":33,"length2":37},{"diffs":[[0,"value></block></"],[-1,"value"],[1,"statement"],[0,"></block></value"]],"start1":12078,"start2":12078,"length1":37,"length2":41},{"diffs":[[0,"ement></block></"],[-1,"value><"],[0,"statement name=\""]],"start1":12098,"start2":12098,"length1":39,"length2":32},{"diffs":[[0,"></statement"],[-1," name=\"DO1\""],[1,"><next"],[0,"><block type"]],"start1":12111,"start2":12111,"length1":35,"length2":30},{"diffs":[[0,"block type=\""],[-1,"motor_MotorRun"],[1,"variables_set"],[0,"\"><field nam"]],"start1":12131,"start2":12131,"length1":38,"length2":37},{"diffs":[[0,"me=\""],[-1,"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Line is to the right -&gt; Turn right"],[1,"VAR\" id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Calculate motor speeds using proportional control"],[0,"</co"]],"start1":12167,"start2":12167,"length1":156,"length2":149},{"diffs":[[0,"nt><value name=\""],[-1,"speed"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":12319,"start2":12319,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":12363,"start2":12363,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":12366,"start2":12366,"length1":38,"length2":35},{"diffs":[[0,"pe=\""],[-1,"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW"],[1,"math_arithmetic\"><field name=\"OP\">MINUS"],[0,"</fi"]],"start1":12414,"start2":12414,"length1":213,"length2":47},{"diffs":[[0,"ld><value name=\""],[-1,"speed"],[1,"A"],[0,"\"><shadow type=\""]],"start1":12462,"start2":12462,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":12502,"start2":12502,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":12505,"start2":12505,"length1":38,"length2":35},{"diffs":[[0,"id=\""],[-1,"~Ee@)%Y8n0hIQ]I:{#S_\">turn"],[1,"]W@c/xo6F_Q+-!:x~UoS\">base"],[0,"Spee"]],"start1":12590,"start2":12590,"length1":34,"length2":34},{"diffs":[[0,"ue><"],[-1,"next><block type=\"variables_set\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field><"],[0,"valu"]],"start1":12646,"start2":12646,"length1":102,"length2":8},{"diffs":[[0,"ue><value name=\""],[-1,"VALUE"],[1,"B"],[0,"\"><shadow type=\""]],"start1":12646,"start2":12646,"length1":37,"length2":33},{"diffs":[[0,"pe=\""],[-1,"text\"><field name=\"TEXT\">right</field></block></value></block></next></block></next></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation"],[1,"math_arithmetic"],[0,"\"><f"]],"start1":12737,"start2":12737,"length1":227,"length2":23},{"diffs":[[0,"field name=\"OP\">"],[-1,"AND"],[1,"MULTIPLY"],[0,"</field><value n"]],"start1":12759,"start2":12759,"length1":35,"length2":40},{"diffs":[[0,"hadow type=\""],[-1,"logic_boolean"],[1,"math_number"],[0,"\"><field nam"]],"start1":12809,"start2":12809,"length1":37,"length2":35},{"diffs":[[0,"field name=\""],[-1,"BOOL\">TRUE"],[1,"NUM\">0"],[0,"</field></sh"]],"start1":12835,"start2":12835,"length1":34,"length2":30},{"diffs":[[0,"block type=\""],[-1,"logic_compare"],[1,"math_arithmetic"],[0,"\"><field nam"]],"start1":12871,"start2":12871,"length1":37,"length2":39},{"diffs":[[0,"field name=\"OP\">"],[-1,"EQ"],[1,"MULTIPLY"],[0,"</field><value n"]],"start1":12901,"start2":12901,"length1":34,"length2":40},{"diffs":[[0,"id=\""],[-1,"$yz3RNjf2IlRQ[UKx#~B\">leftSensor"],[1,"ZoB({=W0Y]:5;NvUBi:8\">Kp"],[0,"</fi"]],"start1":13058,"start2":13058,"length1":40,"length2":32},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"1"],[1,"0"],[0,"</field></shadow"]],"start1":13155,"start2":13155,"length1":33,"length2":33},{"diffs":[[0,"ow><"],[-1,"/value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field></block></value></block></value"],[0,"><va"]],"start1":13186,"start2":13186,"length1":170,"length2":123},{"diffs":[[0,"ue><value name=\""],[-1,"A"],[1,"B"],[0,"\"><shadow type=\""]],"start1":13303,"start2":13303,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"WqmFsdU[dk9?22qJOerr\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1"],[1,"dtkK;plNvPF+gY0`Kx4m\">turnSpeed"],[0,"</fi"]],"start1":13431,"start2":13431,"length1":127,"length2":39},{"diffs":[[0,"nSpeed</field></"],[-1,"shadow"],[1,"block"],[0,"></value></block"]],"start1":13460,"start2":13460,"length1":38,"length2":37},{"diffs":[[0,"ue><"],[-1,"statement name=\"DO2\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors on black -&gt; Move forward</comment"],[1,"next><block type=\"variables_set\"><field name=\"VAR\" id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field"],[0,"><va"]],"start1":13519,"start2":13519,"length1":231,"length2":107},{"diffs":[[0,"ld><value name=\""],[-1,"speed"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":13620,"start2":13620,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":13664,"start2":13664,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":13667,"start2":13667,"length1":38,"length2":35},{"diffs":[[0,"pe=\""],[-1,"variables_get\"><field name=\"VAR\" id=\"7QjfqE2:$jL-g?Q~6iw{\">baseSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW"],[1,"math_arithmetic\"><field name=\"OP\">ADD"],[0,"</fi"]],"start1":13715,"start2":13715,"length1":212,"length2":45},{"diffs":[[0,"ld><value name=\""],[-1,"speed"],[1,"A"],[0,"\"><shadow type=\""]],"start1":13761,"start2":13761,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":13801,"start2":13801,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":13804,"start2":13804,"length1":38,"length2":35},{"diffs":[[0,"id=\""],[-1,"7QjfqE2:$jL-g?Q~6iw{"],[1,"]W@c/xo6F_Q+-!:x~UoS"],[0,"\">ba"]],"start1":13889,"start2":13889,"length1":28,"length2":28},{"diffs":[[0,"ue><"],[-1,"/block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors lost the line -&gt; Recover based on last known turn</comment"],[1,"value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field"],[0,"><va"]],"start1":13945,"start2":13945,"length1":245,"length2":148},{"diffs":[[0,"ld><value name=\""],[-1,"IF0"],[1,"A"],[0,"\"><shadow type=\""]],"start1":14087,"start2":14087,"length1":35,"length2":33},{"diffs":[[0,"hadow type=\""],[-1,"logic_boolean"],[1,"math_number"],[0,"\"><field nam"]],"start1":14108,"start2":14108,"length1":37,"length2":35},{"diffs":[[0,"field name=\""],[-1,"BOOL\">TRUE"],[1,"NUM\">0"],[0,"</field></sh"]],"start1":14134,"start2":14134,"length1":34,"length2":30},{"diffs":[[0,"block type=\""],[-1,"logic_compare"],[1,"math_arithmetic"],[0,"\"><field nam"]],"start1":14170,"start2":14170,"length1":37,"length2":39},{"diffs":[[0,"field name=\"OP\">"],[-1,"EQ"],[1,"MULTIPLY"],[0,"</field><value n"]],"start1":14200,"start2":14200,"length1":34,"length2":40},{"diffs":[[0,"id=\""],[-1,"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn"],[1,"ZoB({=W0Y]:5;NvUBi:8\">Kp"],[0,"</fi"]],"start1":14357,"start2":14357,"length1":38,"length2":32},{"diffs":[[0,"ow><block type=\""],[-1,"tex"],[1,"variables_ge"],[0,"t\"><field name=\""]],"start1":14485,"start2":14485,"length1":35,"length2":44},{"diffs":[[0,"field name=\""],[-1,"TEXT\">left"],[1,"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error"],[0,"</field></bl"]],"start1":14517,"start2":14517,"length1":34,"length2":60},{"diffs":[[0,"ue><"],[-1,"statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><"],[0,"valu"]],"start1":14602,"start2":14602,"length1":145,"length2":8},{"diffs":[[0,"ue><value name=\""],[-1,"speed"],[1,"B"],[0,"\"><shadow type=\""]],"start1":14602,"start2":14602,"length1":37,"length2":33},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":14642,"start2":14642,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":14645,"start2":14645,"length1":38,"length2":35},{"diffs":[[0,"AR\" id=\""],[-1,"~Ee@)%Y8n0hIQ]I:{#S_"],[1,"dtkK;plNvPF+gY0`Kx4m"],[0,"\">turnSp"]],"start1":14726,"start2":14726,"length1":36,"length2":36},{"diffs":[[0,"/block></value><"],[1,"/block></value></block></value><"],[0,"next><block type"]],"start1":14774,"start2":14774,"length1":32,"length2":64},{"diffs":[[0,"block type=\""],[-1,"motor_MotorRun"],[1,"variables_set"],[0,"\"><field nam"]],"start1":14828,"start2":14828,"length1":38,"length2":37},{"diffs":[[0,"me=\""],[-1,"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field"],[1,"VAR\" id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Constrain motor speeds to avoid extreme values</comment"],[0,"><va"]],"start1":14864,"start2":14864,"length1":79,"length2":155},{"diffs":[[0,"nt><value name=\""],[-1,"speed"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":15013,"start2":15013,"length1":37,"length2":37},{"diffs":[[0,"mber"],[-1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[1,"\""],[0,"><fi"]],"start1":15057,"start2":15057,"length1":69,"length2":9},{"diffs":[[0,"r\"><field name=\""],[-1,"SLIDER"],[1,"NUM"],[0,"\">0</field></sha"]],"start1":15060,"start2":15060,"length1":38,"length2":35},{"diffs":[[0,"pe=\""],[-1,"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value></block></next"],[1,"math_constrain_value\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field></block></value><value name=\"low\"><block type=\"variables_get\"><field name=\"VAR\" id=\"n){c^)*:wag#iH-wQTWn\">recoverySpeed</field"],[0,"></b"]],"start1":15108,"start2":15108,"length1":114,"length2":270},{"diffs":[[0,"d></block></"],[-1,"statement"],[1,"value"],[0,"><value name"]],"start1":15373,"start2":15373,"length1":33,"length2":29},{"diffs":[[0,"me=\""],[-1,"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow"],[1,"high\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</field></block></value></block></value><next"],[0,"><bl"]],"start1":15400,"start2":15400,"length1":81,"length2":140},{"diffs":[[0,"block type=\""],[-1,"logic_compare"],[1,"variables_set"],[0,"\"><field nam"]],"start1":15538,"start2":15538,"length1":37,"length2":37},{"diffs":[[0,"t\"><field name=\""],[-1,"OP\">EQ"],[1,"VAR\" id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed"],[0,"</field><value n"]],"start1":15562,"start2":15562,"length1":38,"length2":78},{"diffs":[[0,"ld><value name=\""],[-1,"A"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":15629,"start2":15629,"length1":33,"length2":37},{"diffs":[[0,"pe=\""],[-1,"variables_get\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow"],[1,"math_constrain_value\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field></block></value><value name=\"low\"><block type=\"variables_get\"><field name=\"VAR\" id=\"n){c^)*:wag#iH-wQTWn\">recoverySpeed</field></block></value><value name=\"high\""],[0,"><bl"]],"start1":15724,"start2":15724,"length1":177,"length2":306},{"diffs":[[0,"h\"><block type=\""],[-1,"tex"],[1,"variables_ge"],[0,"t\"><field name=\""]],"start1":16024,"start2":16024,"length1":35,"length2":44},{"diffs":[[0,"field name=\""],[-1,"TEXT\">right"],[1,"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed"],[0,"</field></bl"]],"start1":16056,"start2":16056,"length1":35,"length2":64},{"diffs":[[0,"/value><"],[-1,"statement name=\"DO1\""],[1,"next"],[0,"><block "]],"start1":16141,"start2":16141,"length1":36,"length2":20},{"diffs":[[0,".Dir.CW</field><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Set motor speeds</comment><"],[0,"value name=\"spee"]],"start1":16253,"start2":16253,"length1":32,"length2":97},{"diffs":[[0,"id=\""],[-1,"~Ee@)%Y8n0hIQ]I:{#S_\">turn"],[1,"[K|PIXv]5Ie{mGR6xO@W\">leftMotor"],[0,"Spee"]],"start1":16525,"start2":16525,"length1":34,"length2":39},{"diffs":[[0,"een.Dir."],[-1,"C"],[0,"CW</fiel"]],"start1":16691,"start2":16691,"length1":17,"length2":16},{"diffs":[[0,"id=\""],[-1,"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">If no previous direction, stop</comment></block></statement></block></statement"],[1,"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field></block></value"],[0,"><ne"]],"start1":16901,"start2":16901,"length1":316,"length2":68},{"diffs":[[0,"\">Small "],[-1,"d"],[1,"D"],[0,"elay for"]],"start1":17036,"start2":17036,"length1":17,"length2":17},{"diffs":[[0,"for "],[-1,"s"],[1,"S"],[0,"tability"],[1,"\nMinimal delay for faster response"],[0,"</co"]],"start1":17050,"start2":17050,"length1":17,"length2":51},{"diffs":[[0,"me=\"ms\">"],[-1,"5"],[1,"1"],[0,"</field>"]],"start1":17162,"start2":17162,"length1":17,"length2":17},{"diffs":[[0,"/next></block></"],[1,"next></block></next></block></next></block></next></block></next></block></next></block></next></block></"],[0,"statement></bloc"]],"start1":17265,"start2":17265,"length1":32,"length2":137}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"let "],[-1,"rightSensor = 0\nlet leftSensor = 0\nlet rightCheck = 0\nlet leftCheck = 0\nlet distance = 0\n"],[1,"obstacleThreshold = 10;  "],[0,"// O"]],"start1":0,"start2":0,"length1":97,"length2":33},{"diffs":[[0," cm\n"],[-1,"let obstacleThreshold = 10"],[0,"\n// "]],"start1":63,"start2":63,"length1":34,"length2":8},{"diffs":[[0,"ettings\n"],[1,"let baseSpeed = 60;  "],[0,"// Speed"]],"start1":84,"start2":84,"length1":16,"length2":37},{"diffs":[[0,"let "],[-1,"base"],[1,"turn"],[0,"Speed = "],[-1,"60\n"],[1,"40;  "],[0,"// S"]],"start1":144,"start2":144,"length1":23,"length2":25},{"diffs":[[0,"let "],[-1,"turn"],[1,"recovery"],[0,"Speed = "],[-1,"40\n"],[1,"25;  "],[0,"// S"]],"start1":186,"start2":186,"length1":23,"length2":29},{"diffs":[[0,"st line\n"],[-1,"let recoverySpeed = 25"],[0,"\n// Last"]],"start1":237,"start2":237,"length1":38,"length2":16},{"diffs":[[0,"= \"none\""],[1,";\n"],[0,"\nbasic.f"]],"start1":308,"start2":308,"length1":16,"length2":18},{"diffs":[[0,"ion\n    "],[1,"let "],[0,"distance"]],"start1":396,"start2":396,"length1":16,"length2":20},{"diffs":[[0,"Ultrasonic()"],[1,";\n"],[0,"\n    // Obst"]],"start1":427,"start2":427,"length1":24,"length2":26},{"diffs":[[0,"ueen.Motors.All)"],[1,";"],[0,"\n        basic.p"]],"start1":562,"start2":562,"length1":32,"length2":33},{"diffs":[[0,"basic.pause(200)"],[1,";\n"],[0,"\n        // Chec"]],"start1":588,"start2":588,"length1":32,"length2":34},{"diffs":[[0,"r.CW, turnSpeed)"],[1,";"],[0,"\n        basic.p"]],"start1":716,"start2":716,"length1":32,"length2":33},{"diffs":[[0,"basic.pause(300)"],[1,";"],[0,"\n        leftChe"]],"start1":742,"start2":742,"length1":32,"length2":33},{"diffs":[[0,"0);\n        "],[1,"let "],[0,"leftCheck = "]],"start1":756,"start2":756,"length1":24,"length2":28},{"diffs":[[0,"een.Ultrasonic()"],[1,";\n"],[0,"\n        maqueen"]],"start1":788,"start2":788,"length1":32,"length2":34},{"diffs":[[0,"r.CW, turnSpeed)"],[1,";"],[0,"\n        basic.p"]],"start1":861,"start2":861,"length1":32,"length2":33},{"diffs":[[0,"use(300)"],[1,";"],[0,"\n       "]],"start1":895,"start2":895,"length1":16,"length2":17},{"diffs":[[0,"0);\n        "],[1,"let "],[0,"rightCheck ="]],"start1":901,"start2":901,"length1":24,"length2":28},{"diffs":[[0,"asonic()"],[1,";\n"],[0,"\n       "]],"start1":942,"start2":942,"length1":16,"length2":18},{"diffs":[[0,"ueen.Motors.All)"],[1,";"],[0,"\n        basic.p"]],"start1":982,"start2":982,"length1":32,"length2":33},{"diffs":[[0,"use(200)"],[1,";\n"],[0,"\n       "]],"start1":1016,"start2":1016,"length1":16,"length2":18},{"diffs":[[0,".CCW, turnSpeed)"],[1,";"],[0,"\n            maq"]],"start1":1165,"start2":1165,"length1":32,"length2":33},{"diffs":[[0,"r.CW, turnSpeed)"],[1,";"],[0,"\n            bas"]],"start1":1241,"start2":1241,"length1":32,"length2":33},{"diffs":[[0,"basic.pause(500)"],[1,";"],[0,"\n        } else "]],"start1":1271,"start2":1271,"length1":32,"length2":33},{"diffs":[[0,"r.CW, turnSpeed)"],[1,";"],[0,"\n            maq"]],"start1":1435,"start2":1435,"length1":32,"length2":33},{"diffs":[[0,".CCW, turnSpeed)"],[1,";"],[0,"\n            bas"]],"start1":1512,"start2":1512,"length1":32,"length2":33},{"diffs":[[0,"basic.pause(500)"],[1,";"],[0,"\n        } else "]],"start1":1542,"start2":1542,"length1":32,"length2":33},{"diffs":[[0,", recoverySpeed)"],[1,";"],[0,"\n            maq"]],"start1":1706,"start2":1706,"length1":32,"length2":33},{"diffs":[[0,"coverySpeed)"],[1,";"],[0,"\n           "]],"start1":1791,"start2":1791,"length1":24,"length2":25},{"diffs":[[0,"use(500)"],[1,";"],[0,"\n       "]],"start1":1825,"start2":1825,"length1":16,"length2":17},{"diffs":[[0,"      }\n"],[1,"\n"],[0,"       "],[1," return;"],[0," // Skip"]],"start1":1837,"start2":1837,"length1":23,"length2":32},{"diffs":[[0,"nce\n"],[-1,"        return;\n"],[0,"    }\n"],[1,"\n"],[0,"    "]],"start1":1917,"start2":1917,"length1":30,"length2":15},{"diffs":[[0,"ors\n    "],[1,"let "],[0,"leftSens"]],"start1":1949,"start2":1949,"length1":16,"length2":20},{"diffs":[[0,"rolLeft)"],[1,";"],[0,"\n    "],[1,"let "],[0,"rightSen"]],"start1":2011,"start2":2011,"length1":21,"length2":26},{"diffs":[[0,"olRight)"],[1,";\n"],[0,"\n    // "]],"start1":2081,"start2":2081,"length1":16,"length2":18},{"diffs":[[0,".CCW, turnSpeed)"],[1,";"],[0,"\n        maqueen"]],"start1":2297,"start2":2297,"length1":32,"length2":33},{"diffs":[[0,"r.CW, turnSpeed)"],[1,";"],[0,"\n        lastTur"]],"start1":2369,"start2":2369,"length1":32,"length2":33},{"diffs":[[0,"= \"left\""],[1,";"],[0,"\n    } e"]],"start1":2404,"start2":2404,"length1":16,"length2":17},{"diffs":[[0,"r.CW, turnSpeed)"],[1,";"],[0,"\n        maqueen"]],"start1":2568,"start2":2568,"length1":32,"length2":33},{"diffs":[[0,".CCW, turnSpeed)"],[1,";"],[0,"\n        lastTur"]],"start1":2641,"start2":2641,"length1":32,"length2":33},{"diffs":[[0," \"right\""],[1,";"],[0,"\n    } e"]],"start1":2677,"start2":2677,"length1":16,"length2":17},{"diffs":[[0,", baseSpeed)"],[1,";"],[0,"\n        maq"]],"start1":2848,"start2":2848,"length1":24,"length2":25},{"diffs":[[0,", baseSpeed)"],[1,";"],[0,"\n    } else "]],"start1":2920,"start2":2920,"length1":24,"length2":25},{"diffs":[[0,".CCW, turnSpeed)"],[1,";"],[0,"\n            maq"]],"start1":3114,"start2":3114,"length1":32,"length2":33},{"diffs":[[0,"r.CW, turnSpeed)"],[1,";"],[0,"\n        } else "]],"start1":3190,"start2":3190,"length1":32,"length2":33},{"diffs":[[0,"r.CW, turnSpeed)"],[1,";"],[0,"\n            maq"]],"start1":3308,"start2":3308,"length1":32,"length2":33},{"diffs":[[0,"rnSpeed)"],[1,";"],[0,"\n       "]],"start1":3393,"start2":3393,"length1":16,"length2":17},{"diffs":[[0,"ors.All)"],[1,";"],[0,"\n       "]],"start1":3507,"start2":3507,"length1":16,"length2":17},{"diffs":[[0,"    }\n    }\n"],[1,"\n"],[0,"    // Small"]],"start1":3521,"start2":3521,"length1":24,"length2":25},{"diffs":[[0,"e(5)"],[1,";"],[0,"\n})"],[1,";"],[0,"\n"]],"start1":3581,"start2":3581,"length1":8,"length2":10}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":308,"start2":308,"length1":21,"length2":17}]}]},{"timestamp":1739271488501,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"x=\"3"],[-1,"70"],[1,"48"],[0,"\" y=\""],[-1,"16"],[1,"20"],[0,"\"><s"]],"start1":2250,"start2":2250,"length1":17,"length2":17}]}]},{"timestamp":1740048362520,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":308,"start2":308,"length1":17,"length2":21}]}]},{"timestamp":1740048471007,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"basic.forever(function () {\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {"],[1,"let rightSensor = 0\nlet leftSensor = 0\nlet rightCheck = 0\nlet leftCheck = 0\nlet distance = 0\n// Obstacle detection threshold in cm\nlet obstacleThreshold = 10\n// Motor Speed Settings\n// Speed for straight movement\nlet baseSpeed = 60\n// Speed for turning\nlet turnSpeed = 40\n// Speed for recovering lost line\nlet recoverySpeed = 25\n// Last Turn Direction (helps when line is lost)\nlet lastTurn = \"none\"\nbasic.forever(function () {\n    // Read ultrasonic sensor for obstacle detection\n    distance = maqueen.Ultrasonic()\n    // Obstacle Avoidance Maneuver\n    if (distance < obstacleThreshold && distance > 0) {\n        maqueen.motorStop(maqueen.Motors.All)\n        basic.pause(200)\n        // Check left and right to decide escape route"],[0,"\n   "]],"start1":0,"start2":0,"length1":148,"length2":737},{"diffs":[[0,".Motors."],[-1,"All"],[1,"M1"],[0,", maquee"]],"start1":766,"start2":766,"length1":19,"length2":18},{"diffs":[[0,"CW, "],[-1,"50)\n    } else {\n        if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {"],[1,"turnSpeed)\n        basic.pause(300)\n        leftCheck = maqueen.Ultrasonic()\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, turnSpeed)\n        basic.pause(300)\n        rightCheck = maqueen.Ultrasonic()\n        maqueen.motorStop(maqueen.Motors.All)\n        basic.pause(200)\n        if (leftCheck > obstacleThreshold) {\n            // Turn left to avoid"],[0,"\n   "]],"start1":790,"start2":790,"length1":145,"length2":372},{"diffs":[[0,"maqueen.Motors.M"],[-1,"2"],[1,"1"],[0,", maqueen.Dir.CW"]],"start1":1188,"start2":1188,"length1":33,"length2":33},{"diffs":[[0,"M1, maqueen.Dir."],[1,"C"],[0,"CW, "],[-1,"50"],[1,"turnSpeed"],[0,")\n            ma"]],"start1":1203,"start2":1203,"length1":38,"length2":46},{"diffs":[[0,"   maqueen.motor"],[-1,"Stop"],[1,"Run"],[0,"(maqueen.Motors."]],"start1":1244,"start2":1244,"length1":36,"length2":35},{"diffs":[[0,"rs.M"],[-1,"1)\n            if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n    "],[1,"2, maqueen.Dir.CW, turnSpeed)\n            basic.pause(500)\n        } else if (rightCheck > obstacleThreshold) {\n            // Turn right to avoid\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, turnSpeed)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, turnSpeed)\n            basic.pause(500)\n        } else {\n            // If no escape route is available, back up and retry\n"],[0,"    "]],"start1":1276,"start2":1276,"length1":140,"length2":418},{"diffs":[[0,"maqueen.Motors.M"],[-1,"2"],[1,"1"],[0,", maqueen.Dir.CW"]],"start1":1719,"start2":1719,"length1":33,"length2":33},{"diffs":[[0,"maqueen.Dir."],[1,"C"],[0,"CW, "],[-1,"50)\n   "],[1,"recoverySpeed)\n"],[0,"            "]],"start1":1738,"start2":1738,"length1":35,"length2":44},{"diffs":[[0,"ed)\n            "],[-1," "],[0,"maqueen.motorSto"]],"start1":1766,"start2":1766,"length1":33,"length2":32},{"diffs":[[0,"   maqueen.motor"],[-1,"Stop"],[1,"Run"],[0,"(maqueen.Motors."]],"start1":1779,"start2":1779,"length1":36,"length2":35},{"diffs":[[0,"rs.M"],[-1,"1)\n            }\n        } else {\n            if ("],[1,"2, maqueen.Dir.CCW, recoverySpeed)\n            basic.pause(500)\n        }\n        // Skip the rest of the loop to execute obstacle avoidance\n        return;\n    }\n    // Read line sensors\n    leftSensor = "],[0,"maqu"]],"start1":1811,"start2":1811,"length1":58,"length2":213},{"diffs":[[0,".PatrolLeft)"],[-1," == 1 &&"],[1,"\n    rightSensor ="],[0," maqueen.rea"]],"start1":2053,"start2":2053,"length1":32,"length2":42},{"diffs":[[0,"olRight)"],[-1," == 0) {\n        "],[1,"\n    // Line Following Logic (WITHOUT proportional control)\n    if (leftSensor == 0 && rightSensor == 1) {\n        // Line is to the left -> Turn left\n"],[0,"        "]],"start1":2122,"start2":2122,"length1":33,"length2":167},{"diffs":[[0,"een.Dir."],[1,"C"],[0,"CW, "],[-1,"50)\n        "],[1,"turnSpeed)\n"],[0,"        "]],"start1":2329,"start2":2329,"length1":32,"length2":32},{"diffs":[[0,"   maqueen.motor"],[-1,"Stop"],[1,"Run"],[0,"(maqueen.Motors."]],"start1":2358,"start2":2358,"length1":36,"length2":35},{"diffs":[[0,"s.M2"],[-1,")\n                if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n            "],[1,", maqueen.Dir.CW, turnSpeed)\n        lastTurn = \"left\"\n    } else if (leftSensor == 1 && rightSensor == 0) {\n        // Line is to the right -> Turn right\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, turnSpeed)\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, turnSpeed)\n        lastTurn = \"right\"\n    } else if (leftSensor == 1 && rightSensor == 1) {\n        // Both sensors on black -> Move forward\n"],[0,"    "]],"start1":2391,"start2":2391,"length1":151,"length2":436},{"diffs":[[0,"Dir.CW, "],[-1,"50)\n            "],[1,"baseSpeed)\n"],[0,"        "]],"start1":2875,"start2":2875,"length1":32,"length2":27},{"diffs":[[0,"   maqueen.motor"],[-1,"Stop"],[1,"Run"],[0,"(maqueen.Motors."]],"start1":2899,"start2":2899,"length1":36,"length2":35},{"diffs":[[0,"s.M2"],[-1,")\n                }\n                if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n        "],[1,", maqueen.Dir.CW, baseSpeed)\n    } else {\n        // Both sensors lost the line -> Recover based on last known turn\n        if (lastTurn == \"left\") {\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, turnSpeed)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, turnSpeed)\n        } else if (lastTurn == \"right\") {\n"],[0,"    "]],"start1":2932,"start2":2932,"length1":165,"length2":351},{"diffs":[[0,"Dir.CW, "],[-1,"50"],[1,"turnSpeed"],[0,")\n      "]],"start1":3335,"start2":3335,"length1":18,"length2":25},{"diffs":[[0,"        "],[-1,"    } else {\n        "],[1,"maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, turnSpeed)\n        } else {\n            // If no previous direction, stop\n"],[0,"        "]],"start1":3358,"start2":3358,"length1":37,"length2":143},{"diffs":[[0,"ors."],[-1,"M2)\n     "],[1,"All)\n"],[0,"        "],[-1,"   "],[0,"}\n    "],[-1,"        }\n        }\n    }"],[1,"}\n    // Small delay for stability\n    basic.pause(5)"],[0,"\n})\n"]],"start1":3534,"start2":3534,"length1":59,"length2":80}]}]},{"timestamp":1740048955330,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"es><"],[-1,"/variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation"],[1,"variable id=\"kJ5B8Lq7pltEo|Yz+~CT\">distance</variable><variable id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</variable><variable id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</variable><variable id=\"$6*$hTwa(3hdDi]fvMr8\">leftCheck</variable><variable id=\"1c4aY1E{4=v8-j@l9e26\">rightCheck</variable><variable id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</variable><variable id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor</variable><variable id=\"WqmFsdU[dk9?22qJOerr\">rightSensor</variable><variable id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</variable><variable id=\"7QjfqE2:$jL-g?Q~6iw{\">baseSpeed</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</field><comment pinned=\"false\" h=\"80\" w=\"160\">Obstacle detection threshold in cm</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7QjfqE2:$jL-g?Q~6iw{\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Motor Speed Settings\nSpeed for straight movement</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">60</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for turning</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for recovering lost line</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Last Turn Direction (helps when line is lost)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">none</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"370\" y=\"16\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"kJ5B8Lq7pltEo|Yz+~CT\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read ultrasonic sensor for obstacle detection</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Obstacle Avoidance Maneuver</comment"],[0,"><va"]],"start1":63,"start2":63,"length1":141,"length2":2652},{"diffs":[[0,"field name=\"OP\">"],[-1,"EQ"],[1,"LT"],[0,"</field><value n"]],"start1":2971,"start2":2971,"length1":34,"length2":34},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"variables_get"],[0,"\"><field nam"]],"start1":3077,"start2":3077,"length1":35,"length2":37},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolLeft"],[1,"VAR\" id=\"kJ5B8Lq7pltEo|Yz+~CT\">distance"],[0,"</fi"]],"start1":3113,"start2":3113,"length1":41,"length2":47},{"diffs":[[0,"field></shadow><"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</field></block><"],[0,"/value></block><"]],"start1":3244,"start2":3244,"length1":32,"length2":137},{"diffs":[[0,"field name=\"OP\">"],[-1,"EQ"],[1,"GT"],[0,"</field><value n"]],"start1":3502,"start2":3502,"length1":34,"length2":34},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"variables_get"],[0,"\"><field nam"]],"start1":3608,"start2":3608,"length1":35,"length2":37},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolRight"],[1,"VAR\" id=\"kJ5B8Lq7pltEo|Yz+~CT\">distance"],[0,"</fi"]],"start1":3644,"start2":3644,"length1":42,"length2":47},{"diffs":[[0,"me=\"DO0\"><block "],[1,"type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block "],[0,"type=\"motor_Moto"]],"start1":3843,"start2":3843,"length1":32,"length2":239},{"diffs":[[0,">maqueen.Motors."],[-1,"All"],[1,"M1"],[0,"</field><field n"]],"start1":4107,"start2":4107,"length1":35,"length2":34},{"diffs":[[0,".Dir.CW</field><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Check left and right to decide escape route</comment><"],[0,"value name=\"spee"]],"start1":4158,"start2":4158,"length1":32,"length2":124},{"diffs":[[0,"d name=\"SLIDER\">"],[-1,"5"],[0,"0</field></shado"]],"start1":4377,"start2":4377,"length1":33,"length2":32},{"diffs":[[0,"ow><"],[-1,"/value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation else=\"1"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$6*$hTwa(3hdDi]fvMr8\">leftCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0"],[0,"\"></"]],"start1":4408,"start2":4408,"length1":101,"length2":676},{"diffs":[[0,"on><"],[-1,"value"],[1,"field"],[0," name=\""],[-1,"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation"],[1,"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1c4aY1E{4=v8-j@l9e26\">rightCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker"],[0,"\"><f"]],"start1":5090,"start2":5090,"length1":122,"length2":662},{"diffs":[[0,"r\"><field name=\""],[-1,"OP\">AND"],[1,"ms\">200"],[0,"</field><value n"]],"start1":5747,"start2":5747,"length1":39,"length2":39},{"diffs":[[0,"ms\">200</field><"],[1,"/shadow></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><"],[0,"value name=\"A\"><"]],"start1":5763,"start2":5763,"length1":32,"length2":122},{"diffs":[[0,"on><value name=\""],[-1,"A"],[1,"IF0"],[0,"\"><shadow type=\""]],"start1":5865,"start2":5865,"length1":33,"length2":35},{"diffs":[[0,"field name=\"OP\">"],[-1,"EQ"],[1,"GT"],[0,"</field><value n"]],"start1":5984,"start2":5984,"length1":34,"length2":34},{"diffs":[[0,"pe=\""],[-1,"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value"],[1,"variables_get\"><field name=\"VAR\" id=\"$6*$hTwa(3hdDi]fvMr8\">leftCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</field></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn left to avoid</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field"],[0,"><va"]],"start1":6098,"start2":6098,"length1":90,"length2":882},{"diffs":[[0,"ld><value name=\""],[-1,"B"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":6974,"start2":6974,"length1":33,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":7006,"start2":7006,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":7081,"start2":7081,"length1":35,"length2":38},{"diffs":[[0,"ow><"],[-1,"/value></block></value><value name=\"B"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><value name=\"IF1"],[0,"\"><s"]],"start1":7120,"start2":7120,"length1":45,"length2":302},{"diffs":[[0,"field name=\"OP\">"],[-1,"EQ"],[1,"GT"],[0,"</field><value n"]],"start1":7518,"start2":7518,"length1":34,"length2":34},{"diffs":[[0,"pe=\""],[-1,"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value"],[1,"variables_get\"><field name=\"VAR\" id=\"1c4aY1E{4=v8-j@l9e26\">rightCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</field></block></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn right to avoid</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field"],[0,"><va"]],"start1":7632,"start2":7632,"length1":91,"length2":884},{"diffs":[[0,"ld><value name=\""],[-1,"B"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":8510,"start2":8510,"length1":33,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":8542,"start2":8542,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM\">1"],[1,"SLIDER\">0"],[0,"</field></shadow"]],"start1":8617,"start2":8617,"length1":38,"length2":41},{"diffs":[[0,"ow><"],[-1,"/value></block></value></block></value><statement name=\"DO0\""],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">If no escape route is available, back up and retry</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</field></block></value><next"],[0,"><bl"]],"start1":8656,"start2":8656,"length1":68,"length2":783},{"diffs":[[0,"ir\">maqueen.Dir."],[1,"C"],[0,"CW</field><value"]],"start1":9524,"start2":9524,"length1":32,"length2":33},{"diffs":[[0,"d name=\"SLIDER\">"],[-1,"5"],[0,"0</field></shado"]],"start1":9663,"start2":9663,"length1":33,"length2":32},{"diffs":[[0,"ow><"],[-1,"/value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M1</field><next><block type=\"controls_if\""],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"return;\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Skip the rest of the loop to execute obstacle avoidance</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read line sensors</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"WqmFsdU[dk9?22qJOerr\">rightSensor</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Line Following Logic (WITHOUT proportional control)</comment"],[0,"><va"]],"start1":9694,"start2":9694,"length1":128,"length2":1497},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"variables_get"],[0,"\"><field nam"]],"start1":11553,"start2":11553,"length1":35,"length2":37},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolLeft"],[1,"VAR\" id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor"],[0,"</fi"]],"start1":11589,"start2":11589,"length1":41,"length2":49},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"1"],[1,"0"],[0,"</field></shadow"]],"start1":11703,"start2":11703,"length1":33,"length2":33},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"variables_get"],[0,"\"><field nam"]],"start1":11981,"start2":11981,"length1":35,"length2":37},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolRight"],[1,"VAR\" id=\"WqmFsdU[dk9?22qJOerr\">rightSensor"],[0,"</fi"]],"start1":12017,"start2":12017,"length1":42,"length2":50},{"diffs":[[0,"maqueen.Motors.M"],[-1,"2"],[1,"1"],[0,"</field><field n"]],"start1":12277,"start2":12277,"length1":33,"length2":33},{"diffs":[[0,"ir\">maqueen.Dir."],[1,"C"],[0,"CW</field><value"]],"start1":12316,"start2":12316,"length1":32,"length2":33},{"diffs":[[0,"Dir.CCW</field><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Line is to the left -&gt; Turn left</comment><"],[0,"value name=\"spee"]],"start1":12328,"start2":12328,"length1":32,"length2":116},{"diffs":[[0,"d name=\"SLIDER\">"],[-1,"5"],[0,"0</field></shado"]],"start1":12539,"start2":12539,"length1":33,"length2":32},{"diffs":[[0,"field></shadow><"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block><"],[0,"/value><next><bl"]],"start1":12558,"start2":12558,"length1":32,"length2":129},{"diffs":[[0,"type=\"motor_"],[-1,"m"],[1,"M"],[0,"otor"],[-1,"Stop"],[1,"Run"],[0,"\"><field nam"]],"start1":12691,"start2":12691,"length1":33,"length2":32},{"diffs":[[0,"n\"><field name=\""],[-1,"motors"],[1,"index"],[0,"\">maqueen.Motors"]],"start1":12710,"start2":12710,"length1":38,"length2":37},{"diffs":[[0,"maqueen.Motors.M"],[-1,"1"],[1,"2"],[0,"</field></block>"]],"start1":12733,"start2":12733,"length1":33,"length2":33},{"diffs":[[0,"ld><"],[-1,"/block></next></block></statement></block></next"],[1,"field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field"],[0,"></b"]],"start1":12755,"start2":12755,"length1":56,"length2":281},{"diffs":[[0,"k></"],[1,"value><"],[0,"next><"],[-1,"/"],[0,"block"],[-1,"></statement><statement name=\"ELSE\"><block type=\"controls_if\""],[1," type=\"variables_set\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">left</field></block></value></block></next></block></next></block></statement"],[0,"><va"]],"start1":13039,"start2":13039,"length1":81,"length2":306},{"diffs":[[0,"><value name=\"IF"],[-1,"0"],[1,"1"],[0,"\"><shadow type=\""]],"start1":13341,"start2":13341,"length1":33,"length2":33},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"variables_get"],[0,"\"><field nam"]],"start1":13707,"start2":13707,"length1":35,"length2":37},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolLeft"],[1,"VAR\" id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor"],[0,"</fi"]],"start1":13743,"start2":13743,"length1":41,"length2":49},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"variables_get"],[0,"\"><field nam"]],"start1":14135,"start2":14135,"length1":35,"length2":37},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolRight"],[1,"VAR\" id=\"WqmFsdU[dk9?22qJOerr\">rightSensor"],[0,"</fi"]],"start1":14171,"start2":14171,"length1":42,"length2":50},{"diffs":[[0,"atement name=\"DO"],[-1,"0"],[1,"1"],[0,"\"><block type=\"m"]],"start1":14363,"start2":14363,"length1":33,"length2":33},{"diffs":[[0,".Dir.CW</field><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Line is to the right -&gt; Turn right</comment><"],[0,"value name=\"spee"]],"start1":14481,"start2":14481,"length1":32,"length2":118},{"diffs":[[0,"d name=\"SLIDER\">"],[-1,"5"],[0,"0</field></shado"]],"start1":14694,"start2":14694,"length1":33,"length2":32},{"diffs":[[0,"field></shadow><"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block><"],[0,"/value><next><bl"]],"start1":14713,"start2":14713,"length1":32,"length2":129},{"diffs":[[0,"type=\"motor_"],[-1,"m"],[1,"M"],[0,"otor"],[-1,"Stop"],[1,"Run"],[0,"\"><field nam"]],"start1":14846,"start2":14846,"length1":33,"length2":32},{"diffs":[[0,"n\"><field name=\""],[-1,"motors"],[1,"index"],[0,"\">maqueen.Motors"]],"start1":14865,"start2":14865,"length1":38,"length2":37},{"diffs":[[0,"ld><"],[-1,"next><block type=\"controls_if\""],[1,"field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">right</field></block></value></block></next></block></next></block></statement"],[0,"><va"]],"start1":14910,"start2":14910,"length1":38,"length2":592},{"diffs":[[0,"><value name=\"IF"],[-1,"0"],[1,"2"],[0,"\"><shadow type=\""]],"start1":15498,"start2":15498,"length1":33,"length2":33},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"variables_get"],[0,"\"><field nam"]],"start1":15864,"start2":15864,"length1":35,"length2":37},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolLeft"],[1,"VAR\" id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor"],[0,"</fi"]],"start1":15900,"start2":15900,"length1":41,"length2":49},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"variables_get"],[0,"\"><field nam"]],"start1":16292,"start2":16292,"length1":35,"length2":37},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolRight"],[1,"VAR\" id=\"WqmFsdU[dk9?22qJOerr\">rightSensor"],[0,"</fi"]],"start1":16328,"start2":16328,"length1":42,"length2":50},{"diffs":[[0,"atement name=\"DO"],[-1,"0"],[1,"2"],[0,"\"><block type=\"m"]],"start1":16520,"start2":16520,"length1":33,"length2":33},{"diffs":[[0,".Dir.CW</field><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors on black -&gt; Move forward</comment><"],[0,"value name=\"spee"]],"start1":16638,"start2":16638,"length1":32,"length2":121},{"diffs":[[0,"d name=\"SLIDER\">"],[-1,"5"],[0,"0</field></shado"]],"start1":16854,"start2":16854,"length1":33,"length2":32},{"diffs":[[0,"field></shadow><"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"7QjfqE2:$jL-g?Q~6iw{\">baseSpeed</field></block><"],[0,"/value><next><bl"]],"start1":16873,"start2":16873,"length1":32,"length2":129},{"diffs":[[0,"type=\"motor_"],[-1,"m"],[1,"M"],[0,"otor"],[-1,"Stop"],[1,"Run"],[0,"\"><field nam"]],"start1":17006,"start2":17006,"length1":33,"length2":32},{"diffs":[[0,"me=\""],[-1,"motors\">maqueen.Motors.M2</field"],[1,"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7QjfqE2:$jL-g?Q~6iw{\">baseSpeed</field></block></value"],[0,"></b"]],"start1":17037,"start2":17037,"length1":40,"length2":330},{"diffs":[[0,"ck></statement><"],[-1,"next"],[1,"statement name=\"ELSE\""],[0,"><block type=\"co"]],"start1":17384,"start2":17384,"length1":36,"length2":53},{"diffs":[[0,"f\"><mutation"],[1," elseif=\"1\""],[0," else=\"1\"></"]],"start1":17445,"start2":17445,"length1":24,"length2":35},{"diffs":[[0,"\"1\"></mutation><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors lost the line -&gt; Recover based on last known turn</comment><"],[0,"value name=\"IF0\""]],"start1":17474,"start2":17474,"length1":32,"length2":146},{"diffs":[[0,"type=\"logic_"],[-1,"operation"],[1,"compare"],[0,"\"><field nam"]],"start1":17697,"start2":17697,"length1":33,"length2":31},{"diffs":[[0,"field name=\"OP\">"],[-1,"AND"],[1,"EQ"],[0,"</field><value n"]],"start1":17719,"start2":17719,"length1":35,"length2":34},{"diffs":[[0,"hadow type=\""],[-1,"logic_boolean"],[1,"math_number"],[0,"\"><field nam"]],"start1":17763,"start2":17763,"length1":37,"length2":35},{"diffs":[[0,"field name=\""],[-1,"BOOL\">TRUE"],[1,"NUM\">0"],[0,"</field></sh"]],"start1":17789,"start2":17789,"length1":34,"length2":30},{"diffs":[[0,"block type=\""],[-1,"logic_compare"],[1,"variables_get"],[0,"\"><field nam"]],"start1":17825,"start2":17825,"length1":37,"length2":37},{"diffs":[[0,"field name=\""],[-1,"OP\">EQ</field"],[1,"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field></block></value"],[0,"><value name"]],"start1":17853,"start2":17853,"length1":37,"length2":86},{"diffs":[[0,"ue><value name=\""],[-1,"A"],[1,"B"],[0,"\"><shadow type=\""]],"start1":17925,"start2":17925,"length1":33,"length2":33},{"diffs":[[0,"pe=\""],[-1,"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value"],[1,"text\"><field name=\"TEXT\">left</field></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field"],[0,"><va"]],"start1":18016,"start2":18016,"length1":90,"length2":584},{"diffs":[[0,"ld><value name=\""],[-1,"B"],[1,"speed"],[0,"\"><shadow type=\""]],"start1":18594,"start2":18594,"length1":33,"length2":37},{"diffs":[[0,"ype=\"math_number"],[-1,"\""],[1,"_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation"],[0,"><field name=\"NU"]],"start1":18626,"start2":18626,"length1":33,"length2":93},{"diffs":[[0,"on><field name=\""],[-1,"NUM"],[1,"SLIDER"],[0,"\">0</field></sha"]],"start1":18701,"start2":18701,"length1":35,"length2":38},{"diffs":[[0,"shadow><"],[-1,"/value></block></value"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value></block></next></block></statement"],[0,"><value "]],"start1":18736,"start2":18736,"length1":38,"length2":154},{"diffs":[[0,"nt><value name=\""],[-1,"B"],[1,"IF1"],[0,"\"><shadow type=\""]],"start1":18880,"start2":18880,"length1":33,"length2":35},{"diffs":[[0,"block type=\""],[-1,"read_Patrol"],[1,"variables_get"],[0,"\"><field nam"]],"start1":19105,"start2":19105,"length1":35,"length2":37},{"diffs":[[0,"me=\""],[-1,"patrol\">maqueen.Patrol.PatrolRight"],[1,"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn"],[0,"</fi"]],"start1":19141,"start2":19141,"length1":42,"length2":47},{"diffs":[[0,"ow><"],[-1,"/value></block></value></block></value><statement name=\"DO0\""],[1,"block type=\"text\"><field name=\"TEXT\">right</field></block></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next"],[0,"><bl"]],"start1":19284,"start2":19284,"length1":68,"length2":482},{"diffs":[[0,"maqueen.Motors.M"],[-1,"1"],[1,"2"],[0,"</field><field n"]],"start1":19812,"start2":19812,"length1":33,"length2":33},{"diffs":[[0,"ir\">maqueen.Dir."],[1,"C"],[0,"CW</field><value"]],"start1":19851,"start2":19851,"length1":32,"length2":33},{"diffs":[[0,"SLIDER\">"],[-1,"5"],[0,"0</field"]],"start1":19998,"start2":19998,"length1":17,"length2":16},{"diffs":[[0,"field></shadow><"],[-1,"/value"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value></block></next"],[0,"></block></state"]],"start1":20009,"start2":20009,"length1":38,"length2":150},{"diffs":[[0,">maqueen.Motors."],[-1,"M2"],[1,"All"],[0,"</field></block>"]],"start1":20237,"start2":20237,"length1":34,"length2":35},{"diffs":[[0,"ld><"],[-1,"/block></statement></block></next"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">If no previous direction, stop</comment></block></statement></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Small delay for stability</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">5</field></shadow></value"],[0,"></b"]],"start1":20261,"start2":20261,"length1":41,"length2":321},{"diffs":[[0,"t></block></"],[-1,"statemen"],[1,"nex"],[0,"t></block></"]],"start1":20607,"start2":20607,"length1":32,"length2":27},{"diffs":[[0,"t></block></"],[-1,"statemen"],[1,"nex"],[0,"t></block></"]],"start1":20622,"start2":20622,"length1":32,"length2":27},{"diffs":[[0,"t></block></"],[-1,"statemen"],[1,"nex"],[0,"t></block></"]],"start1":20637,"start2":20637,"length1":32,"length2":27}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,") {\n"],[-1,"    let distance = maqueen.Ultrasonic()\n    // Obstacle Avoidance Maneuver\n    if (distance < 10 && distance > 0) {\n        maqueen.motorStop(maqueen.Motors.All)\n        basic.pause(200)\n        // Check left and right to decide escape route\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 40)\n        basic.pause(300)\n        let leftCheck = maqueen.Ultrasonic()\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40)\n        basic.pause(300)\n         let rightCheck = maqueen.Ultrasonic()\n        maqueen.motorStop(maqueen.Motors.All)\n        basic.pause(200)\n        if (leftCheck > 10) {\n            // Turn left to avoid\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, 40)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40)\n            basic.pause(500)\n        } else if (rightCheck > 10) {\n            // Turn right to avoid\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 40)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, 40)\n            basic.pause(500)\n        } else {\n            // If no escape route is available, back up and retry\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, 25)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, 25)\n            basic.pause(500)\n        }\n        // Skip the rest of the loop to execute obstacle avoidance\n        return;\n    }\n"],[0,"    "]],"start1":24,"start2":24,"length1":1409,"length2":8}]}]},{"timestamp":1740049332584,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"es><"],[-1,"variable id=\"s]+r/I[:u;=r1Y+@hR/J\">distance</variable><variable id=\"(YjRd]YTLhUq@iOwSCm`\">leftCheck</variable><variable id=\"9QJaT|V*IF5s:cz^Q_C(\">rightCheck</variable><"],[0,"/var"]],"start1":63,"start2":63,"length1":176,"length2":8},{"diffs":[[0," x=\""],[-1,"2"],[0,"0\" y=\""],[-1,"2"],[0,"0\"><"]],"start1":106,"start2":106,"length1":16,"length2":14},{"diffs":[[0,"ock "],[-1,"type=\"variables_set\"><field name=\"VAR\" id=\"s]+r/I[:u;=r1Y+@hR/J\">distance</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Obstacle Avoidance Maneuver</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s]+r/I[:u;=r1Y+@hR/J\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s]+r/I[:u;=r1Y+@hR/J\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Check left and right to decide escape route</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(YjRd]YTLhUq@iOwSCm`\">leftCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9QJaT|V*IF5s:cz^Q_C(\">rightCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(YjRd]YTLhUq@iOwSCm`\">leftCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn left to avoid</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9QJaT|V*IF5s:cz^Q_C(\">rightCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn right to avoid</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">If no escape route is available, back up and retry</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">25</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">25</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"return;\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block "],[0,"type"]],"start1":148,"start2":148,"length1":6834,"length2":8},{"diffs":[[0,"k></"],[-1,"next></block></next></block></"],[0,"stat"]],"start1":8908,"start2":8908,"length1":38,"length2":8}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"let distance = 0\nlet leftCheck = 0\nlet rightCheck = 0\n"],[0,"basi"]],"start1":0,"start2":0,"length1":58,"length2":4},{"diffs":[[0,") {\n    "],[1,"let "],[0,"distance"]],"start1":24,"start2":24,"length1":16,"length2":20},{"diffs":[[0,"        "],[1,"let "],[0,"leftChec"]],"start1":359,"start2":359,"length1":16,"length2":20},{"diffs":[[0,"        "],[1," let "],[0,"rightChe"]],"start1":493,"start2":493,"length1":16,"length2":21},{"diffs":[[0,"(500)\n        }\n"],[1,"        // Skip the rest of the loop to execute obstacle avoidance\n"],[0,"        return;\n"]],"start1":1324,"start2":1324,"length1":32,"length2":99}]}]},{"timestamp":1740049990268,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"eck = 0\n"],[-1,"\n"],[0,"basic.fo"]],"start1":46,"start2":46,"length1":17,"length2":16},{"diffs":[[0,"ver("],[-1,"() => {\n    // Read the distance from the ultrasonic sensor."],[1,"function () {"],[0,"\n   "]],"start1":64,"start2":64,"length1":68,"length2":21},{"diffs":[[0,"c()\n"],[-1,"\n"],[0,"    // "],[-1,"If an o"],[1,"O"],[0,"bstacle "],[-1,"is detected (distance less than 10 cm but valid)"],[1,"Avoidance Maneuver"],[0,"\n   "]],"start1":114,"start2":114,"length1":79,"length2":42},{"diffs":[[0,") {\n"],[-1,"        // Stop all motors and pause\n"],[0,"    "]],"start1":190,"start2":190,"length1":45,"length2":8},{"diffs":[[0,"asic.pause(200)\n"],[-1,"\n"],[0,"        // Check"]],"start1":249,"start2":249,"length1":33,"length2":32},{"diffs":[[0,"eft "],[-1,"side: run left motor forward briefly"],[1,"and right to decide escape route"],[0,"\n   "]],"start1":283,"start2":283,"length1":44,"length2":40},{"diffs":[[0,"ic()"],[-1,"\n\n        // Check right side: run right motor forward briefly"],[0,"\n   "]],"start1":445,"start2":445,"length1":70,"length2":8},{"diffs":[[0,"ic()"],[-1,"\n\n        // Stop motors again after the checks"],[0,"\n   "]],"start1":576,"start2":576,"length1":55,"length2":8},{"diffs":[[0,"200)"],[-1,"\n\n        // Decide on the escape route"],[0,"\n   "]],"start1":647,"start2":647,"length1":47,"length2":8},{"diffs":[[0,"left"],[-1,": left motor in reverse, right motor forwar"],[1," to avoi"],[0,"d\n  "]],"start1":702,"start2":702,"length1":51,"length2":16},{"diffs":[[0,"ight"],[-1,": left motor forward, right motor in reverse"],[1," to avoid"],[0,"\n   "]],"start1":941,"start2":941,"length1":52,"length2":17},{"diffs":[[0," // "],[-1,"No clear path:"],[1,"If no escape route is available,"],[0," bac"]],"start1":1149,"start2":1149,"length1":22,"length2":40},{"diffs":[[0,"and "],[1,"re"],[0,"try"],[-1," again"],[0,"\n   "]],"start1":1194,"start2":1194,"length1":17,"length2":13},{"diffs":[[0,"    "],[-1,"} else {\n        // No obstacle detected: move forward\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 40)"],[1,"    return;"],[0,"\n    }\n"],[-1,"})\n\n"],[0,"    "]],"start1":1381,"start2":1381,"length1":138,"length2":26}]}]},{"timestamp":1740050010186,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ble id=\""],[-1,"F3#BdX2TDe?==:L^U~#w"],[1,"s]+r/I[:u;=r1Y+@hR/J"],[0,"\">distan"]],"start1":72,"start2":72,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,")|ltmVdUl1}85lrfUzDP"],[1,"(YjRd]YTLhUq@iOwSCm`"],[0,"\">leftCh"]],"start1":127,"start2":127,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"?|RSrh11^]:`Et:!0?Ts"],[1,"9QJaT|V*IF5s:cz^Q_C("],[0,"\">rightC"]],"start1":183,"start2":183,"length1":36,"length2":36},{"diffs":[[0," x=\""],[1,"2"],[0,"0\" y=\""],[1,"2"],[0,"0\"><"]],"start1":274,"start2":274,"length1":14,"length2":16},{"diffs":[[0,"id=\""],[-1,"F3#BdX2TDe?==:L^U~#w\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read the distance from the ultrasonic sensor.</comment"],[1,"s]+r/I[:u;=r1Y+@hR/J\">distance</field"],[0,"><va"]],"start1":361,"start2":361,"length1":139,"length2":45},{"diffs":[[0,"f\"><"],[-1,"mutation else=\"1\"></mutation><"],[0,"comm"]],"start1":563,"start2":563,"length1":38,"length2":8},{"diffs":[[0,"60\">"],[-1,"If an o"],[1,"O"],[0,"bstacle "],[-1,"is detected (distance less than 10 cm but valid)"],[1,"Avoidance Maneuver"],[0,"</co"]],"start1":601,"start2":601,"length1":71,"length2":35},{"diffs":[[0,"AR\" id=\""],[-1,"F3#BdX2TDe?==:L^U~#w"],[1,"s]+r/I[:u;=r1Y+@hR/J"],[0,"\">distan"]],"start1":1048,"start2":1048,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"F3#BdX2TDe?==:L^U~#w"],[1,"s]+r/I[:u;=r1Y+@hR/J"],[0,"\">di"]],"start1":1479,"start2":1479,"length1":28,"length2":28},{"diffs":[[0,"ld><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">Stop all motors and pause</comment><"],[0,"next"]],"start1":1752,"start2":1752,"length1":82,"length2":8},{"diffs":[[0,"eft "],[-1,"side: run left motor forward briefly"],[1,"and right to decide escape route"],[0,"</co"]],"start1":2045,"start2":2045,"length1":44,"length2":40},{"diffs":[[0,"AR\" id=\""],[-1,")|ltmVdUl1}85lrfUzDP"],[1,"(YjRd]YTLhUq@iOwSCm`"],[0,"\">leftCh"]],"start1":2418,"start2":2418,"length1":36,"length2":36},{"diffs":[[0,"ld><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">Check right side: run right motor forward briefly</comment><"],[0,"valu"]],"start1":2713,"start2":2713,"length1":106,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"?|RSrh11^]:`Et:!0?Ts"],[1,"9QJaT|V*IF5s:cz^Q_C("],[0,"\">rightC"]],"start1":3043,"start2":3043,"length1":36,"length2":36},{"diffs":[[0,"ld><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">Stop motors again after the checks</comment><"],[0,"next"]],"start1":3302,"start2":3302,"length1":91,"length2":8},{"diffs":[[0,"on><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">Decide on the escape route</comment><"],[0,"valu"]],"start1":3499,"start2":3499,"length1":83,"length2":8},{"diffs":[[0,"id=\""],[-1,")|ltmVdUl1}85lrfUzDP"],[1,"(YjRd]YTLhUq@iOwSCm`"],[0,"\">le"]],"start1":3769,"start2":3769,"length1":28,"length2":28},{"diffs":[[0,"left"],[-1,": left motor in reverse, right motor forwar"],[1," to avoi"],[0,"d</c"]],"start1":4113,"start2":4113,"length1":51,"length2":16},{"diffs":[[0,"id=\""],[-1,"?|RSrh11^]:`Et:!0?Ts"],[1,"9QJaT|V*IF5s:cz^Q_C("],[0,"\">ri"]],"start1":5007,"start2":5007,"length1":28,"length2":28},{"diffs":[[0,"ight"],[-1,": left motor forward, right motor in reverse"],[1," to avoid"],[0,"</co"]],"start1":5352,"start2":5352,"length1":52,"length2":17},{"diffs":[[0,"60\">"],[-1,"No clear path:"],[1,"If no escape route is available,"],[0," bac"]],"start1":6153,"start2":6153,"length1":22,"length2":40},{"diffs":[[0,"and "],[1,"re"],[0,"try"],[-1," again"],[0,"</co"]],"start1":6198,"start2":6198,"length1":17,"length2":13},{"diffs":[[0,"/statement><"],[-1,"/block></next"],[1,"next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"return;\" numlines=\"1\"></mutation"],[0,"></block></n"]],"start1":6811,"start2":6811,"length1":37,"length2":150},{"diffs":[[0,"k></"],[-1,"statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">No obstacle detected: move forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value"],[1,"next></block></next"],[0,"></b"]],"start1":7091,"start2":7091,"length1":393,"length2":27}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"eck = 0\n"],[1,"\n"],[0,"basic.fo"]],"start1":46,"start2":46,"length1":16,"length2":17},{"diffs":[[0,"ver("],[-1,"function ()"],[1,"() =>"],[0," {\n "]],"start1":65,"start2":65,"length1":19,"length2":13},{"diffs":[[0,"ltrasonic()\n"],[1,"\n"],[0,"    // If an"]],"start1":154,"start2":154,"length1":24,"length2":25},{"diffs":[[0,"asic.pause(200)\n"],[1,"\n"],[0,"        // Check"]],"start1":371,"start2":371,"length1":32,"length2":33},{"diffs":[[0,"en.Ultrasonic()\n"],[1,"\n"],[0,"        // Check"]],"start1":561,"start2":561,"length1":32,"length2":33},{"diffs":[[0,"sonic()\n"],[1,"\n"],[0,"        "]],"start1":762,"start2":762,"length1":16,"length2":17},{"diffs":[[0,".pause(200)\n"],[1,"\n"],[0,"        // D"]],"start1":876,"start2":876,"length1":24,"length2":25},{"diffs":[[0,"  }\n"],[-1,"        // Exit the loop to avoid fucking up line follower\n        return;\n"],[0,"    "]],"start1":1708,"start2":1708,"length1":83,"length2":8},{"diffs":[[0,"CW, 40)\n"],[-1,""],[0,"    }\n"],[1,"})\n\n"],[0,"    if ("]],"start1":1828,"start2":1828,"length1":22,"length2":26}]}]},{"timestamp":1740050394131,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"basic.forever(function () {\n    // First, check for obstacles\n    let distance = maqueen.Ultrasonic("],[1,"let distance = 0\nlet leftCheck = 0\nlet rightCheck = 0\nbasic.forever(function () {\n    // Read the distance from the ultrasonic sensor.\n    distance = maqueen.Ultrasonic()\n    // If an obstacle is detected (distance less than 10 cm but valid"],[0,")\n  "]],"start1":0,"start2":0,"length1":104,"length2":244},{"diffs":[[0," // "],[-1,"Obstacle avoidance routin"],[1,"Stop all motors and paus"],[0,"e\n  "]],"start1":290,"start2":290,"length1":33,"length2":32},{"diffs":[[0,"use("],[-1,"150) // slightly shorter pause\n\n        // Check left side"],[1,"200)\n        // Check left side: run left motor forward briefly"],[0,"\n   "]],"start1":382,"start2":382,"length1":66,"length2":71},{"diffs":[[0,"    basic.pause("],[-1,"25"],[1,"30"],[0,"0)\n        let l"]],"start1":518,"start2":518,"length1":34,"length2":34},{"diffs":[[0,"00)\n        "],[-1,"let "],[0,"leftCheck = "]],"start1":535,"start2":535,"length1":28,"length2":24},{"diffs":[[0,"en.Ultrasonic()\n"],[-1,"\n"],[0,"        // Check"]],"start1":564,"start2":564,"length1":33,"length2":32},{"diffs":[[0,"ght side"],[1,": run right motor forward briefly"],[0,"\n       "]],"start1":599,"start2":599,"length1":16,"length2":49},{"diffs":[[0,"c.pause("],[-1,"25"],[1,"30"],[0,"0)\n     "]],"start1":717,"start2":717,"length1":18,"length2":18},{"diffs":[[0,"00)\n        "],[-1,"let "],[0,"rightCheck ="]],"start1":726,"start2":726,"length1":28,"length2":24},{"diffs":[[0,"sonic()\n"],[1,"        // Stop motors again after the checks"],[0,"\n       "]],"start1":764,"start2":764,"length1":16,"length2":61},{"diffs":[[0,"use("],[-1,"15"],[1,"20"],[0,"0)\n"],[-1,"\n"],[0,"    "]],"start1":880,"start2":880,"length1":14,"length2":13},{"diffs":[[0," Decide "],[1,"on the "],[0,"escape r"]],"start1":899,"start2":899,"length1":16,"length2":23},{"diffs":[[0," left motor "],[1,"in "],[0,"reverse, rig"]],"start1":982,"start2":982,"length1":24,"length2":27},{"diffs":[[0,"t motor "],[1,"in "],[0,"reverse\n"]],"start1":1281,"start2":1281,"length1":16,"length2":19},{"diffs":[[0," back up"],[1," and try again"],[0,"\n       "]],"start1":1512,"start2":1512,"length1":16,"length2":30},{"diffs":[[0," // "],[-1,"Return early so that line following does not run during obstacle avoidance\n        return;\n    }\n\n    // Now, ex"],[1,"Exit the loop to avoid fucking up line follower\n        return;\n    } else {\n        // No obstacle det"],[0,"ec"],[-1,"u"],[0,"te"],[-1," line follower logic.\n    // Read both line sensors once for consistency.\n    let leftSensor = "],[1,"d: move forward\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 40)\n    }\n    if ("],[0,"maqu"]],"start1":1719,"start2":1719,"length1":220,"length2":210},{"diffs":[[0,"eft)"],[-1,"\n    let rightSensor ="],[1," == 0 &&"],[0," maq"]],"start1":1966,"start2":1966,"length1":30,"length2":16},{"diffs":[[0,"ght)"],[-1,"\n\n    // If both sensors detect the line (0 means on the line for many setups)\n    if (leftSensor == 0 && rightSensor"],[1," == 0) {\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50)\n    } else {\n        if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight)"],[0," == "],[-1,"0"],[1,"1"],[0,") {\n"],[1,"    "],[0,"    "]],"start1":2021,"start2":2021,"length1":134,"length2":220},{"diffs":[[0,"(maqueen.Motors."],[-1,"All"],[1,"M2"],[0,", maqueen.Dir.CW"]],"start1":2261,"start2":2261,"length1":35,"length2":34},{"diffs":[[0,"    "],[-1,"} else if (leftSensor"],[1,"        maqueen.motorStop(maqueen.Motors.M1)\n            if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft)"],[0," == "],[-1,"0"],[1,"1"],[0," && "],[-1,"rightSensor"],[1,"maqueen.readPatrol(maqueen.Patrol.PatrolRight)"],[0," == "]],"start1":2301,"start2":2301,"length1":49,"length2":169},{"diffs":[[0,"    "],[-1,"// Turn slightly left: slow/stop left motor, run right motor\n"],[1,"        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 50)\n        "],[0,"    "]],"start1":2479,"start2":2479,"length1":69,"length2":80},{"diffs":[[0,"ueen.Motors.M1)\n"],[1,"            }\n        } else {\n            if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n        "],[0,"        maqueen."]],"start1":2584,"start2":2584,"length1":32,"length2":196},{"diffs":[[0,"maqueen.Motors.M"],[-1,"2"],[1,"1"],[0,", maqueen.Dir.CW"]],"start1":2789,"start2":2789,"length1":33,"length2":33},{"diffs":[[0,"    "],[-1,"} else if (leftSensor == 1 && rightSensor == 0) {\n        // Turn slightly right: run left motor, slow/stop right motor\n"],[1,"            maqueen.motorStop(maqueen.Motors.M2)\n                if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n            "],[0,"    "]],"start1":2828,"start2":2828,"length1":128,"length2":198},{"diffs":[[0,"een.Dir.CW, 50)\n"],[1,"            "],[0,"        maqueen."]],"start1":3070,"start2":3070,"length1":32,"length2":44},{"diffs":[[0,"    "],[-1,"} else {\n        // If both sensors lose the line, try moving forward slowly\n"],[1,"            }\n                if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n            "],[0,"    "]],"start1":3143,"start2":3143,"length1":85,"length2":163},{"diffs":[[0,"(maqueen.Motors."],[-1,"All"],[1,"M1"],[0,", maqueen.Dir.CW"]],"start1":3326,"start2":3326,"length1":35,"length2":34},{"diffs":[[0,"Dir.CW, 50)\n"],[1,"                } else {\n                    maqueen.motorStop(maqueen.Motors.M2)\n                }\n            }\n        }\n"],[0,"    }\n})\n"]],"start1":3354,"start2":3354,"length1":21,"length2":145}]}]},{"timestamp":1740052308767,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"iables><"],[1,"block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"F3#BdX2TDe?==:L^U~#w\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read the distance from the ultrasonic sensor.</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">If an obstacle is detected (distance less than 10 cm but valid)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F3#BdX2TDe?==:L^U~#w\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F3#BdX2TDe?==:L^U~#w\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop all motors and pause</comment><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Check left side: run left motor forward briefly</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\")|ltmVdUl1}85lrfUzDP\">leftCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Check right side: run right motor forward briefly</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"?|RSrh11^]:`Et:!0?Ts\">rightCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop motors again after the checks</comment><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Decide on the escape route</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\")|ltmVdUl1}85lrfUzDP\">leftCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn left: left motor in reverse, right motor forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"?|RSrh11^]:`Et:!0?Ts\">rightCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn right: left motor forward, right motor in reverse</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">No clear path: back up and try again</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">25</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">25</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">No obstacle detected: move forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M1</field><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M1</field></block></next></block></statement></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M2</field><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M2</field></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M2</field></block></statement></block></next></block></next></block></next></block></statement></block></statement></block></statement></block></next></block></next></block></statement></block><"],[0,"/xml>"]],"start1":239,"start2":239,"length1":13,"length2":16524}]}]},{"timestamp":1740052452622,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":288,"start2":288,"length1":52,"length2":8}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"}]}],"snapshots":[{"timestamp":1739217622774,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"car go vroom\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1739225665592,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</variable><variable id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</variable></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move in a controlled forward curve (slight right bias)\nLeft motor slower</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">70</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Right motor faster</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Left sensor off (drifting left) → Adjust smoothly to right</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value></block></next></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"B`X93ldQ).Y8|L[w$3Ap\">IR_L</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"tDEtoR}$tx5S/p:9:{k^\">IR_R</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO2\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Right sensor off (drifting right) → Adjust smoothly to left</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">100</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if completely off track</comment></block></statement></block></next></block></next></block></statement></block></xml>","main.ts":"basic.forever(function () {\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 60)\n    }\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, 25)\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 60)\n    }\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 60)\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, 25)\n    }\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n        // 🚨 Both sensors lost the line → Stop immediately!\n        maqueen.motorStop(maqueen.Motors.All);\n    }\n    if (maqueen.Ultrasonic() > 0 && maqueen.Ultrasonic() < 10) {\n        // 🚨 Object detected within 10 cm → Stop immediately!\n        maqueen.motorStop(maqueen.Motors.All);\n    }\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"car go vroom\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"maqueen\": \"github:DFRobot/pxt-maqueen#v1.7.15\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1739270714627,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"Gl[WHe|#C^oEl9Qt8iHt\">distance</variable><variable id=\"pJgp#X[DP{bTYV##,A`*\">obstacleThreshold</variable><variable id=\"4pM4G~l~ZppBdW);@T}O\">leftSensor</variable><variable id=\"vfzR!P^O=k+LXpDyH-23\">rightSensor</variable><variable id=\"J-XpsoL=QPJ]=i(^8=x)\">error</variable><variable id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</variable><variable id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</variable><variable id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</variable><variable id=\"ZoB({=W0Y]:5;NvUBi:8\">Kp</variable><variable id=\"dtkK;plNvPF+gY0`Kx4m\">turnSpeed</variable><variable id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</variable><variable id=\"n){c^)*:wag#iH-wQTWn\">recoverySpeed</variable></variables><block type=\"pxt-on-start\" x=\"40\" y=\"15\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"pJgp#X[DP{bTYV##,A`*\">obstacleThreshold</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop if an obstacle is within 10 cm</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Motor Speed Settings\nBase speed for straight sections</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">60</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"dtkK;plNvPF+gY0`Kx4m\">turnSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for turning</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"n){c^)*:wag#iH-wQTWn\">recoverySpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for recovery when line is lost</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Last Turn Direction</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">none</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"ZoB({=W0Y]:5;NvUBi:8\">Kp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Proportional Control Gain\nProportional gain for smoother corrections</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0.5</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"388\" y=\"35\"><comment pinned=\"false\" h=\"80\" w=\"160\">Proportional gain for smoother corrections\nProportional Control Logic</comment><statement name=\"HANDLER\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Ghost</field><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Gl[WHe|#C^oEl9Qt8iHt\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read ultrasonic sensor for obstacle detection</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Obstacle Avoidance</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Gl[WHe|#C^oEl9Qt8iHt\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"pJgp#X[DP{bTYV##,A`*\">obstacleThreshold</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Gl[WHe|#C^oEl9Qt8iHt\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop the robot if an obstacle is detected</comment><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Wait for 0.2 seconds</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"return;\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Skip the rest of the loop</comment></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"4pM4G~l~ZppBdW);@T}O\">leftSensor</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read sensor values</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"vfzR!P^O=k+LXpDyH-23\">rightSensor</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4pM4G~l~ZppBdW);@T}O\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"vfzR!P^O=k+LXpDyH-23\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><comment pinned=\"false\" h=\"80\" w=\"160\">Line is to the left</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">left</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4pM4G~l~ZppBdW);@T}O\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"vfzR!P^O=k+LXpDyH-23\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><comment pinned=\"false\" h=\"80\" w=\"160\">Line is to the right</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">right</field></block></value></block></next></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"4pM4G~l~ZppBdW);@T}O\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"vfzR!P^O=k+LXpDyH-23\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO2\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><comment pinned=\"false\" h=\"80\" w=\"160\">Line is centered</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors on the surface (white) - recover based on last turn</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">left</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"V|6OzsTfh9kbGZrKG;+K\">lastTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">right</field></block></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Calculate motor speeds using proportional control</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZoB({=W0Y]:5;NvUBi:8\">Kp</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"dtkK;plNvPF+gY0`Kx4m\">turnSpeed</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ZoB({=W0Y]:5;NvUBi:8\">Kp</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J-XpsoL=QPJ]=i(^8=x)\">error</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"dtkK;plNvPF+gY0`Kx4m\">turnSpeed</field></block></value></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Constrain motor speeds to avoid extreme values</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_constrain_value\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field></block></value><value name=\"low\"><block type=\"variables_get\"><field name=\"VAR\" id=\"n){c^)*:wag#iH-wQTWn\">recoverySpeed</field></block></value><value name=\"high\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_constrain_value\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field></block></value><value name=\"low\"><block type=\"variables_get\"><field name=\"VAR\" id=\"n){c^)*:wag#iH-wQTWn\">recoverySpeed</field></block></value><value name=\"high\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]W@c/xo6F_Q+-!:x~UoS\">baseSpeed</field></block></value></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Set motor speeds</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"[K|PIXv]5Ie{mGR6xO@W\">leftMotorSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"=nIrrs={ATdhMk-Kq:*_\">rightMotorSpeed</field></block></value><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Small Delay for Stability\nMinimal delay for faster response</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"let rightMotorSpeed = 0\nlet leftMotorSpeed = 0\nlet error = 0\nlet rightSensor = 0\nlet leftSensor = 0\nlet distance = 0\n// Stop if an obstacle is within 10 cm\nlet obstacleThreshold = 10\n// Motor Speed Settings\n// Base speed for straight sections\nlet baseSpeed = 60\n// Speed for turning\nlet turnSpeed = 40\n// Speed for recovery when line is lost\nlet recoverySpeed = 20\n// Last Turn Direction\nlet lastTurn = \"none\"\n// Proportional Control Gain\n// Proportional gain for smoother corrections\nlet Kp = 0.5\n// Proportional gain for smoother corrections\n// Proportional Control Logic\nbasic.forever(function () {\n    basic.showIcon(IconNames.Ghost)\n    // Read ultrasonic sensor for obstacle detection\n    distance = maqueen.Ultrasonic()\n    // Obstacle Avoidance\n    if (distance < obstacleThreshold && distance > 0) {\n        // Stop the robot if an obstacle is detected\n        maqueen.motorStop(maqueen.Motors.All)\n        // Wait for 0.2 seconds\n        basic.pause(200)\n        // Skip the rest of the loop\n        return;\n    }\n    // Read sensor values\n    leftSensor = maqueen.readPatrol(maqueen.Patrol.PatrolLeft)\n    rightSensor = maqueen.readPatrol(maqueen.Patrol.PatrolRight)\n    if (leftSensor == 0 && rightSensor == 1) {\n        // Line is to the left\n        error = -1\n        lastTurn = \"left\"\n    } else if (leftSensor == 1 && rightSensor == 0) {\n        // Line is to the right\n        error = 1\n        lastTurn = \"right\"\n    } else if (leftSensor == 0 && rightSensor == 0) {\n        // Line is centered\n        error = 0\n    } else {\n        // Both sensors on the surface (white) - recover based on last turn\n        if (lastTurn == \"left\") {\n            error = -1\n        } else if (lastTurn == \"right\") {\n            error = 1\n        } else {\n            error = 0\n        }\n    }\n    // Calculate motor speeds using proportional control\n    leftMotorSpeed = baseSpeed - Kp * error * turnSpeed\n    rightMotorSpeed = baseSpeed + Kp * error * turnSpeed\n    // Constrain motor speeds to avoid extreme values\n    leftMotorSpeed = Math.constrain(leftMotorSpeed, recoverySpeed, baseSpeed)\n    rightMotorSpeed = Math.constrain(rightMotorSpeed, recoverySpeed, baseSpeed)\n    // Set motor speeds\n    maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, leftMotorSpeed)\n    maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, rightMotorSpeed)\n    // Small Delay for Stability\n    // Minimal delay for faster response\n    basic.pause(1)\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"car go vroom\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"maqueen\": \"github:DFRobot/pxt-maqueen#v1.7.15\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1740048362520,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"kJ5B8Lq7pltEo|Yz+~CT\">distance</variable><variable id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</variable><variable id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</variable><variable id=\"$6*$hTwa(3hdDi]fvMr8\">leftCheck</variable><variable id=\"1c4aY1E{4=v8-j@l9e26\">rightCheck</variable><variable id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</variable><variable id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor</variable><variable id=\"WqmFsdU[dk9?22qJOerr\">rightSensor</variable><variable id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</variable><variable id=\"7QjfqE2:$jL-g?Q~6iw{\">baseSpeed</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</field><comment pinned=\"false\" h=\"80\" w=\"160\">Obstacle detection threshold in cm</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7QjfqE2:$jL-g?Q~6iw{\">baseSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Motor Speed Settings\nSpeed for straight movement</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">60</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for turning</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Speed for recovering lost line</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">25</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Last Turn Direction (helps when line is lost)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">none</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"348\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"kJ5B8Lq7pltEo|Yz+~CT\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read ultrasonic sensor for obstacle detection</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Obstacle Avoidance Maneuver</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"kJ5B8Lq7pltEo|Yz+~CT\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"kJ5B8Lq7pltEo|Yz+~CT\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Check left and right to decide escape route</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$6*$hTwa(3hdDi]fvMr8\">leftCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1c4aY1E{4=v8-j@l9e26\">rightCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$6*$hTwa(3hdDi]fvMr8\">leftCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</field></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn left to avoid</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1c4aY1E{4=v8-j@l9e26\">rightCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O|j1V1X(y)pkZS(NRT7[\">obstacleThreshold</field></block></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn right to avoid</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">If no escape route is available, back up and retry</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"A({]!ysBt8n)4fykC8v]\">recoverySpeed</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"return;\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Skip the rest of the loop to execute obstacle avoidance</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read line sensors</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"WqmFsdU[dk9?22qJOerr\">rightSensor</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><next><block type=\"controls_if\"><mutation elseif=\"2\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Line Following Logic (WITHOUT proportional control)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"WqmFsdU[dk9?22qJOerr\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Line is to the left -&gt; Turn left</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">left</field></block></value></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"WqmFsdU[dk9?22qJOerr\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Line is to the right -&gt; Turn right</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">right</field></block></value></block></next></block></next></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$yz3RNjf2IlRQ[UKx#~B\">leftSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"WqmFsdU[dk9?22qJOerr\">rightSensor</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO2\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors on black -&gt; Move forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7QjfqE2:$jL-g?Q~6iw{\">baseSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7QjfqE2:$jL-g?Q~6iw{\">baseSpeed</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Both sensors lost the line -&gt; Recover based on last known turn</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">left</field></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"TRSr/Ie7-ZOH8Hu-uf`U\">lastTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">right</field></block></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~Ee@)%Y8n0hIQ]I:{#S_\">turnSpeed</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">If no previous direction, stop</comment></block></statement></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Small delay for stability</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">5</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"","README.md":"","pxt.json":"{\n    \"name\": \"car go vroom\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"maqueen\": \"github:DFRobot/pxt-maqueen#v1.7.15\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1740050369612,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"F3#BdX2TDe?==:L^U~#w\">distance</variable><variable id=\")|ltmVdUl1}85lrfUzDP\">leftCheck</variable><variable id=\"?|RSrh11^]:`Et:!0?Ts\">rightCheck</variable></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"F3#BdX2TDe?==:L^U~#w\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read the distance from the ultrasonic sensor.</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">If an obstacle is detected (distance less than 10 cm but valid)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F3#BdX2TDe?==:L^U~#w\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F3#BdX2TDe?==:L^U~#w\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop all motors and pause</comment><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Check left side: run left motor forward briefly</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\")|ltmVdUl1}85lrfUzDP\">leftCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Check right side: run right motor forward briefly</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"?|RSrh11^]:`Et:!0?Ts\">rightCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop motors again after the checks</comment><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Decide on the escape route</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\")|ltmVdUl1}85lrfUzDP\">leftCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn left: left motor in reverse, right motor forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"?|RSrh11^]:`Et:!0?Ts\">rightCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn right: left motor forward, right motor in reverse</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">No clear path: back up and try again</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">25</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">25</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">No obstacle detected: move forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M1</field><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M1</field></block></next></block></statement></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M2</field><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M2</field></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M2</field></block></statement></block></next></block></next></block></next></block></statement></block></statement></block></statement></block></next></block></next></block></statement></block></xml>","main.ts":"let distance = 0\nlet leftCheck = 0\nlet rightCheck = 0\nbasic.forever(function () {\n    // Read the distance from the ultrasonic sensor.\n    distance = maqueen.Ultrasonic()\n    // If an obstacle is detected (distance less than 10 cm but valid)\n    if (distance < 10 && distance > 0) {\n        // Stop all motors and pause\n        maqueen.motorStop(maqueen.Motors.All)\n        basic.pause(200)\n        // Check left side: run left motor forward briefly\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 40)\n        basic.pause(300)\n        leftCheck = maqueen.Ultrasonic()\n        // Check right side: run right motor forward briefly\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40)\n        basic.pause(300)\n        rightCheck = maqueen.Ultrasonic()\n        // Stop motors again after the checks\n        maqueen.motorStop(maqueen.Motors.All)\n        basic.pause(200)\n        // Decide on the escape route\n        if (leftCheck > 10) {\n            // Turn left: left motor in reverse, right motor forward\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, 40)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40)\n            basic.pause(500)\n        } else if (rightCheck > 10) {\n            // Turn right: left motor forward, right motor in reverse\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 40)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, 40)\n            basic.pause(500)\n        } else {\n            // No clear path: back up and try again\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, 25)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, 25)\n            basic.pause(500)\n        }\n    } else {\n        // No obstacle detected: move forward\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 40)\n    }\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50)\n    } else {\n        if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 50)\n            maqueen.motorStop(maqueen.Motors.M1)\n            if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n                maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 50)\n                maqueen.motorStop(maqueen.Motors.M1)\n            }\n        } else {\n            if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n                maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 50)\n                maqueen.motorStop(maqueen.Motors.M2)\n                if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n                    maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 50)\n                    maqueen.motorStop(maqueen.Motors.M2)\n                }\n                if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n                    maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 50)\n                } else {\n                    maqueen.motorStop(maqueen.Motors.M2)\n                }\n            }\n        }\n    }\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"car go vroom\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"maqueen\": \"github:DFRobot/pxt-maqueen#v1.7.15\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1740052308767,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"F3#BdX2TDe?==:L^U~#w\">distance</variable><variable id=\")|ltmVdUl1}85lrfUzDP\">leftCheck</variable><variable id=\"?|RSrh11^]:`Et:!0?Ts\">rightCheck</variable></variables><block type=\"device_forever\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"F3#BdX2TDe?==:L^U~#w\">distance</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read the distance from the ultrasonic sensor.</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">If an obstacle is detected (distance less than 10 cm but valid)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F3#BdX2TDe?==:L^U~#w\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F3#BdX2TDe?==:L^U~#w\">distance</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop all motors and pause</comment><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Check left side: run left motor forward briefly</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\")|ltmVdUl1}85lrfUzDP\">leftCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Check right side: run right motor forward briefly</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"?|RSrh11^]:`Et:!0?Ts\">rightCheck</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"ultrasonic_sensor\"></block></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.All</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop motors again after the checks</comment><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value><next><block type=\"controls_if\"><mutation elseif=\"1\" else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Decide on the escape route</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\")|ltmVdUl1}85lrfUzDP\">leftCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn left: left motor in reverse, right motor forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"?|RSrh11^]:`Et:!0?Ts\">rightCheck</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">Turn right: left motor forward, right motor in reverse</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CCW</field><comment pinned=\"false\" h=\"80\" w=\"160\">No clear path: back up and try again</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">25</field></shadow></value><next><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CCW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">25</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">500</field></shadow></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><comment pinned=\"false\" h=\"80\" w=\"160\">No obstacle detected: move forward</comment><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">40</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.All</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M1</field><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M2</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M1</field></block></next></block></statement></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M2</field><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value><next><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M2</field></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolLeft</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"read_Patrol\"><field name=\"patrol\">maqueen.Patrol.PatrolRight</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">maqueen.Motors.M1</field><field name=\"Dir\">maqueen.Dir.CW</field><value name=\"speed\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">50</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"motor_motorStop\"><field name=\"motors\">maqueen.Motors.M2</field></block></statement></block></next></block></next></block></next></block></statement></block></statement></block></statement></block></next></block></next></block></statement></block></xml>","main.ts":"let distance = 0\nlet leftCheck = 0\nlet rightCheck = 0\nbasic.forever(function () {\n    // Read the distance from the ultrasonic sensor.\n    distance = maqueen.Ultrasonic()\n    // If an obstacle is detected (distance less than 10 cm but valid)\n    if (distance < 10 && distance > 0) {\n        // Stop all motors and pause\n        maqueen.motorStop(maqueen.Motors.All)\n        basic.pause(200)\n        // Check left side: run left motor forward briefly\n        maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 40)\n        basic.pause(300)\n        leftCheck = maqueen.Ultrasonic()\n        // Check right side: run right motor forward briefly\n        maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40)\n        basic.pause(300)\n        rightCheck = maqueen.Ultrasonic()\n        // Stop motors again after the checks\n        maqueen.motorStop(maqueen.Motors.All)\n        basic.pause(200)\n        // Decide on the escape route\n        if (leftCheck > 10) {\n            // Turn left: left motor in reverse, right motor forward\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, 40)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 40)\n            basic.pause(500)\n        } else if (rightCheck > 10) {\n            // Turn right: left motor forward, right motor in reverse\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 40)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, 40)\n            basic.pause(500)\n        } else {\n            // No clear path: back up and try again\n            maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CCW, 25)\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CCW, 25)\n            basic.pause(500)\n        }\n        // Exit the loop to avoid fucking up line follower\n        return;\n    } else {\n        // No obstacle detected: move forward\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 40)\n    }\n    if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n        maqueen.motorRun(maqueen.Motors.All, maqueen.Dir.CW, 50)\n    } else {\n        if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n            maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 50)\n            maqueen.motorStop(maqueen.Motors.M1)\n            if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n                maqueen.motorRun(maqueen.Motors.M2, maqueen.Dir.CW, 50)\n                maqueen.motorStop(maqueen.Motors.M1)\n            }\n        } else {\n            if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n                maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 50)\n                maqueen.motorStop(maqueen.Motors.M2)\n                if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 1 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 1) {\n                    maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 50)\n                    maqueen.motorStop(maqueen.Motors.M2)\n                }\n                if (maqueen.readPatrol(maqueen.Patrol.PatrolLeft) == 0 && maqueen.readPatrol(maqueen.Patrol.PatrolRight) == 0) {\n                    maqueen.motorRun(maqueen.Motors.M1, maqueen.Dir.CW, 50)\n                } else {\n                    maqueen.motorStop(maqueen.Motors.M2)\n                }\n            }\n        }\n    }\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"car go vroom\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"maqueen\": \"github:DFRobot/pxt-maqueen#v1.7.15\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1740052452636}